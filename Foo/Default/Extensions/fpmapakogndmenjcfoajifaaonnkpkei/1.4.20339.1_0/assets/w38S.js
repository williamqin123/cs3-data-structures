/*
COPYRIGHT (C) 2013-2019 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,b,d){b=null!=b?b:function(a){return a};var c=[],l="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof l){a=l.call(a);for(var p=0;!(l=a.next()).done;)c.push(b.call(d,l.value,p++))}else for(l=a.length,p=0;p<l;p++)c.push(b.call(d,a[p],p));return c}},"es6","es3");$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function c(){this.batch_=null}function b(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var d=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(a){d(a,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(t){this.asyncThrow_(t)}}}this.batch_=null};c.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(m){b.reject(m)}};e.prototype.createResolveAndReject_=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(m){this.reject_(m);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)l.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var l=new c;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(t){c.reject(t)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(r){l(r)}}:b}var d,l,g=new e(function(a,b){d=a;l=b});this.callWhenSettled_(c(a,d),c(b,l));return g};
e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?l.asyncExecute(c):this.onSettledCallbacks_.push(c)};e.resolve=b;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(c,d){for(var e=$jscomp.makeIterator(a),l=e.next();!l.done;l=e.next())b(l.value).callWhenSettled_(c,
d)})};e.all=function(a){var c=$jscomp.makeIterator(a),d=c.next();return d.done?b([]):new e(function(a,e){function l(b){return function(c){n[b]=c;f--;0==f&&a(n)}}var n=[],f=0;do n.push(void 0),f++,b(d.value).callWhenSettled_(l(n.length-1),e),d=c.next();while(!d.done)})};return e},"es6","es3");
function _typeof(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return _typeof(a)}function _classCallCheck(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}
function _defineProperties(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function _createClass(a,c,b){c&&_defineProperties(a.prototype,c);b&&_defineProperties(a,b);return a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}
function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++)b[c]=a[c];return b}}function _iterableToArray(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}
var filesInDirectory=function filesInDirectory(a){return new Promise(function(b){return a.createReader().readEntries(function(a){return Promise.all(a.filter(function(a){return"."!==a.name[0]}).map(function(a){return a.isDirectory?filesInDirectory(a):new Promise(function(b){return a.file(b)})})).then(function(a){var b;return(b=[]).concat.apply(b,_toConsumableArray(a))}).then(b)})})},filesToWatch=["Js2Q.js","messages.json","manifest.json"],timestampForFilesInDirectory=function(a){return filesInDirectory(a).then(function(a){return a.filter(function(a){return-1<
filesToWatch.indexOf(a.name)}).map(function(a){return a.name+a.lastModifiedDate}).join()})},reload=function(){chrome.tabs.query({active:!0,currentWindow:!0},function(a){a[0]&&chrome.tabs.reload(a[0].id);chrome.runtime.reload()})},watchChanges=function watchChanges(a,c){timestampForFilesInDirectory(a).then(function(d){c&&c!==d?reload():setTimeout(function(){return watchChanges(a,d)},1E3)})};chrome.management.getSelf(function(a){"development"===a.installType&&chrome.runtime.getPackageDirectoryEntry(function(a){return watchChanges(a)})});
var API=function(){function a(){_classCallCheck(this,a)}_createClass(a,null,[{key:"serializeObjectToQueryString",value:function(a){if("object"!==_typeof(a))throw new TypeError;try{var b=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&("object"===_typeof(a[d])&&(a[d]=JSON.stringify(a[d])),b.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d])));return a=b.join("&")}catch(e){throw Error(e);}}},{key:"formToJSON",value:function(a){return[].reduce.call(a,function(a,d){d.name.length&&(a[d.name]=
d.value);return a},{})}},{key:"proctorioFetch",value:function(c){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"GET",e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,q=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,m=7<arguments.length&&void 0!==arguments[7]?arguments[7]:3E4,
t=8<arguments.length&&void 0!==arguments[8]?arguments[8]:3;if("string"!==typeof c||!c.length)throw new TypeError;var v=new AbortController,g={};g.method=d;g.headers=e?e:{};"POST"===d&&l&&l instanceof Uint8Array?(g.headers["Content-type"]="application/octet-stream",g.body=l):"POST"===d&&l&&"object"===_typeof(l)&&(d=a.serializeObjectToQueryString(l),g.body=d,g.headers["Content-type"]="application/x-www-form-urlencoded");return new Promise(function(a,d){(function k(c,e,f){var l=Date.now();e.signal=v.signal;
var g=setTimeout(function(){b&&q&&b.logEvent("uHnj",q);v.abort()},m);fetch(c,e).then(function(e){if(200==e.status){var f=e.headers.get("content-type");if(f&&"application/octet-stream"===f)e.arrayBuffer().then(function(d){var c=Date.now()-l;b&&p&&b.logEvent("uHnj",p,c.toString());return a(new Uint8Array(d))})["catch"](function(a){throw Error(a);});else e.text().then(function(c){switch(c){case "":return b&&q&&b.logEvent("uHnj",q),a("");case "[5757]":return d("[5757]");case "[5959]":return d("[5959]");
default:var e=Date.now()-l;b&&p&&b.logEvent("uHnj",p,e.toString());try{var f=JSON.parse(c)}catch(y){f=c}return a(f)}})["catch"](function(a){throw Error(a);})}else switch(console.log("%s failed... %s, %s",c,e.status,e.statusText),e.status){case 404:return b&&q&&b.logEvent("uHnj",q),d(404);case 403:return b&&q&&b.logEvent("uHnj",q),d(403);case 400:return d(400);case 0:throw console.log("the request timed out or did not respond with a status code"),b&&q&&b.logEvent("uHnj",q),Error("timeout");default:if(e.statusText){f=
e.statusText.toLowerCase();if(-1<f.indexOf("abort")||-1<f.indexOf("cancelled"))throw Error("cancelled");b&&p&&b.logEvent("uHnj",p);throw Error(e.status);}}})["catch"](function(a){return 2>f?"AbortError"===a.name?d("timeout"):d(a):k(c,e,--f)})["finally"](function(){clearTimeout(g)})})(c,g,t)})}},{key:"fetch",value:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(c){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",
d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:3E4,p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:3;if("string"!==typeof c||!c.length)throw new TypeError;if("string"!==typeof b||!b.length)throw new TypeError;var q=new AbortController,m={};m.method=b;m.headers=d?d:{};"POST"===b&&e&&"object"===_typeof(e)&&(b=a.serializeObjectToQueryString(e),m.body=b,m.headers["Content-type"]=
"application/x-www-form-urlencoded");return new Promise(function(a,b){(function r(d,c,e){c.signal=q.signal;var f=setTimeout(function(){q.abort()},l);fetch(d,c).then(function(c){if(200==c.status)c.text().then(function(b){try{var d=JSON.parse(b)}catch(x){d=b}return a(d)})["catch"](function(a){throw Error(a);});else switch(console.log("%s failed... %s, %s",d,c.status,c.statusText),c.status){case 404:return b(404);case 403:return b(403);case 400:return b(400);case 0:throw Error("timeout");default:if(c.statusText){var e=
c.statusText.toLowerCase();if(-1<e.indexOf("abort")||-1<e.indexOf("cancelled"))throw Error("cancelled");throw Error(c.status);}}})["catch"](function(a){return 2>e?"AbortError"===a.name?b("timeout"):b(a):r(d,c,--e)})["finally"](function(){clearTimeout(f)})})(c,m,p)})})},{key:"getHtmlFromUrl",value:function(a){if("string"!==typeof a||!a.length)throw new TypeError;var b=new DOMParser;return this.fetch(a).then(function(a){return b.parseFromString(a,"text/html")})["catch"](function(a){throw Error(a);})}},
{key:"getJsonFromUrl",value:function(a){if("string"!==typeof a||!a.length)throw new TypeError;return this.fetch(a)["catch"](function(a){throw Error(a);})}}]);return a}(),LZString=function(){var a=String.fromCharCode,c={compressToUint8Array:function(a){a=c.compress(a);for(var b=new Uint8Array(2*a.length),e=0,l=a.length;e<l;e++){var p=a.charCodeAt(e);b[2*e]=p>>>8;b[2*e+1]=p%256}return b},decompressFromUint8Array:function(b){for(var d=Array(b.length/2),e=0,l=d.length;e<l;e++)d[e]=256*b[2*e]+b[2*e+1];
var p=[];d.forEach(function(b){p.push(a(b))});return c.decompress(p.join(""))},compress:function(b){return c._compress(b,16,function(b){return a(b)})},_compress:function(a,d,c){var b,e={},q={},m="",t=2,v=3,g=2,n=[],f=0,h=0,r;for(r=0;r<a.length;r+=1){var u=a.charAt(r);Object.prototype.hasOwnProperty.call(e,u)||(e[u]=v++,q[u]=!0);var w=m+u;if(Object.prototype.hasOwnProperty.call(e,w))m=w;else{if(Object.prototype.hasOwnProperty.call(q,m)){if(256>m.charCodeAt(0)){for(b=0;b<g;b++)f<<=1,h==d-1?(h=0,n.push(c(f)),
f=0):h++;var k=m.charCodeAt(0);for(b=0;8>b;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1}else{k=1;for(b=0;b<g;b++)f=f<<1|k,h==d-1?(h=0,n.push(c(f)),f=0):h++,k=0;k=m.charCodeAt(0);for(b=0;16>b;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1}t--;0==t&&(t=Math.pow(2,g),g++);delete q[m]}else for(k=e[m],b=0;b<g;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1;t--;0==t&&(t=Math.pow(2,g),g++);e[w]=v++;m=String(u)}}if(""!==m){if(Object.prototype.hasOwnProperty.call(q,m)){if(256>m.charCodeAt(0)){for(b=
0;b<g;b++)f<<=1,h==d-1?(h=0,n.push(c(f)),f=0):h++;k=m.charCodeAt(0);for(b=0;8>b;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1}else{k=1;for(b=0;b<g;b++)f=f<<1|k,h==d-1?(h=0,n.push(c(f)),f=0):h++,k=0;k=m.charCodeAt(0);for(b=0;16>b;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1}t--;0==t&&(t=Math.pow(2,g),g++);delete q[m]}else for(k=e[m],b=0;b<g;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1;t--;0==t&&g++}k=2;for(b=0;b<g;b++)f=f<<1|k&1,h==d-1?(h=0,n.push(c(f)),f=0):h++,k>>=1;
for(;;)if(f<<=1,h==d-1){n.push(c(f));break}else h++;return n.join("")},decompress:function(a){return c._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(b,c,e){var d=[],p=4,q=4,m=3,t=[],v,g,n=e(0),f=c,h=1;for(v=0;3>v;v+=1)d[v]=v;var r=0;var u=Math.pow(2,2);for(g=1;g!=u;){var w=n&f;f>>=1;0==f&&(f=c,n=e(h++));r|=(0<w?1:0)*g;g<<=1}switch(r){case 0:r=0;u=Math.pow(2,8);for(g=1;g!=u;)w=n&f,f>>=1,0==f&&(f=c,n=e(h++)),r|=(0<w?1:0)*g,g<<=1;var k=a(r);break;case 1:r=0;u=
Math.pow(2,16);for(g=1;g!=u;)w=n&f,f>>=1,0==f&&(f=c,n=e(h++)),r|=(0<w?1:0)*g,g<<=1;k=a(r);break;case 2:return""}v=d[3]=k;for(t.push(k);;){if(h>b)return"";r=0;u=Math.pow(2,m);for(g=1;g!=u;)w=n&f,f>>=1,0==f&&(f=c,n=e(h++)),r|=(0<w?1:0)*g,g<<=1;switch(k=r){case 0:r=0;u=Math.pow(2,8);for(g=1;g!=u;)w=n&f,f>>=1,0==f&&(f=c,n=e(h++)),r|=(0<w?1:0)*g,g<<=1;d[q++]=a(r);k=q-1;p--;break;case 1:r=0;u=Math.pow(2,16);for(g=1;g!=u;)w=n&f,f>>=1,0==f&&(f=c,n=e(h++)),r|=(0<w?1:0)*g,g<<=1;d[q++]=a(r);k=q-1;p--;break;
case 2:return t.join("")}0==p&&(p=Math.pow(2,m),m++);if(d[k])k=d[k];else if(k===q)k=v+v.charAt(0);else return null;t.push(k);d[q++]=v+k.charAt(0);p--;v=k;0==p&&(p=Math.pow(2,m),m++)}}};return c}();
function compressString(a){var c=(new TextEncoder).encode(a),b=c.length;a=LZString.compressToUint8Array(a);var d=a.length,e=new Uint8Array(1);new Uint8Array;d>=b?(e[0]=48,b=new Uint8Array(b+1),b.set(new Uint8Array(e),0),b.set(new Uint8Array(c),1)):(e[0]=49,b=new Uint8Array(d+1),b.set(new Uint8Array(e),0),b.set(new Uint8Array(a),1));return b}function deCompressString(a){return 48===a[0]?(new TextDecoder).decode(a.slice(1)):LZString.decompressFromUint8Array(a.slice(1))}
function getQuestionMatch(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;a=a.replace(/\s+/gu," ");if(7<a.match(/\S+/gu).length){var b=compressString(a.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," "));return API.proctorioFetch("https://us1.proctorauth.com/wbs/src",c,"POST",{},b,"","",6E4).then(function(a){return a=JSON.parse(deCompressString(a))})}return Promise.resolve(["S"])};
