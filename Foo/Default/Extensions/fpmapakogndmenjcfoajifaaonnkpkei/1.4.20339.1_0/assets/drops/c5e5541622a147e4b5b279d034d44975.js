/*
COPYRIGHT (C) 2013-2020 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,f){if(d){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var k=a[f];k in b||(b[k]={});b=b[k]}a=a[a.length-1];f=b[a];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var k=d.length,h=a.length;b=Math.max(0,Math.min(b|0,d.length));for(var g=0;g<h&&b<k;)if(d[b++]!=a[g++])return!1;return g>=h}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,b,f){b=null!=b?b:function(a){return a};var d=[],h="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof h){a=h.call(a);for(var g=0;!(h=a.next()).done;)d.push(b.call(f,h.value,g++))}else for(h=a.length,g=0;g<h;g++)d.push(b.call(f,a[g],g));return d}},"es6","es3");
$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var f=a.length,k=0;k<f;k++){var h=a[k];if(d.call(b,h,k,a))return{i:k,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
(function(a,d){function b(a,d){if(a())d();else var b=setInterval(function(){a()&&(clearInterval(b),d())},100)}var f,k,h=!1,g,t=setInterval(function(){try{chrome.runtime.sendMessage([42,"lub"],function(a){chrome.runtime.lastError?(clearInterval(t),location.reload()):"dub"!=a&&(clearInterval(t),location.reload())})}catch(u){if(u.message.startsWith("Cannot read")||u.message.startsWith("Error connecting to extension")||u.message.startsWith("Invocation of form runtime.connect")||u.message.startsWith("Extension context invalidated"))clearInterval(t),
location.reload()}},1E3),n=new ec21dc(function(){h=!0;n&&n.fa3e1(function(u){function x(a){b(function(){return h},function(){var b=-1;n.ee1(f,function(a){b=a;chrome.runtime.sendMessage([91])});n.e2cc("reason",function(){var c=n.c416(a,f);n.b1457("code",null===localStorage.getItem(c+"_close")?0:localStorage[c+"_close"])});n.f10(a,f,function(c){c?n.c8f4(a,f,k,function(e){C(k,function(r){if(e){var h=n.c416(a,f),q=Array.from(document.getElementsByClassName("dEAKG_fziJ")).find(function(a){return RegExp(/data-automation="sdk-show-timelimit"/).test(a.innerHTML)}).children,
D=function(a){try{if(a&&!(-1<d.location.hostname.indexOf("proctorio.instructure.com"))){var c=a.due_at,b=a.lock_at,e=a.unlock_at,r=a.time_limit;if(null!=e&&(null!=b||null!=e)&&null!=r){var z=Math.round(Date.parse(e)/1E3),f=Math.round(Date.parse(c||b)/1E3);if(!(isNaN(z)||isNaN(f)||isNaN(r))){var q=!1,g=function(){d.top.removeEventListener("ca_quiz_analytics_info",g);q||(q=!0,chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","4Enq",Math.round(Date.now()/1E3)+"_"+z+"_"+f+"_"+60*r+"_"+d.location.hostname]]))};
d.top.removeEventListener("ca_quiz_analytics_info",g);d.top.addEventListener("ca_quiz_analytics_info",g)}}}}catch(F){}},v=[];if(q.length){var w=function(a,c,b){if(Array.isArray(b))for(var e=0;e<b.length;e++)w(a,c,b[e]);else if("object"==typeof b)for(e in b)b.hasOwnProperty(e)&&w(a,e,b[e]);else a.push(c+": "+b);return a};d.addEventListener("q_info5",function(a){if(a&&a.detail){D(JSON.parse(JSON.stringify(a.detail)));a=w([],"quizinfo",a.detail);for(var c=0;c<a.length;c++)v.push(a[c])}});d.addEventListener("q_info6",
function(a){if(a&&a.detail){a=w([],"quizsubmission",a.detail);for(var c=0;c<a.length;c++)v.push(a[c])}});chrome.runtime.sendMessage([117]);var l="",p="";if(c[0]||c[1]||c[2]||c[47]){l=chrome.i18n.getMessage("Y015");p="Exam Requirements <a href='#'>(Learn More)</a>";(c[0]||c[2])&&c[1]&&!c[47]?l=chrome.i18n.getMessage("A214"):(c[0]||c[2])&&!c[1]&&c[47]?l=chrome.i18n.getMessage("Y017"):!c[0]&&!c[2]&&c[1]&&c[47]?l=chrome.i18n.getMessage("Y018"):!c[0]&&!c[2]||c[1]||c[47]?c[0]||c[2]||!c[1]||c[47]?c[0]||
c[2]||c[1]||!c[47]?(l="--",p=""):l=chrome.i18n.getMessage("Y016"):l=chrome.i18n.getMessage("A216"):l=chrome.i18n.getMessage("A215");var m=q[0].children[1].cloneNode(!0);m.innerHTML='<span><div class="ELpHc_bGBk ELpHc_fdca ELpHc_bdMA ELpHc_eQnG ELpHc_qFsi "><span><span class="dnjej_bGBk "></span>\x3c!-- react-text: 85 --\x3e'+l+'\x3c!-- /react-text --\x3e</span></div><span class="ELpHc_bGBk ELpHc_ycrn ELpHc_eQnG ELpHc_bLsb ">'+p+"</span></span>"}l=document.querySelector('[data-automation="sdk-submit-access-code-button"]');
p=q[0].parentElement.cloneNode(!0);p.innerHTML="";if(document.querySelector("span.proctoriocontrol")){if(m=l.querySelector("span.fQfxa_biBD"))m.innerText="Take the Quiz";m=l.cloneNode(!0);m.style.marginLeft="80px";m.innerHTML="<span class='fQfxa_caGd fQfxa_fKcQ fQfxa_eCSh fQfxa_ImeN undefined fQfxa_dqAF'><span class='fQfxa_biBD'>Take with Proctorio</span></span>";m.removeAttribute("disabled");m.style.cursor="pointer";p.append(l);p.append(m);q[0].parentElement.parentElement.append(p);g&&g.show();m.addEventListener("click",
function(e){y(n,c,h,localStorage,v);A(e,r,f,a,k,b,c,t)})}else q[0].append(m),n.e2cc("quizinfo",function(){n.b1457("quizinfo",v)}),p.innerHTML="",m=l.cloneNode(!0),m.innerHTML="<span class='fQfxa_caGd fQfxa_fKcQ fQfxa_eCSh fQfxa_ImeN undefined fQfxa_dqAF'><span class='fQfxa_biBD'>Continue</span></span>",p.append(m),q[0].parentElement.parentElement.append(p),m.removeAttribute("disabled"),m.style.cursor="pointer",m.addEventListener("click",function(e){A(e,r,f,a,k,b,c,t)}),y(n,c,h,localStorage,v)}}})}):
g&&g.show()})})}function y(a,b,c,f,g){a.e2cc("quizoverride",function(e){2==b[15]?a.b1457("quizoverride_response","denied"):e&&"none"!=e?e==cjs.mi6(c+"__xsalt").toString()?(chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","yFrr_ca",d.location.hostname]]),f["ok_"+c]=e,a.b1457("quizoverride_response","success"),document.location.reload()):a.b1457("quizoverride_response","invalid"):a.b1457("quizoverride",c)});g.push("LOCKED");chrome.runtime.sendMessage([74],function(a){});chrome.runtime.sendMessage([19,
!0]);chrome.runtime.sendMessage([4,chrome.i18n.getMessage("B410")])}function A(e,d,c,f,g,h,k,t){Array.from(document.getElementsByClassName("cqBsX_caGd dEAKG_bjvd"))[0].style.display="none";e=document.createElement("div");e.id="contain_prechecks";e.className="cqBsX_caGd dEAKG_bjvd";e.style="padding:40px";document.getElementsByClassName("caADp_gasz")[0].appendChild(e);var r=document.getElementById("contain_prechecks"),q=d.name,l="Canvas Quiz",p=a("span.emphasize-name").length;document.body.querySelector("h1")&&
(l=document.body.querySelector("h1").innerText);b(function(){return-1<h},function(){E(function(a){n.b8d(k,r,f,c,g,"ca",q,"","",l,"#content-wrapper",t,p,h,null,a)})})}(function(){var a=document.getElementById("section-tabs");if(a&&(a=a.getElementsByTagName("a"),a.length))for(var b=0;b<a.length;b++)-1<a[b].textContent.indexOf("Secure Exam Proctor")?a[b].parentNode.style.display="none":a[b].style.display="block"})();var B=function(){var a=document.querySelector(".proctorio-embed");return a?(a.style.display=
"none",!0):!1};chrome.runtime.sendMessage([11],function(b){chrome.runtime.lastError&&location.reload();f=b[0];k=b[1];if(!a("body").attr("data-p")){a("body").attr("data-p",!0);if(-1!=document.location.href.indexOf("lti"))chrome.runtime.sendMessage([1503],function(c){a("#quiz_show").show();if(c){var b=document.querySelector('[data-automation="sdk-access-code-textinput"]');if(b&&B())(g=a("#"+b.id).closest(".dEAKG_doGn")||0)&&g.hide(),x(c);else{var d=!1,e=new MutationObserver(function(b){b.forEach(function(b){document.querySelector('[data-automation="sdk-access-code-textinput"]')&&
!d&&(d=!0,B()&&((g=(b=document.querySelector('[data-automation="sdk-access-code-textinput"]'))?a("#"+b.id).closest(".dEAKG_doGn"):0)&&g.hide(),x(c),e.disconnect()))})});e.observe(document.querySelector("body"),{subtree:!0,childList:!0,attributes:!0,characterData:!0})}}});else if(-1<document.location.href.indexOf("assignments")){var d=function(){chrome.runtime.sendMessage([150],function(a){a=a.filter(function(a){return-1<a[1].indexOf("/taking/")});a.length?(a=a[0][1],a=a.replace("?",""),chrome.runtime.sendMessage([1501,
a])):d()})};d()}chrome.runtime.sendMessage([5,[document.title.trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," "),a("h1").first().text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," ")]],function(a){chrome.runtime.lastError&&location.reload()})}chrome.runtime.sendMessage([9],function(a){})});chrome.runtime.sendMessage([67]);var C=function(a,b){chrome.runtime.sendMessage([1506,a],function(a){b(a)})},E=function(a){var b=document.location.href.match(/taking\/(\d+)/);
b||a(null);b=b[1];b=document.location.href.split("taking")[0]+"api/participant_sessions/"+b+"/results";var c={method:"Get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d.sessionStorage.getItem("access_token")}};fetch(b,c).then(function(a){return a.json()}).then(function(b){a(b)}).catch(function(b){a({participant_session:{can_see_results_page:!0}})})}})})})($,window);
