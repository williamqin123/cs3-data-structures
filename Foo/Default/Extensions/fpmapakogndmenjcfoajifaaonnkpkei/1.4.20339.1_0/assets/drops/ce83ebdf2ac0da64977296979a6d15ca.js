/*
COPYRIGHT (C) 2013-2020 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var f=0;return function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,k){a!=Array.prototype&&a!=Object.prototype&&(a[f]=k.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var a=0;return function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+a++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill=function(a,f,k,r){if(f){k=$jscomp.global;a=a.split(".");for(r=0;r<a.length-1;r++){var l=a[r];l in k||(k[l]={});k=k[l]}a=a[a.length-1];r=k[a];f=f(r);f!=r&&null!=f&&$jscomp.defineProperty(k,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,k,r){k=null!=k?k:function(a){return a};var f=[],B="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof B){a=B.call(a);for(var A=0;!(B=a.next()).done;)f.push(k.call(r,B.value,A++))}else for(B=a.length,A=0;A<B;A++)f.push(k.call(r,a[A],A));return f}},"es6","es3");$jscomp.makeIterator=function(a){var f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return f?f.call(a):$jscomp.arrayIterator(a)};
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function f(){this.batch_=null}function k(a){return a instanceof l?a:new l(function(f,A){f(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;f.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var f=this;this.asyncExecuteFunction(function(){f.executeBatch_()})}this.batch_.push(a)};var r=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(a){r(a,0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var f=0;f<a.length;++f){var k=a[f];a[f]=null;try{k()}catch(V){this.asyncThrow_(V)}}}this.batch_=null};f.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var l=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{a(f.resolve,f.reject)}catch(K){f.reject(K)}};l.prototype.createResolveAndReject_=function(){function a(a){return function(A){k||(k=!0,a.call(f,A))}}var f=this,k=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};l.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof l)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var f=null!=a;break a;case "function":f=!0;break a;default:f=!1}f?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};l.prototype.resolveToNonPromiseObj_=function(a){var f=void 0;try{f=a.then}catch(K){this.reject_(K);return}"function"==typeof f?
this.settleSameAsThenable_(f,a):this.fulfill_(a)};l.prototype.reject_=function(a){this.settle_(2,a)};l.prototype.fulfill_=function(a){this.settle_(1,a)};l.prototype.settle_=function(a,f){if(0!=this.state_)throw Error("Cannot settle("+a+", "+f+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=f;this.executeOnSettledCallbacks_()};l.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)B.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var B=new f;l.prototype.settleSameAsPromise_=function(a){var f=this.createResolveAndReject_();a.callWhenSettled_(f.resolve,f.reject)};l.prototype.settleSameAsThenable_=function(a,f){var k=this.createResolveAndReject_();try{a.call(f,k.resolve,k.reject)}catch(V){k.reject(V)}};l.prototype.then=function(a,f){function k(a,f){return"function"==typeof a?function(f){try{r(a(f))}catch(ea){A(ea)}}:f}var r,A,B=new l(function(a,f){r=a;A=f});this.callWhenSettled_(k(a,r),k(f,A));
return B};l.prototype.catch=function(a){return this.then(void 0,a)};l.prototype.callWhenSettled_=function(a,f){function k(){switch(l.state_){case 1:a(l.result_);break;case 2:f(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?B.asyncExecute(k):this.onSettledCallbacks_.push(k)};l.resolve=k;l.reject=function(a){return new l(function(f,k){k(a)})};l.race=function(a){return new l(function(f,l){for(var r=$jscomp.makeIterator(a),A=r.next();!A.done;A=
r.next())k(A.value).callWhenSettled_(f,l)})};l.all=function(a){var f=$jscomp.makeIterator(a),r=f.next();return r.done?k([]):new l(function(a,l){function A(f){return function(k){B[f]=k;K--;0==K&&a(B)}}var B=[],K=0;do B.push(void 0),K++,k(r.value).callWhenSettled_(A(B.length-1),l),r=f.next();while(!r.done)})};return l},"es6","es3");
$jscomp.checkStringArgs=function(a,f,k){if(null==a)throw new TypeError("The 'this' value for String.prototype."+k+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,k){var f=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var l=f.length,B=a.length;k=Math.max(0,Math.min(k|0,f.length));for(var A=0;A<B&&k<l;)if(f[k++]!=a[A++])return!1;return A>=B}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,k){var f=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===k&&(k=f.length);k=Math.max(0,Math.min(k|0,f.length));for(var l=a.length;0<l&&0<k;)if(f[--k]!=a[--l])return!1;return 0>=l}},"es6","es3");$jscomp.findInternal=function(a,f,k){a instanceof String&&(a=String(a));for(var r=a.length,l=0;l<r;l++){var B=a[l];if(f.call(k,B,l,a))return{i:l,v:B}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,k){return $jscomp.findInternal(this,a,k).v}},"es6","es3");
(function(a,f){function k(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return k(a)}function r(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(a,e.key,e)}}function l(a,c,d){c&&r(a.prototype,c);d&&r(a,d);return a}function B(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"le";return va.getJsonFromUrl(a+"/d2l/api/versions/").then(function(a){var c="1.0";if(a&&a.length)for(var d=0;d<a.length;d++)if(a[d]&&a[d].LatestVersion&&a[d].ProductCode===b){c=a[d].LatestVersion;break}return c})}function A(a,c,d){return va.getJsonFromUrl(a+"/d2l/api/le/"+c+"/"+d+"/classlist/").then(function(a){var b=[];if(a&&a.length)for(var c=
0;c<a.length;c++)b.push([a[c].Identifier||"",a[c].ProfileBadgeUrl||"",a[c].DisplayName||"",a[c].OrgDefinedId||""]);return b})}function Da(a,c){return B(a).then(function(b){if(!b)throw Error();return A(a,b,c).then(function(a){if(!a||!a.length)throw Error();return a})})}function K(){if(W=!document.getElementById("RoleContainer")){var a=document.getElementById("d2l_minibar");a&&(a=a.getElementsByClassName("d2l-minibar-activity"))&&a.length&&(a=a[0].nextSibling)&&(a=a.getElementsByClassName("d2l-menuflyout-text"))&&
a.length&&(W=a[0].getElementsByTagName("strong").length)}Ia();a=document.URL;-1<a.indexOf("ViewLocation?location=")?(a=qp(document.URL.split("?")[1]),"undefined"!=typeof a.location?f.location.replace(G+a.location):v()):-1<a.indexOf("quiz_newedit")?V():"undefined"!=typeof localStorage.pio_d2_gb||-1<a.indexOf("quizzes_manage.d2l")?Ea():-1<a.indexOf("/quiz_summary.d2l")?Fa():-1<a.indexOf("/d2l/le/content/")&&-1<a.indexOf("/View")&&-1==a.indexOf("/ViewLocation")?Ha():-1<a.indexOf("/d2l/le/content/")&&
-1==a.indexOf("/View")?Ga():-1<a.indexOf("preferences_main.d2l")?da(document):-1<a.indexOf("special_access.d2l")?ea():v(document)}function V(){var b=-1,c="",d=document.getElementsByName("qi");d.length?c=d[0].value:(d=document.URL.split("?"),1<d.length&&(d=qp(d[1]),"undefined"!=typeof d.qi&&(c=d.qi)));if(c){var e=[],m=[],q=[],h="",aa="",y=0,L=0,Q=0,k=0,F=[],n=[],t=[],l=[],I=function(a,c){c(1)},w,E="",H="",R=0,z=[0,0],r=function(c){if(l.length)for(var b=0;b<l.length;b++)l[b].style.opacity=c;n.style.opacity=
c;a('form[action*="quiz_newedit"]').css("opacity",c)},A=function(){S(function(){var a=setInterval(function(){var b=document.getElementsByClassName("d_tabs_c_s").length?document.getElementsByClassName("d_tabs_c_s"):document.getElementsByClassName("d_tabs_c_s_o");if(b.length&&(E=b[0].id)){clearInterval(a);b=document.getElementsByClassName("d_tabs_header")[0];n=b.cloneNode(!0);b.style.display="none";var d=n.getElementsByTagName("tr")[0].lastChild;F=d.cloneNode();F.removeAttribute("id");F.classList.remove("d_tabs_c_s",
"d_tabs_c_o","d_tabs_c_s_o");F.classList.add("proctorio_d2l","d_tabs_c");var e=document.createElement("a");e.href="#";e.classList.add("d_tabs_link");e.textContent=chrome.i18n.getMessage("A384");F.appendChild(e);g.elbow.pioQuery.insertAfter(F,d);document.getElementsByClassName("d_tabs_tabcontent")[0].insertAdjacentHTML("beforebegin",'<div class="proctorio_settings_d2l" style="display:none"><div id="proctorio_enable_container" style="display:none"><input id="enable_proctorio" type="checkbox" /><label for="enable_proctorio">'+
chrome.i18n.getMessage("A894")+"</label></div></div>");d=function(a){a=a.target;if(!a.classList.contains("d_tabs_c_s")&&!a.classList.contains("d_tabs_c_o")&&!a.classList.contains("d_tabs_c_s_o")){for(var b=n.getElementsByClassName("d_tabs_c_o"),c=0;c<b.length;c++)b[c].classList.remove("d_tabs_c_o");a.classList.remove("d_tabs_c");a.classList.add("d_tabs_c_o")}};e=function(a){a=a.target;a.classList.contains("d_tabs_c_s_o")&&(a.classList.remove("d_tabs_c_s_o"),a.classList.add("d_tabs_c_s"));a.classList.contains("d_tabs_c_s")||
(a.classList.remove("d_tabs_c_o"),a.classList.add("d_tabs_c"))};for(var p=function(a){var b=this;if(b.classList.contains("d_tabs_c_s"))return!1;r(0);var d=function(){if(!b.classList.contains("proctorio_d2l")&&b.getAttribute("data-d2ltab")!=E)return document.getElementById(b.getAttribute("data-d2ltab"));if(1==t.length)return t[0];if(1<t.length)return t[1]}();I(d,function(a,e){a?(ca(),a=document.getElementById("enable_proctorio"),fa(a.checked,function(){b.classList.contains("proctorio_d2l")&&(localStorage.d2l_return_to_pio=
c);if(e instanceof HTMLElement)e.click();else{var a=d.getElementsByClassName("d_tabs_link");a.length?a[0].click():d.click()}})):r(1)});return!1},h=n.getElementsByTagName("td"),f=0;f<h.length;f++){var m=h[f].id;m&&(h[f].setAttribute("data-d2ltab",m),h[f].removeAttribute("id"));h[f].addEventListener("mouseenter",d);h[f].addEventListener("mouseleave",e);h[f].addEventListener("click",p)}b.parentNode.insertBefore(n,b);n.style.display="block";ra(document,function(a){var b=function(){var a=this.getAttribute("data-clone-index");
2==a?t[a].click():(r(0),I(t[a],function(b,d){b?(ca(),fa(document.getElementById("enable_proctorio").checked,function(){"proctorio_d2l"==H&&1==a&&(localStorage.d2l_return_to_pio=c);d instanceof HTMLElement?d.click():t[a].click()})):r(1)}))};t=[];for(var d=0;d<a.length;d++){t.push(a[d]);var e=a[d].cloneNode(!0);e.removeAttribute("id");e.setAttribute("data-clone-index",d);e.addEventListener("click",b);l.push(e);a[d].style.visibility="hidden";a[d].style.position="absolute";a[d].style.left="-1000px"}a=
t[0].parentNode;for(d=0;d<l.length;d++)a.insertBefore(l[d],t[0]);"undefined"==typeof localStorage.d2l_return_to_pio?(-1<E.indexOf("Properties")?(z=[0,1],B()):-1<E.indexOf("Restrictions")?(z=[1,0],K()):-1<E.indexOf("SubmissionViews")?v(document):(z=[0,0],v(document),I=function(a,b){b(1)}),H=E):(localStorage.removeItem("d2l_return_to_pio"),H="proctorio_d2l",T())})}},100)})},B=function(b){if(document.getElementsByName("name").length&&document.getElementById("descriptionMessage$html")){var d=document.getElementsByClassName("d_tabs_tabcontent");
d.length&&(d[0].style.display="none");document.body.style.cursor="wait";var p=!1,h=document.getElementsByName("descriptionIsDisplayed"),m=document.getElementsByName("disableRightClick");I=function(a,b){W(document,e[0],p,function(a,d){if(a)if(e[0]){var p=function(){f.top.removeEventListener("d2_script_inject",p);b(1)};f.top.addEventListener("d2_script_inject",p);for(a=0;a<h.length;a++)h[a].disabled=!1;m.length&&(m[0].disabled=!1);la(document,c,k,d,"descriptionMessage$html")}else b(1);else b(0)})};
M(!0,!0,!0,!1,function(b){if(b[0])g.elbow.b33q(document,0,"A518");else{var c=!1,D=!1;b=function(){p=!0;var b="bZAS";!c&&D?b="NQNT":!D&&c&&(b="mH3u");chrome.runtime.sendMessage([3,["_trackEvent","dHam",b+"_d2",f.location.hostname]]);(b=document.getElementById("proctorio_wait"))&&b.remove();g.elbow.ec975(document,chrome.extension.getURL("webassets/q76s.css"));a.get(chrome.extension.getURL("webassets/q76s.html"),function(a){document.getElementById("d2l_form").insertAdjacentHTML("afterend",mus.th(a,{A700:chrome.i18n.getMessage("A895")}));
ha(document,"descriptionMessage$html",!1,!1,function(a){k=a[0];z=[0,1];1<l.length?l[1].click():l[0].click()})})};if(e[0]){var y=document.getElementsByClassName("ds_b");if(y.length){var n=y.length-1;if("1"!=y[n].innerText){var x=(0==C?'<div class="proctorio_canvas_warning" style="margin-top:10px"><strong>':'<div class="proctorio_canvas_warning"><strong>')+chrome.i18n.getMessage("Y040")+"</strong></div>";a(".d_tabs_container").prepend(x);document.getElementsByClassName("proctorio_canvas_warning")[0].scrollIntoView()}setInterval(function(){if("1"!=
y[n].innerText){if(!document.getElementsByClassName("proctorio_canvas_warning").length){var b=(0==C?'<div class="proctorio_canvas_warning" style="margin-top:10px"><strong>':'<div class="proctorio_canvas_warning"><strong>')+chrome.i18n.getMessage("Y040")+"</strong></div>";a(".d_tabs_container").prepend(b);b=document.getElementsByClassName("proctorio_canvas_warning");b.length&&b[0].scrollIntoView()}}else document.getElementsByClassName("proctorio_canvas_warning").length&&(b=document.getElementsByClassName("proctorio_canvas_warning"),
b.length&&b[0].parentNode.removeChild(b[0]))},250)}}if(e[0]){document.getElementById("enable_proctorio").checked=!0;x=document.getElementsByName("name");if(x.length)for(var C=0,L=u.length;C<L;C++)if(-1!=x[0].value.indexOf(u[C])){c=!0;break}D=-1!=document.getElementById("descriptionMessage$html").value.indexOf("proctorio-oembed");if(!c&&!D){b();return}}(function(){ha(document,"descriptionMessage$html",!1,!1,function(a){try{k=a[0],e[0]||(z=[0,0]),fa(e[0],function(){try{if(z=[0,0],d.length&&(d[0].style.display=
"block"),document.body.style.cursor="default",e[0]){for(var a=0;a<h.length;a++)1==h[a].value&&(h[a].checked=!0),h[a].disabled=!0;m.length&&(m[0].checked=!1,m[0].disabled=!0);(function(){if(d.length){var a=d[0].getElementsByTagName("table");if(a.length){var b=a[0].getElementsByClassName("vui-button");if(!b.length&&(b=a[0].querySelectorAll('button[is="d2l-button"]'),!b))return;var c=[];a=function(){r(0);var a=c[parseInt(this.getAttribute("data-pio-index"))];I(a,function(b){b?a.click():r(1)})};for(var e=
0;e<b.length;e++){for(var p=g.elbow.pioQuery.siblings(b[e]),h=!1,D=0;D<p.length;D++)if("text"==p[D].type){h=!0;break}h||c.push(b[e])}for(e=0;e<c.length;e++)b=c[e].cloneNode(!0),b.removeAttribute("id"),b.setAttribute("data-pio-index",e),c[e].parentNode.insertBefore(b,c[e]),c[e].style.display="none",c[e].remove(),b.addEventListener("click",a)}}})();ba(document,d)}}catch(Pa){d.length&&(d[0].style.display="block"),document.body.style.cursor="default"}v(document)})}catch(Oa){d.length&&(d[0].style.display=
"block"),document.body.style.cursor="default",v(document)}})})()}})}else X()},K=function(d){if(document.getElementsByName("password").length&&(document.getElementsByName("enforceTimeLimit").length||document.getElementsByName("EnforceTimeLimitSelection").length)&&(document.getElementsByName("lateLimit").length||document.getElementsByName("LateBehavior").length)){var p=[],n=[],q={},x=[],t=[],k="Proctorio Exam",w=!1,O=0;if(function(){q=document.getElementsByName("password");if(q.length){q=q[0];p=document.getElementsByClassName("d_tabs_tabcontent");
p.length&&(p[0].style.display="none");var a=document.getElementById("d_page_title");a&&(n=a.getElementsByTagName("span"),k=n[0].textContent);x=document.getElementsByName("EnforceTimeLimitSelection");x.length?aa="10.4":(x=document.getElementsByName("enforceTimeLimit"),aa="10.3");t=document.getElementsByName("LateBehavior");t.length||(t=document.getElementsByName("lateLimit"));O=t.length;return!0}}()){document.body.style.cursor="wait";var F=function(a){function b(){for(var a=0;a<O;a++)2==t[a].value&&
(t[a].checked=!0),t[a].disabled=!0}var c=null,d=null,h=null,D=null,f=document.getElementById("z_j"),y=function(){if(h.checked=D.checked){f.addEventListener("click",b);if(q){q.type="password";q.value="             ";q.disabled=!0;var a=document.createElement("p");a.id="passwordAlert";a.innerHTML=chrome.i18n.getMessage("Y049");q.parentElement.appendChild(a)}for(a=0;a<x.length;a++)if(1==x[a].value||"enforced"==x[a].value)if(x[a].checked){var d=g.elbow.pioQuery.closest(x[a],"table");d&&(d.style.display=
"none")}else{var e=function(a){this.removeEventListener("change",e);if(a=g.elbow.pioQuery.closest(this,"table"))a.style.display="none"};x[a].disabled=!1;x[a].addEventListener("change",e);x[a].click()}else if(d=g.elbow.pioQuery.closest(x[a],"table"))d.style.display="none";c.length&&(c[0].checked=!0,c[0].disabled=!0);b();a=0;for(d=u.length;a<d;a++)for(;-1<k.indexOf(u[a]);)k=k.replace(u[a],"");k=k.trim();n.length&&(n[0].textContent=k+" "+g.elbow.f1802(m))}else{f.removeEventListener("click",b);q&&(q.disabled=
!1,q.value="",q.type="text",(a=document.getElementById("passwordAlert"))&&a.parentNode.removeChild(a));for(a=0;a<x.length;a++)if(d=g.elbow.pioQuery.closest(x[a],"table"))d.style.display="table";for(a=0;a<O;a++)t[a].disabled=!1;c.length&&(c[0].disabled=!1);if(n.length){a=0;for(d=u.length;a<d;a++)for(;-1<k.indexOf(u[a]);)k=k.replace(u[a],"");n[0].textContent=k.trim()}}},L=function(a){a.preventDefault();r(0);var b=d;I(b,function(a){z="10.3"==aa?[1,1]:[1,0];fa(enable_proctorio.checked,function(){a?b.click():
r(1)})})},C=document.getElementsByName("isAttemptRldb");C.length&&(C=g.elbow.pioQuery.closest(C[0],"table"))&&(C.style.display="none");var Q=p[0].getElementsByTagName("table")[0];C=Q.cloneNode();var w=document.createElement("tbody");C.appendChild(w);g.elbow.pioQuery.insertAfter(C,Q.nextSibling.nextSibling);var l=null;h=document.getElementById("enable_proctorio");D=document.createElement("input");D.type="checkbox";D.id="pio_fake_check";(function(){for(var a=!1,b=Q.getElementsByTagName("tr"),c=0;c<
b.length;c++)if(!a&&b[c].getElementsByTagName("h2").length){a=!0;var d=b[c].cloneNode(!0);d.getElementsByTagName("h2")[0].textContent=chrome.i18n.getMessage("A045");w.appendChild(d)}else{d=b[c].cloneNode(!0);d.style.backgroundColor="inherit";l=d.getElementsByTagName("td")[0];l.innerHTML="";l.setAttribute("style","");l.className="";l.appendChild(D);a=document.createElement("label");a.setAttribute("for","pio_fake_check");a.textContent=chrome.i18n.getMessage("A894");l.appendChild(a);w.appendChild(d);
break}})();c=document.getElementsByName("hasTimer");(function(){var a=document.getElementsByName("spType");a.length&&(a=a[0].parentNode)&&(a=a.parentNode)&&(d=a.getElementsByTagName("button"),d.length&&(d=d[0],a=d.cloneNode(!0),d.style.display="none",a.removeAttribute("id"),d.classList.add("special_access_no_ddial"),a.addEventListener("click",L),g.elbow.pioQuery.insertAfter(a,d),d.remove()))})();(function(){var a=document.getElementsByName("csSpAccess_existing");if(a.length){a=a[0].parentNode.getElementsByTagName("input");
for(var b=0;b<a.length;b++)if(!a[b].classList.contains("csSpAccess_existing")){var c=a[b].name;if(c&&c.startsWith("csSpAccess_")&&c.endsWith("_data")){c=a[b].previousSibling;var d=c.cloneNode(!0);d.href="#";d.addEventListener("click",L);c.style.display="none";g.elbow.pioQuery.insertAfter(d,c)}}}})();a[1]?(D.addEventListener("change",y),e[0]&&(D.checked=!0,y())):l.textContent=chrome.i18n.getMessage("A814");e[0]&&e[1]&&(D.disabled=!0,h.disabled=!0);v(document)},E=function(){if(document.getElementById("enable_proctorio").checked){for(var a=
0;a<x.length;a++){if(1==x[a].value||"enabled"==x[a].value)x[a].checked=!0;x[a].disabled=!0}for(a=0;a<O;a++)2==t[a].value&&(t[a].checked=!0),t[a].disabled=!0;q.value=""}},H=function(a,d){for(var p=0;p<x.length;p++)x[p].disabled=!1;w||e[0]!=a||(z=[0,0]);a?e[0]?d(1):g.elbow.bec6(e,null,function(a){var e=function(){g.bfc507(c,m,h,y,g.elbow.c0c2e7(m)?0:1,L,Q,function(a){a?d(1):(d(0),g.elbow.b33q(document,0,"A518"),E())})};m=0;h=g.elbow.ca0b2();q.disabled=!1;q.value=h;g.c91b(c,!0,function(d){g.elbow.bf2b(function(p){if(p.length)for(var h=
0;h<p.length;h++)if(p[h][1][4]&&(m=g.elbow.fd3(b,p[h][1][2],d,a))){e();return}g.aa21(c,!0,function(c){var p=function(){m=g.elbow.fd3(b,[c[0],g.elbow.fca(c,d)],d,a)};if(JSON.stringify(c)!=JSON.stringify(g.elbow.fd3(b,g.elbow.c5df(),d,a)))if(0!=b){var h=[c[0].slice(0),c[0].slice(1)];h[0][1]=0;JSON.stringify(h)!=JSON.stringify(g.elbow.fd3(b,g.elbow.c5df(),d,a))?p():m=g.elbow.fd3(b,c,d,a)}else m=g.elbow.fd3(b,c,d,a);else p();e()})})})}):e[0]?g.bce0(c,function(a){a?d(1):(d(0),g.elbow.b33q(document,0,"A518"),
E())}):d(1)};I=function(a,b){var c=document.getElementById("enable_proctorio").checked;P(document,c,w,function(d){d?!a.classList.contains("special_access_no_ddial")&&sa(document)?(ma(document,function(a,d){d.style.display="none";var e=d.cloneNode(!0);d.parentNode.insertBefore(e,d);w?H(c,function(a){b(a,d)}):e.addEventListener("click",function(){a.style.display="none";H(c,function(a){b(a,d)})});e.style.display="inline-block";a.style.display="block";da()}),a.click()):H(c,b):(b(0),E())})};M(!0,!1,!0,
!0,function(b){document.body.style.cursor="default";b[0]?g.elbow.b33q(document,0,"A518"):(p.length&&(p[0].style.display="block"),e[0]&&h!=q.value?(w=!0,chrome.runtime.sendMessage([3,["_trackEvent","dHam","UMrS_d2","d2",f.location.hostname]]),(b=document.getElementById("proctorio_wait"))&&b.remove(),g.elbow.ec975(document,chrome.extension.getURL("webassets/q76s.css")),a.get(chrome.extension.getURL("webassets/q76s.html"),function(a){document.getElementById("d2l_form").insertAdjacentHTML("afterend",
mus.th(a,{A700:chrome.i18n.getMessage("A895")}));for(a=0;a<l.length;a++)l[a].style.display="none";q.disabled=!1;q.value=h;document.getElementById("enable_proctorio").checked=!0;z=[1,0];l[1].click()})):F(b))})}}else X()},T=function(){H="proctorio_d2l";for(var b=document.getElementsByClassName("d_tabs")[0].getElementsByTagName("td"),d=0;d<b.length;d++)b[d].classList.remove("d_tabs_c_o","d_tabs_c_s","d_tabs_c_s_o"),b[d].classList.add("d_tabs_c");F.classList.remove("d_tabs_c");F.classList.add("d_tabs_c_s");
b=document.getElementsByClassName("d2l-max-width");if(b.length)for(d=0;d<b.length;d++){var n=f.getComputedStyle(b[d]);n&&n.hasOwnProperty("max-width")&&"function"==typeof n["max-width"].replace&&!isNaN(n["max-width"].replace("px",""))&&1100<parseInt(n["max-width"],10)||(b[d].style.maxWidth="1110px",b[d].style.width="100%")}z=[1,1];document.getElementsByClassName("d_tabs_tabcontent")[0].style.display="none";var q=document.getElementsByClassName("proctorio_settings_d2l")[0];q.style.display="block";
if(!(-1<E.indexOf("Properties"))||document.getElementsByName("name").length&&document.getElementById("descriptionMessage$html")){document.body.style.cursor="wait";xa();var x="",t=document.getElementById("d_page_title");if(t&&(t=t.getElementsByTagName("span"),t.length))for(x=t[0].textContent,d=0,b=u.length;d<b;d++)for(;-1<x.indexOf(u[d]);)x=x.replace(u[d],"");g.elbow.ec975(document,chrome.extension.getURL("webassets/q76s.css"));a.get(chrome.extension.getURL("webassets/q76s.html"),function(a){q.insertAdjacentHTML("beforeend",
mus.th(a,{A700:chrome.i18n.getMessage("A555")}));M(!0,!1,!1,!0,function(a){if(!a[0])if(a[1])g.aa21(c,!0,function(a){e[0]||(m=a);g.elbow.bf2b(function(a){document.getElementById("proctorio_wait").remove();document.body.style.cursor="default";var b=document.createElement("div");b.className="pio_settings_injection_point";q.appendChild(b);b=qp(document.location.href.split("?")[1]);b.hasOwnProperty("qi")&&b.qi!=c&&history.pushState(null,document.title,g.elbow.a9c59(g.d4c02(document.location.href,["qi"]),
[["qi",c]]));ia(a,function(){var a=document.getElementsByClassName("proctorio_settings")[0];a.style.display="none";for(var b=q.getElementsByClassName("proctorio_control"),c=0;c<b.length;c++)b[c].style.display="none";var d=document.getElementById("enable_proctorio");b=function(){if(d.checked)a.style.display="block",t&&t.length&&(t[0].textContent=x+" "+g.elbow.f1802(m));else if(a.style.display="none",t&&t.length){for(var b=0,c=u.length;b<c;b++)for(;-1<x.indexOf(u[b]);)x=x.replace(u[b],"");t[0].textContent=
x}};e[1]?d.disabled=!0:(document.getElementById("proctorio_enable_container").style.display="block",d.addEventListener("change",b));e[0]&&(d.checked=!0,b());d.checked&&(a.style.display="block");v(document)})})});else{q.insertAdjacentHTML("beforeend","<div>"+chrome.i18n.getMessage("A814")+"</div>");document.getElementById("proctorio_wait").remove();document.body.style.cursor="default";for(a=0;a<l[a].length;a++)l[a].style.display="none";v(document)}})});var k=function(a,b){a?(a=w.return_settings()[0][40]&&
w.verifyLoginPassword.length&&w.verifyLoginPassword!==h?!0:!1,e[0]&&!a?(z=[0,0],"undefined"!=typeof localStorage.p_unsaved?(z[0]=g.elbow.c0c2e7(m)!=g.elbow.c0c2e7(w.return_settings())?1:0,g.c3a14(c,w.return_settings(),function(a){localStorage.removeItem("p_unsaved");a?(m=w.return_settings(),b(1)):b(0)})):b(1)):(a=function(){w.set_password(h);m=w.return_settings();fa(!0,function(){z=[0,0];var a=w.verifyLoginPassword.length?w.verifyLoginPassword:w.return_password();g.bfc507(c,w.return_settings(),a,
y,g.elbow.c0c2e7(w.return_settings())?0:1,L,Q,function(a){a?b(1):b(0)})})},-1<E.indexOf("Properties")?(z=[0,1],U(document,!0,a)):-1<E.indexOf("Restrictions")?(z=[1,0],P(document,!0,!0,a)):(z=[1,1],a()))):e[0]?(a=function(){g.bce0(c,function(a){a?b(1):b(0)})},-1<E.indexOf("Properties")?(z=[0,1],U(document,!1,a)):-1<E.indexOf("Restrictions")?(z=[1,0],P(document,!1,!0,a)):(z=[1,1],a())):(z=[0,0],b(1))};I=function(a,b){var c=document.getElementById("enable_proctorio").checked;M(!1,!1,!1,!1,function(d){d[0]?
g.elbow.b33q(document,0,"A518"):sa(document)?(ma(document,function(a,d){k(c,function(a){b(a,d)})}),a.click()):k(c,b)})}}else X()},M=function(a,b,d,f,n){var p=function(){0!==e?e[0]?D():(e[1]&&g.ade5(c),f?(m=g.elbow.c5df(),q=[1,0],h="",e[1]?n([0,0]):ea(function(a){n([0,a])})):n([0,1])):(g.elbow.b33q(document,0,"A518"),n([1,0]))},D=function(){a&&!m.length?g.b5717(c,function(a){0==a||1==a?(g.elbow.b33q(document,0,"A518"),na()):(m=a,g.a7e11(m),y())}):y()},y=function(){0!==m?t():(g.elbow.b33q(document,
0,"A518"),n([1,0]))},t=function(){b&&!q.length?g.aa8ea(c,function(a){q=a;L()}):L()},L=function(){0!==q?k():(g.elbow.b33q(document,0,"A518"),n([1,0]))},k=function(){d&&!h.length?g.c48ab(c,function(a){h=a;C()}):C()},C=function(){0!==h?n([0,1]):(g.elbow.b33q(document,0,"A518"),n([1,0]))};(function(){e.length?p():g.d060f(c,function(a){e=a;g.aa42(e);p()})})()},fa=function(b,c){if(z[0]||z[1]){var d=function(){R--;0>=R&&(a("iframe.proctorio_iframe").remove(),c())};R=0;z[0]&&V(b,d);z[1]&&Z(b,d)}else c()},
N=function(a,b,c,d){var e=!1,h=setTimeout(function(){d?N(a,b,c,--d):(e=!0,b(),c(p,"timeout"))},3E4);R++;var p=document.createElement("iframe");document.body.appendChild(p);p.className="proctorio_iframe";p.setAttribute("style","visibility:hidden;top:0;position:absolute;left:0;");p.onload=function(){p=this.contentWindow||this.contentDocument.parentWindow;clearTimeout(h);p&&p.document&&p.document.URL?p.document.URL==a||g.d4c02(p.document.URL,["d2l_isfromtab"])==a?e||c(p):e||b():b()};p.src=a},V=function(a,
b){N(G+"/d2l/lms/quizzing/admin/modify/quiz_newedit_properties.d2l?qi="+c+"&ou="+J,b,function(b,c){c?g.elbow.b33q(document,0,"A518"):(da(),U(b.document,a,function(){ra(b.document,function(a){setTimeout(function(){a[0].click()})})}))},3)},Z=function(a,b){N(G+"/d2l/lms/quizzing/admin/modify/quiz_newedit_restrictions.d2l?qi="+c+"&ou="+J,b,function(c,d){d?g.elbow.b33q(document,0,"A518"):P(c.document,a,!0,function(a){a?b():ra(c.document,function(a){sa(c.document)&&(ma(f.top.document,function(a,b){b.click()}),
ma(f.top.document,function(a,b){b.click()}));setTimeout(function(){a[0].click()})})})},3)},W=function(a,b,c,d){ta();var e=!0,h=[],p=[],f=a.getElementsByName("name")[0],n=f.value;b&&void 0!==w&&null!==w&&(m=w.return_settings());for(var y=b?g.elbow.f1802(m):"",q=0,t=u.length;q<t;q++)for(;-1<n.indexOf(u[q]);)n=n.replace(u[q],"");n=n.trim();0<n.length?256<n.length+(b?y.length+1:0)?c?b&&(f.value=(n.substring(0,255-y.length)+" "+y).trim()):(p.push([f,chrome.i18n.getMessage("B105",(255-y.length).toString())]),
h.push("TITLELONG"),e=!1):b&&(n=n+" "+y):c?f.value=y:(p.push([f,chrome.i18n.getMessage("A892")]),e=!1);if(b)for(c=a.getElementsByName("descriptionIsDisplayed"),q=0;q<c.length;q++)1==c[q].value&&(c[q].checked=!0);b&&ba(a,[]);p.length&&ua([1,1],p);d(e,n)},P=function(a,b,c,d){try{ta();var n=!0,f=[],p=[],m=null,q=null,t=oa(a,"dateR_cb_ed","js_endDateEdit"),D=oa(a,"dateR_cb_sd","js_startDateEdit");if(null!=t&&t.checked)try{var k=pa(a,"dateR_dts_ed","js_endDateEdit");null!=k&&(m=qa(a,k),null!=m&&(y=g.elbow.ef9(m)))}catch(wa){}if(null!=
D&&D.checked){var aa=pa(a,"dateR_dts_sd","js_startDateEdit");null!=aa&&(q=qa(a,aa),null!=q&&(L=g.elbow.ef9(q)))}if(null!=D&&null!=t&&t.checked&&D.checked)try{null!=q&&null!=m&&q.getTime()>=m.getTime()&&(c?(t.checked=!1,D.checked=!1):(p.push([t,chrome.i18n.getMessage("A877")]),n=!1))}catch(wa){}if(b){var w=a.getElementsByName("enforceTimeLimit");if(w.length)w[0].disabled=!1,w[0].checked=!0;else if(w=a.getElementsByName("EnforceTimeLimitSelection"),w.length)for(var l=0;l<w.length;l++)"enforced"==w[l].value&&
(w[l].checked||w[l].click())}var O=0;m=480;b||(m=9999);var C=Y(a),F=ja(a,C),E=ka(a,C);if(C){var H=C.value.toString().replace(",","");g.e2e7(H,60,0,m,function(a,d,e){var h=!1;a&&(h=parseFloat(H),h=(h|0)!==h);!a||h?c?(C.disabled=!1,C.value=60,n=!1):(n=!1,H.length?h&&(d="FLOAT"):d="EMPTY",f.push(d),a="",b?"LONG"==d?a="B098":"SHORT"==d?a="B101":"NEGATIVE"==d?a="B104":"NAN"==d?a="B103":"FLOAT"==d?a="A890":"EMPTY"==d&&(a="A891"):h||"EMPTY"==d?h?a="A890":"EMPTY"==d&&(a="A891"):a="A889",p.push([C,chrome.i18n.getMessage(a)])):
O=e})}var z=0;b||(m=999999999999999);F&&(H=F.value.toString().replace(",",""),g.e2e7(H,60,0,m,function(a,d,e){var h=!1;a&&(h=parseFloat(H),h=(h|0)!==h);!a||h?c?(F.disabled=!1,F.value=1,n=!1):(a="",n=!1,H.length?h&&(d="FLOAT"):d="EMPTY",f.push(d),b?"LONG"==d?a="A879":"SHORT"==d?a="A880":"NEGATIVE"==d?a="A883":"NAN"==d?a="A881":"FLOAT"==d?a="A882":"EMPTY"==d&&(a="A885"):h||"EMPTY"==d?h?a="A882":"EMPTY"==d&&(a="A885"):a="A878",p.push([F,chrome.i18n.getMessage(a)])):z=e}));b&&C&&O&&F&&z&&g.e2e7(O+z,1,
0,60*m,function(a,b,d){a?Q=O+z:c?(C.value=60,F.value=1,n=!1):(a="",n=!1,"LONG"==b&&(a="A904"),f.push("COMBINED"+b),p.push([C,chrome.i18n.getMessage(a)]))});m=function(a){g.e2e7(a.value,1,0,255,function(b,d,e){e=!1;b&&(e=parseFloat(a.value),e=(e|0)!==e);if(!b||e)if(c)a.value="";else{n=!1;e&&(d="FLOAT");b="A886";if("NAN"==d||"FLOAT"==d)b="A887";p.push([a,chrome.i18n.getMessage(b)]);f.push("IP"+d)}})};if(E.length)for(l=0;l<E.length;l++)""!=E[l].value&&m(E[l]);if(b){var I=a.getElementsByName("lateLimit");
for(l=0;l<I.length;l++)2==I[l].value&&(I[l].checked=!0)}password_field=a.getElementsByName("password");password_field.length&&(b&&h?(c&&password_field[0].value!=h&&(n=!1),password_field[0].disabled=!1,password_field[0].value=h):e.length&&e[0]&&!b&&(password_field[0].value="",c&&(n=!1)));if(b){var r=a.getElementsByName("isAttemptRldb"),R=a.getElementsByName("isSubviewRldb");r.length&&(r[0].checked=!1);R.length&&(R[0].checked=!1)}p.length&&ua([1,1],p)}catch(wa){n=!0}d(n)},U=function(a,b,d){ha(a,"descriptionMessage$html",
!1,k,function(e){k=e[0];W(a,b,!0,function(e,h){if(b){var n=function(){f.top.removeEventListener("d2_script_inject",n);d()};f.top.addEventListener("d2_script_inject",n);la(a,c,k,h,"descriptionMessage$html")}else d()})})},ea=function(b){-1==document.URL.indexOf("?")?b(1):"undefined"==typeof qp(document.URL.split("?")[1]).qi?b(1):N(G+"/d2l/lms/quizzing/admin/mark/quiz_mark_users.d2l?qi="+c+"&ou="+J,function(){b(1)},function(d,h){h?b(1):(a(d.document).find('a[id^="att"]').length?(e=[0,1],g.ade5(c),b(0)):
b(1),R--,a(d).remove())},3)},ia=function(a,d){g.c91b(c,!0,function(n){var p=function(){f.top.removeEventListener("c9d53b",p);w=new c9d53b(document,b,c,m,e,g,0,n,a,!0,function(){g.c48ab(c,function(a){h=a?a:g.elbow.ca0b2();w.set_password(h)});d()})};"function"!=typeof c9d53b?(f.top.addEventListener("c9d53b",p),chrome.runtime.sendMessage([43],function(a){chrome.runtime.lastError&&f.top.location.reload(!0)})):p()})},ba=function(a,b){if(!b.length&&(b=a.getElementsByClassName("d_tabs_tabcontent"),!b.length))return;
a=b[0].getElementsByTagName("table");if(a.length&&(a=a[0].getElementsByTagName("a"),a.length))for(b=0;b<a.length;b++){var d=a[b].getAttribute("onclick");null!=d&&-1!=d.indexOf("ViewQuestion(")&&(d=g.elbow.pioQuery.closest(a[b],"tr"))&&(d=d.lastChild,1==d.nodeType&&(d=d.getElementsByTagName("input"),d.length&&(d[0].checked=!1,d[0].disabled=!0)))}},X=function(){g.elbow.b33q(document,0,"A888",[],"205607818");v(document);z=[0,0];I=function(a,b){b(1)}},Y=function(a){var b=a.getElementsByName("LateBehavior");
if(b.length){b=g.elbow.pioQuery.closest(b[0],"table");var d=b.parentElement.parentElement;if(null!=b&&"none"!==f.getComputedStyle(d).getPropertyValue("display"))for(d=g.elbow.pioQuery.siblings(b),b=0;b<d.length;b++){if("DIV"==d[b].tagName&&2==d[b].getElementsByTagName("INPUT").length)return d[b].getElementsByTagName("INPUT")[0]}else if("none"!==f.getComputedStyle(d.previousSibling).getPropertyValue("display")&&(b=d.previousSibling.querySelector('table input[type="text"]'))&&"number"===typeof parseInt(b.defaultValue)&&
!isNaN(parseInt(b.defaultValue)))return b}a=a.getElementsByName("enforceTimeLimit");if(a.length)for(a=g.elbow.pioQuery.siblings(a[0]),b=0;b<a.length;b++)if("INPUT"==a[b].tagName&&"text"==a[b].type)return a[b];return null},ja=function(a,b){b||(b=Y(a));if(b){if(a.getElementsByName("LateBehavior").length){var d=g.elbow.pioQuery.siblings(b.parentNode);for(a=0;a<d.length;a++)if("DIV"!=!d[a].tagName&&1==d[a].getElementsByTagName("INPUT").length)return d[a].getElementsByTagName("INPUT")[0]}if(a=g.elbow.pioQuery.closest(b,
"table"))for(b=a.getElementsByTagName("tr"),d=b.length,a=0;a<d;a++){var c=b[a].getElementsByTagName("label");if(c.length)for(var e=0,h=c.length;e<h;e++)if(-1<c[e].textContent.indexOf(chrome.i18n.getMessage("C007")))for(var n=g.elbow.pioQuery.siblings(c[e]),f=0,m=n.length;f<m;f++)if("INPUT"==n[f].tagName&&"text"==n[f].type)return n[f]}}return null},ka=function(a,b){var d=function(a){if(!a)return[];for(var b=a.getElementsByTagName("tr"),d=0,c=b.length;d<c;d++)if(-1<b[d].textContent.indexOf(chrome.i18n.getMessage("C008"))&&
(a=b[d].getElementsByTagName("input"),!(4>a.length))){b=[];d=0;for(c=a.length;d<c;d++)"text"==a[d].type&&b.push(a[d]);return b}return[]},c=a.getElementsByName("EnforceTimeLimitSelection");if(c.length){if(a=g.elbow.pioQuery.closest(c[0],"table"),null!=a)for(a=g.elbow.pioQuery.siblings(a),b=0;b<a.length;b++)if("TABLE"==a[b].tagName&&(c=d(a[b]),c.length))return c}else if(b||(b=Y(a)),b)return d(g.elbow.pioQuery.closest(b,"table"));return[]},ca=function(){var a=document.createElement("div");a.className=
"proctorio_d2l_save_overlay";a.style.width="100%";a.style.height="100%";a.style.position="fixed";a.style.top=0;a.style.left=0;a.style.zIndex=1E6;a.style.opacity=0;a.style.cursor="wait";document.body.appendChild(a)},da=function(){for(var a=document.getElementsByClassName("proctorio_d2l_save_overlay"),b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b])},sa=function(a){var b=a.getElementById("spType_restrict");return!b||!b.checked||a.getElementsByName("csSpAccess_existing").length||a.getElementsByName("csSpAccess_existingDeleted").length?
!1:!0},ma=function(a,b){var d=0,c=[],e=function(){clearTimeout(d);c.length||(c=a.getElementsByClassName("ddial_o"));if(c.length){c[0].style.display="none";var h=c[0].getElementsByClassName("vui-button");h.length?b(c[0],h[0]):setTimeout(e)}else setTimeout(e,100)};d=setTimeout(e,100)},ra=function(a,b){var d=0,c=[],e=function(){if(!c.length&&(c=a.getElementsByClassName("d_tabs_tabcontent"),!c.length))return!1;var e=c[0].nextSibling;e.classList.contains("d2l-page-buttons-spacer")&&(e=e.nextSibling);var h=
e.getElementsByTagName("a");if(!h.length&&(h=e.getElementsByTagName("button"),!h.length))return!1;clearInterval(d);e.style.zIndex=5;b(h);return!0};e()||(d=setInterval(e,250))};g.e2304(function(a){-1==a?(g.elbow.b33q(document,0,"A092"),document.body.style.cursor="default",v(document)):(b=a,g.elbow.ec975(document,chrome.extension.getURL("webassets/q67s.css")),-1<document.URL.indexOf("quiz_newedit_subview")&&-1==document.URL.indexOf("quiz_newedit_subviews")?v():A())})}else v()}function Ea(){var b=0;
if("undefined"!=typeof localStorage.d2l_return_to_pio){var c=a("#d2l_form").find('a[onclick="SetReturnPoint('+localStorage.d2l_return_to_pio+');"]');(b=c.length)&&c.get(0).click()}if(!b){P=function(){a(".pio_d2l_wrapper").hide();a("#proctorio_wait").hide();document.body.style.cursor="default";a("#d2l_minibar").css("position","fixed");a("#d_content").show();a(".d2l-max-width").removeClass("pio-d2l-max-width")};T=function(){a(".pio_d2l_wrapper").show();a("#proctorio_wait").show();a("#d2l_minibar").css("position",
"inherit");a("#d_content").hide();a(".d2l-max-width").addClass("pio-d2l-max-width");a(".dco_f").hide().siblings("a.dcm_handle").removeClass("dcm_h")};var d=function(b,d){var c=b.clone();c.find("img").attr("src",chrome.extension.getURL("webassets/icon-32.webp"));c.addClass("proctorio_list_launcher");var e="";if(0==d)e="A868";else if(1==d)e="A467";else return;c.find("span.dcm_i2").text(chrome.i18n.getMessage(e));c.on({click:function(){var b=g.elbow.pioQuery.closest(this,"tr");if(b){var c=b.getElementsByClassName("vui-link");
c.length?c=c[0]:(c=b.getElementsByClassName("vui-outline"),c.length||(c=b.getElementsByClassName("d2l-link d2l-link-inline")));if(c.length)c=c[0];else{b=b.getElementsByTagName("a");for(var e=0,h=b.length;e<h;e++){var m=b[e].getAttribute("is");if("vui-link"==m||"d2l-link"==m){c=b[e];break}}}c instanceof HTMLElement&&f(d,0,a(c))}},mouseenter:function(){this.classList.add("vui-dropdown-menu-item-focus");a(this).find("a").addClass("dcm_ah")},mouseleave:function(){this.classList.remove("vui-dropdown-menu-item-focus");
a(this).find("a").removeClass("dcm_ah")}});b.after(c)},e=function(b,d){var c=b.cloneNode();c.shadowRoot.innerHTML=b.shadowRoot.innerHTML;c.classList.add("proctorio_list_launcher");var e=d?"A467":"A868";b.parentElement.insertBefore(c,b.nextSibling);b=c.shadowRoot.querySelectorAll("span");try{b&&b.length?(b[0].innerText=chrome.i18n.getMessage(e),c.setAttribute("text",b[0].innerText)):(c.shadowRoot.innerHTML+="<span>"+chrome.i18n.getMessage(e)+"</span><slot></slot>",c.setAttribute("text",chrome.i18n.getMessage(e)))}catch(Q){}c.addEventListener("click",
function(){var b=g.elbow.pioQuery.closest(this,"tr");if(b){var c=b.getElementsByClassName("vui-link");c.length?c=c[0]:(c=b.getElementsByClassName("vui-outline"),c.length||(c=b.getElementsByClassName("d2l-link d2l-link-inline")));if(c.length)c=c[0];else{b=b.getElementsByTagName("a");for(var e=0,h=b.length;e<h;e++){var m=b[e].getAttribute("is");if("vui-link"==m||"d2l-link"==m){c=b[e];break}}}c instanceof HTMLElement&&f(d,0,a(c))}});c.addEventListener("mouseenter",function(){this.classList.add("vui-dropdown-menu-item-focus");
a(this).find("a").addClass("dcm_ah")});c.addEventListener("mouseleave",function(){this.classList.remove("vui-dropdown-menu-item-focus");a(this).find("a").removeClass("dcm_ah")})},f=function(b,c,d){var e=0,h="";if(0==c){var f=d.attr("href");h=d.text().trim()}else f=d.split("#")[0];f&&-1<f.indexOf("?")&&(d=qp(f.split("?")[1]),0==c?"undefined"!=typeof d.qi&&(e=d.qi):("undefined"!=typeof d.proctorio_id&&(e=d.proctorio_id),"undefined"!=typeof d.proctorio_title&&(h=d.proctorio_title.trim())));0==b?ia(a("#d_content"),
e,h):1==b&&ba(a("#d_content"),e,h)},q=function(b){var c=b.parentNode.querySelectorAll('a[is="d2l-link"], a[class="vui-link"], a[class="d2l-link d2l-link-inline"]'),f=b.querySelectorAll('[role="menuitem"]'),h=b.getElementsByTagName("d2l-menu-item");if(c.length&&!h.length){if(c=c[0].getAttribute("href"),b.getAttribute("data-pio")!=c){b.setAttribute("data-pio",c);c=!1;var m=b.parentNode.textContent;f=0;for(h=u.length;f<h;f++)if(-1!=m.indexOf(u[f])){c=!0;break}m=b.getElementsByClassName("proctorio_list_launcher");
if(c)if(m.length)for(f=0,h=m.length;f<h;f++)m[f].style.display="list-item";else b=a(b).find("li").last(),d(b,1),d(b,0);else if(m.length)for(f=0,h=m.length;f<h;f++)m[f].style.display="none"}}else if(f.length||h.length)if(m=f.length?f:h,c=!1,f=b.closest("th").getElementsByClassName("d2l-link"),f.length){var g=f[0].innerText;f=0;for(h=u.length;f<h;f++)if(-1!=g.indexOf(u[f])){c=!0;break}b=b.getElementsByClassName("proctorio_list_launcher");if(c)if(b.length)for(f=0,h=b.length;f<h;f++)b[f].style.display=
"list-item";else b=m[m.length-1],e(b,1),e(b,0);else if(b.length)for(f=0,h=b.length;f<h;f++)b[f].style.display="none"}};S(function(){var b=document.getElementById("d2l_form");(new MutationObserver(function(a){a.forEach(function(a){a.target.classList.contains("d2l-contextmenu-ph-dropdown")&&q(a.target)})})).observe(b,{attributes:!1,childList:!0,subtree:!0,characterData:!1});a("form").on("DOMNodeInserted",function(a){-1<a.target.className.indexOf("dco_f")&&q(a.target)});-1<document.URL.indexOf("proctorio_id")&&
f(-1!=document.URL.indexOf("proctorio_gb=1")?0:1,1,document.URL);localStorage.removeItem("pio_d2_gb");b=document.getElementsByClassName("dco_f");b.length||(b=document.getElementsByClassName("d2l-dropdown-menu-contextmenu"));if(b.length)for(var c=0,d=b.length;c<d;c++)q(b[c])});v(document)}}function Ha(){var b=a('a[href*="/d2l/lms/quizzing/admin/modify/quiz_newedit_activities.d2l"]'),c=document.URL.split("viewContent/")[1].split("/View")[0],d=0;if(b.length)"undefined"!=typeof localStorage.d2l_return_to_pio?
b.get(0).click():(P=function(){a(".pio_d2l_wrapper").hide();a("#proctorio_wait").hide();document.body.style.cursor="default";a("#d2l_minibar").css("position","fixed");a(".d2l-page-main").show();a(".d2l-max-width").removeClass("pio-d2l-max-width");a(".d2l-page-bg").removeClass("pio-d2l-max-width")},T=function(){a(".pio_d2l_wrapper").show();a("#proctorio_wait").show();a("#d2l_minibar").css("position","inherit");a(".d2l-page-main").hide();a(".d2l-max-width").addClass("pio-d2l-max-width");a(".d2l-page-bg").addClass("pio-d2l-max-width")},
localStorage.removeItem("pio_d2_gb"),-1<document.URL.indexOf("proctorio_id")?(b=qp(document.URL.split("?")[1]),"undefined"!=typeof b.proctorio_gb?ia(a(".d2l-page-main"),b.proctorio_id,b.proctorio_title):ba(a(".d2l-page-main"),b.proctorio_id,b.proctorio_title)):(b=b.attr("href"),""!=b&&-1<b.indexOf("?")&&(b=qp(b.split("?")[1]),b=b.qi,"undefined"!=typeof b&&(chrome.runtime.sendMessage([16,"cid_"+c+G,b,43829]),d=b)),d?S(function(){var b=!1,c=!1;c=document.getElementsByTagName("h1");if(c.length)for(var e=
0;e<c.length;e++)for(var f=0,k=u.length;f<k;f++)-1!=c[e].textContent.indexOf(u[f])&&(b=!0);c=0<document.getElementsByClassName("proctorio-oembed").length;b||c?g.d060f(d,function(b){g.aa42(b);var c=function(){for(var b=function(b,c){var e=b.cloneNode(!0),f="";if(0==c)f="A868";else if(1==c)f="A467";else return;var h=e.childNodes;if(h&&h.length){for(var m=0;m<h.length;m++)"SPAN"==h[m].tagName?(h[m].style.backgroundImage="url("+chrome.extension.getURL("webassets/icon-32.webp")+")",h[m].style.backgroundSize=
"cover"):3==h[m].nodeType&&(h[m].textContent=" "+chrome.i18n.getMessage(f));b.parentNode.insertBefore(e,b.nextSibling);var n=function(){e.removeEventListener("click",n);e.addEventListener("click",function(){history.forward()});0==c?ia(a(".d2l-page-main"),d,a("h1.d2l-page-title").text()):1==c&&ba(a(".d2l-page-main"),d,a("h1.d2l-page-title").text())};e.addEventListener("click",n)}},c=a("#QuizFormId").parent().parent().next().find(".d2l-left").find("a"),e=!1,f=0;f<c.length;f++)if(c[f].getElementsByClassName("vui-icon-d2l").length){c=
c[f];e=!0;break}e||(c=1<c.length?c.get(1):c.get(0));b(c,1,e);b(c,0,e);X(a("#DescriptionForm"),d,"",1);ya(a('input[type="text"][class*="d2l-edit"]'))},e=function(){document.body.style.cursor="default";a("#proctorio_wait").remove();a('div[role="main"]').show();v()};b[0]?c():g.adcf8(document,d,c,e,a('div[role="main"]'),G)}):v()}):v()));else{if(W){var e=a('input[name="password"]').length;e||a("iframe").each(function(){var b=this.contentWindow||this.contentDocument.parentWindow;if(b&&b.document&&(e=a(b.document).length))return!1});
e?S(function(){for(var b=!1,c=a("h1").text(),d=0,e=u.length;d<e;d++)if(-1!=c.indexOf(u[d])){b=!0;break}c=a(".proctorio-oembed").length||a(".proctorio-embed").length||a('iframe[src*=".vo.msecnd.net/lti/exam"]').length;(b||c)&&a("iframe").each(function(){var b=this.contentWindow||this.contentDocument.parentWindow;b&&b.document&&a(b.document).find("#d_content").html(chrome.i18n.getMessage("A195"))});v()}):v()}else v();document.body.style.cursor="default"}}function Fa(){document.body.style.cursor="wait";
var b=0;if(-1<document.URL.indexOf("?")){var c=qp(document.URL.split("?")[1]);"undefined"!=typeof c.qi&&(b=c.qi)}b?g.d060f(b,function(b){b[0]?(g.elbow.ec975(document,chrome.extension.getURL("webassets/q58s.css")),a.get(chrome.extension.getURL("webassets/q58s.html"),function(c){var d=document.getElementsByClassName("vui-button-primary");d.length&&d[0].parentNode.insertAdjacentHTML("beforebegin",mus.th(c,{A195:chrome.i18n.getMessage("A195"),A153:chrome.i18n.getMessage("A153")}));g.aa42(b);W?(a("#d_content").html(chrome.i18n.getMessage("A195")),
v(),document.body.style.cursor="default"):(c=a('input[name="bypass"]'),c.length&&!c.prop("checked")?a('input[name="bypass"]').get(0).click():(c.prop("disabled",!0),v(document)))})):v(document);document.body.style.cursor="default"}):v(document)}function Ga(){var b=a('.proctorio-oembed, iframe.d2l-xspl-box[data-original-html*=".vo.msecnd.net/lti/exam"], a.d2l-link-main:contains(Remotely Proctored)');b.length&&S(function(){b.each(function(){var b=a(this).closest("li.d2l-datalist-item");if("undefined"==
typeof b.data("pio-handled")){var d=b.find(".d2l-container-icon").find("a").attr("href");b.data("pio-handled",1);X(b.find("form.d2l-form-primary"),0,d,!0);b.on("click",".d2l-editable",function(b){a(this).closest("li.d2l-datalist-item").find(".d2l-right").find(".d2l-menuflyout").length&&(b=a(this).parent().parent(),b.length&&("FORM"==b.get(0).nodeName?"undefined"==typeof b.data("edit-handled")&&b.find(".d2l-editable-target-htmleditor").length&&b.closest("li.d2l-datalist-item").find(".d2l-menuflyout-opener").length&&
(b.data("edit-handled",1),X(b,0,d,!0)):ya(a(this).closest(".d2l-inline").find(".d2l-editable-target").find("input"))))})}})})}function da(b,c){var d=1,e=a(b).find('input[name="RBN_ShowSecondaryWindows"]');e.each(function(){this.checked&&(d=this.value)});if(0==d)e.prop("disabled","disabled"),c||v(b),sessionStorage.d2l_pio_dialog_settings=1;else{e.get(0).checked="checked";var f=a(b).find(".d_tabs_tabcontent").next().find(".vui-button").get(1);"undefined"==typeof f&&(f=a(b).find(".d_tabs_tabcontent").next().find(".d2l-button ").get(0));
setInterval(function(){f.click()},100)}}function ea(){var a=-1,c=document.getElementsByClassName("ci");c.length?a=c[0].value:-1<document.URL.indexOf("?")&&(c=qp(document.URL.split("?")[1]),c.hasOwnProperty("ci")&&(a=c.ci));-1==a?v(document):(document.body.style.cursor="wait",S(function(){var b=!1,c=document.getElementById("d_page_title");if(c)for(var f=0,q=u.length;f<q;f++)if(-1!=c.textContent.indexOf(u[f])){b=!0;break}b?g.d060f(a,function(a){if(a&&Array.isArray(a)&&a[1]){var b=null,c=null,d=[],e=
function(a,b){for(var c="",d=document.getElementsByTagName("label"),e=0,f=d.length;e<f;e++)if(d[e].textContent.trim().toLowerCase()==a){c=d[e].getAttribute("for");b&&d[e].removeAttribute("for");break}return c?document.getElementById(c):null},f=function(a){var b=!0,c=function(a){var c=oa(document,"dateR_cb_sd","js_startDateEdit"),d=oa(document,"dateR_cb_ed","js_endDateEdit");c&&d&&c.checked&&d.checked&&(c=qa(document,pa(document,"dateR_cb_sd","js_startDateEdit")),d=qa(document,pa(document,"dateR_cb_ed",
"js_endDateEdit")),c&&d&&c.getTime()>=d.getTime()&&(b=!1));a()},f=function(a){if(d.length){for(var c="",f=0,h=d.length;f<h;f++)if(d[f].checked){c=d[f].value;break}if("enforced"!=c)a();else{var n=0;c=e("time limit");var m=e("grace period"),q=function(a,c){a?g.e2e7(a.value.toString().replace(",",""),60,0,480,function(a,d,e){a?n+=e:b=!1;c()}):c()};q(c,function(){q(m,function(){g.e2e7(n,1,0,28800,function(c,d,e){c||(b=!1);a()})})})}}else a()};(function(a){var c=document.getElementsByName("gridUsers_cb");
if(c.length){for(var d=0,e=c.length;d<e;d++)if(c[d].checked){a();return}b=!1}a()})(function(){b?c(function(){b?f(function(){a(b)}):a(b)}):a(b)})},h=function(a){c.classList.contains("pio_button_disabled")||(c.classList.add("pio_button_disabled"),g.b4d5(),f(function(a){a?b.click():(c.classList.remove("pio_button_disabled"),g.a924())}))};(function(a){var b=document.getElementById("d2l_form");if(b){b=b.parentNode.nextSibling;var c=b.getElementsByTagName("a");c.length||(c=b.getElementsByTagName("button"));
a(c)}else a([])})(function(a){if(a.length){b=a[0];c=b.cloneNode(!0);c.removeAttribute("id");c.addEventListener("click",h);b.parentNode.insertBefore(c,b);b.style.visibility="hidden";b.style.position="absolute";b.style.left="-1000px";d=document.getElementsByName("EnforceTimeLimitSelection");if(d.length){a=0;for(var f=d.length;a<f;a++)if("notEnforced"==d[a].value){d[a].checked&&d[0].click();d[a].disabled=!0;break}}if(a=e("assign alternative late behaviour",!0))a.checked&&a.click(),a.disabled=!0,f=a.cloneNode(!0),
f.removeAttribute("id"),f.removeAttribute("name"),a.parentNode.insertBefore(f,a),a.style.visibility="hidden",a.style.position="absolute",a.style.left="-1000px"}v(document)})}else v(document)}):v(document)}))}function Ia(){if(-1==document.URL.indexOf("preferences_main.d2l")&&"undefined"==typeof sessionStorage.d2l_pio_dialog_settings){var b=a("#d2l_minibar").find('a[href*="preferences_main.d2l"]').first().attr("href");if(!b)if(document.body.classList.contains("daylight"))b=G+"/d2l/lp/preferences/preferences_main/preferences_main.d2l?ou="+
J;else return;var c=0,d=a("<iframe />",{style:"position:absolute;left:-1000px;top:0px;width:0;",src:b,"class":"proctorio_iframe"}).appendTo(a("body")).load(function(){clearInterval(c);var a=this.contentWindow||this.contentDocument.parentWindow;a&&a.document&&a.document.URL&&(da(a.document),c=setInterval(function(){"undefined"!=typeof sessionStorage.d2l_pio_dialog_settings&&(clearInterval(c),d.remove())},500))})}}function ha(b,c,d,e,f){S(function(){var m=a(b).find('textarea[name="'+c+'"]').val(),h=
a([]),k=u[0],l=g.elbow.f016(a(b).find('input[name="name"]').val(),u);l.length&&l[0].length&&(k=l[0][0]);g.d4abe(b,d,e,f87a71,a(b).find('input[name="name"]'),k,m,h,Ka,f,c)})}function S(a){g.elbow.fa3e1("q88s",Y,u,function(b){Y=b;za="";a()})}function la(a,c,d,e,m){S(function(){var b=a.getElementsByName("name")[0],h=f.document.getElementsByName("name")[0];b&&(b.value=e);h&&(h.value=e);localStorage.removeItem("p_unsaved");g.d751(a,a52d029(),"",!1);g.d751(a,a0a4f(Y,za,g.be24(c),J,d?cjs.mi6(f.crypto.getRandomValues(new Uint32Array(1))[0].toString()).toString():
"",m))})}function ja(b){var c=b.find("a:contains('Secure Exam Proctor')").closest("div.d2l-datalist-item-content");b.find("div.d2l-datalist-item-content").show();c.hide();b.find(".d2l-xspl-box").each(function(){a(this).data("original-html")&&-1!=a(this).data("original-html").indexOf(".vo.msecnd.net/lti/exam")&&a(this).hide()})}function ka(b){b=a(b);if(na)v(b);else b.on("DOMNodeInserted",function(b){ja(a(b.target))});setInterval(function(){na&&Aa(b);b.find("iframe, frame").each(function(){try{if(!(null==
this||this.classList&&this.classList.contains("proctorio_iframe"))&&this&&this.src&&-1!=this.src.indexOf("://"+f.top.location.hostname)&&!this.getAttribute("data-pwd")&&null!=this.contentDocument){var a=this.contentWindow||this.contentDocument.parentWindow;a&&a.document&&(this.setAttribute("data-pwd",1),ka(a.document),this.onload=function(){ka((this.contentWindow||this.contentDocument.parentWindow).document)})}}catch(d){}})},500);ja(b)}function v(b){b=a(b);na=!0;b.off("DOMNodeInserted");Aa(b);b.on("DOMNodeInserted",
function(c){ja(a(c.target));v(b)})}function Aa(a){try{if(a=a.get(0)){var b=a.querySelectorAll(".proctorio-embed");if(b.length)for(var d=0;d<b.length;d++)0>=b[d].offsetLeft&&(b[d].style.display="none");var e=a.querySelectorAll("iframe.d2l-iframe-fullscreen");if(e.length)for(d=0;d<e.length;d++)0>=e[d].offsetLeft&&(e[d].style.display="block");var f=a.querySelectorAll('form[action*="quiz_summary.d2l"]');if(f.length)for(d=0;d<f.length;d++)0>=f[d].offsetLeft&&(f[d].style.display="block");var g=a.querySelectorAll("#d_content_inner .d2l-button");
if(g.length)for(d=0;d<g.length;d++)0>=g[d].offsetLeft&&!g[d].classList.contains("d2l-button-group-no-keep")&&(g[d].style.display="inline-block");var h=a.querySelectorAll('form[action*="quiz_newedit"]');if(h&&h.length)for(d=0;d<h.length;d++)0>=h[d].offsetLeft&&(h[d].style.display="block");var k=a.querySelectorAll('form[action*="special_access.d2l"]');if(k&&k.length)for(d=0;d<k.length;d++)0>=k[d].offsetLeft&&(k[d].style.display="block");a.body&&(a.body.style.cursor="default")}}catch(y){}}var J="",G=
"",Y="",u=[],za="",g=function(){},na=!1,Z=0,W=!1,ca=function(){};a(".proctorio-embed, #proctorio-embed").hide();a(".proctorio-oembed, #proctorio-oembed").show();var va=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}l(a,null,[{key:"serializeObjectToQueryString",value:function(a){if("object"!==k(a))throw new TypeError;try{var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&("object"===k(a[c])&&(a[c]=JSON.stringify(a[c])),b.push(encodeURIComponent(c)+
"="+encodeURIComponent(a[c])));return a=b.join("&")}catch(m){throw Error(m);}}},{key:"formToJSON",value:function(a){return[].reduce.call(a,function(a,b){b.name.length&&(a[b.name]=b.value);return a},{})}},{key:"fetch",value:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,f=3<arguments.length&&void 0!==
arguments[3]?arguments[3]:null,g=4<arguments.length&&void 0!==arguments[4]?arguments[4]:3E4,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:3;if("string"!==typeof b||!b.length)throw new TypeError;if("string"!==typeof c||!c.length)throw new TypeError;var l=new AbortController,y={};y.method=c;y.headers=e?e:{};"POST"===c&&f&&"object"===k(f)&&(c=a.serializeObjectToQueryString(f),y.body=c,y.headers["Content-type"]="application/x-www-form-urlencoded");return new Promise(function(a,c){(function Ja(b,
d,e){d.signal=l.signal;var f=setTimeout(function(){l.abort()},g);fetch(b,d).then(function(b){if(200==b.status)b.text().then(function(b){try{var c=JSON.parse(b)}catch(z){c=b}return a(c)})["catch"](function(a){throw Error(a);});else switch(b.status){case 404:return c(404);case 403:return c(403);case 400:return c(400);case 0:throw Error("timeout");default:if(b.statusText){var d=b.statusText.toLowerCase();if(-1<d.indexOf("abort")||-1<d.indexOf("cancelled"))throw Error("cancelled");throw Error(b.status);
}}})["catch"](function(a){return 2>e?"AbortError"===a.name?c("timeout"):c(a):Ja(b,d,--e)})["finally"](function(){clearTimeout(f)})})(b,y,h)})})},{key:"getHtmlFromUrl",value:function(a){if("string"!==typeof a||!a.length)throw new TypeError;var b=new DOMParser;return this.fetch(a).then(function(a){return b.parseFromString(a,"text/html")})["catch"](function(a){throw Error(a);})}},{key:"getJsonFromUrl",value:function(a){if("string"!==typeof a||!a.length)throw new TypeError;return this.fetch(a)["catch"](function(a){throw Error(a);
})}}]);return a}(),Ba=function(a,c,d,e,m){-1==document.URL.indexOf("proctorio_id")&&(history.pushState({proctorio:0},"D2L Quiz Management",g.d4c02(document.URL,["proctorio_id","proctorio_title","proctorio_gb","proctorio_acl"])),history.replaceState({proctorio:a},"Proctorio Gradebook/ACL",g.elbow.a9c59(document.URL,[["proctorio_id",a],["proctorio_title",c],[d?"proctorio_acl":"proctorio_gb",1]])));f.addEventListener("popstate",function(a){null==a.state||null!=a.state.proctorio&&0==a.state.proctorio?
(m(),(a=document.getElementsByClassName("introjs-overlay"))&&a.length&&document.getElementsByClassName("introjs-overlay")[0].click(),(a=document.getElementById("pio_d2l_ddial_override"))&&a.remove()):null!=a.state&&null!=a.state.proctorio&&a.state.proctorio&&e()})},Ca=function(b,c,d,e,f){if(0!=c){xa();var m="";if(0==e)m="A700";else if(1==e)m="A555";else return;a("head").append('<link href="'+chrome.extension.getURL("webassets/q76s.css")+'" rel="stylesheet" />');a.get(chrome.extension.getURL("webassets/q76s.html"),
function(c){a("#proctorio_wait").remove();b.next(".pio_d2l_wrapper").remove();b.hide().after(mus.th(c,{A700:chrome.i18n.getMessage(m)})+'<div class="pio_d2l_wrapper" data-pio-type='+e+'><h2 class="d2lpio_title" style="display:none">'+d+'</h2><div class="pio_d2lgb_after"></div></div>');f()})}},ia=function(a,c,d){Ca(a,c,d,0,function(){var a=setInterval(function(){sessionStorage.d2l_pio_dialog_settings&&(clearInterval(a),T(),Ba(c,d,0,function(){T();ca.abc()},P),"function"!=typeof d80dd?chrome.runtime.sendMessage([44],
function(a){chrome.runtime.lastError&&f.top.location.reload(!0);var b=setInterval(function(){"function"==typeof d80dd&&(clearInterval(b),ca=new d80dd(document,c,J,G,"d2",[function(a){U(M,N,a)},M,N],g))},100)}):ca=new d80dd(document,c,J,G,"d2",[function(a){U(M,N,a)},M,N],g))},100)})},ba=function(b,c,d){Ca(b,c,d,1,function(){g.d060f(c,function(b){b[0]?U(M,N,function(e){if(e&&e.length){var m=[],h=function(){},k=function(a,e){var m=function(){f.top.removeEventListener("f6f6",m);h=new f6f6(document,"d2",
c,b,a,g,G+"/d2l/lms/quizzing/admin/modify/quiz_newedit_properties.d2l?qi="+c+"&ou="+J,"","",function(a,b,c,e,f,h,m,g){g(!0,d,"")},'input[name="name"]','.dba_b .vui-button-primary, button[is="d2l-button"][primary], button[primary]',function(a,b,c,d){ha(a,"descriptionMessage$html",b,c,d)},function(a,b,c,d){la(a,b,c,d,"descriptionMessage$html")},"/quizzes_manage.d2l",["proctorio_id","proctorio_title","proctorio_acl"]);e()};"function"!=typeof h.acl_display?(f.top.addEventListener("f6f6",m),chrome.runtime.sendMessage([75],
function(a){chrome.runtime.lastError&&f.top.location.reload(!0)})):m()},l=function(){for(var a=0;a<e.length;a++)m.push([e[a][0],e[a][2],e[a][3]])};(function(a){g.daa8(c,function(b){a(b[0])})})(function(b){k(b,function(){l();h.build_table(a(".pio_d2lgb_after")[0],m,function(){var b=document.getElementById("proctorio_wait");b&&b.parentNode.removeChild(b);document.body.style.cursor="default";a(".d2lpio_title").css({"font-family":"Open Sans",color:"#444444","font-size":"24px",margin:"15px 0 35px"}).show();
a(".pio_d2l_wrapper").addClass("d2l-max-width").addClass("pio-d2l-max-width");a(".pio_d2l_wrapper").css("width",a("#d2l_navbar").find(".d2l-navbar-container").width());T();Ba(c,d,1,T,P)})})})}else g.elbow.b33q(document,0,"A518"),g.elbow.c79d(document,!0)}):v()})})},La=function(b,c){var d=b.split("viewContent/")[1].split("/View")[0];chrome.runtime.sendMessage([17,"cid_"+d+G],function(e){chrome.runtime.lastError&&f.top.location.reload(!0);e?c(e):a.ajax({url:b,dataType:"HTML"}).done(function(b){b=a(b).find('a[href*="/d2l/lms/quizzing/admin/modify/quiz_newedit_activities.d2l"]').attr("href");
""!=b&&-1<b.indexOf("?")?(b=qp(b.split("?")[1]).qi,"undefined"!=typeof b&&(chrome.runtime.sendMessage([16,"cid_"+d+G,b,43829]),c(b))):c(0)}).fail(function(a,b,d){c(0)})})},X=function(b,c,d,e){var m=b.find(".d2l-editable-target-htmleditor").hide();if(m.length){var k="",h=[],l=[],y=!1,r=0,u=function(){var b=[0,0];r=m.find(".d2l-htmleditor").length;if(!r)m.on("DOMNodeInserted",function(c){!b[0]&&-1<c.target.className.indexOf("d2l-htmleditor-texteditor")?(k=a(c.target).find("textarea").attr("id"),b[0]=
1,b[1]=1,h=m.find(".d2l-htmleditor-footer").find("a.vui-button-primary")):!b[0]&&-1<c.target.className.indexOf("d2l-htmleditor")?(b[0]=1,h=m.find(".d2l-htmleditor-footer").find("a.vui-button-primary")):!b[1]&&-1<c.target.id.indexOf("$html_parent")&&(b[1]=1,k=c.target.id.replace("_parent",""));!r&&b[0]&&b[1]&&(r=1,b[0]=0,b[1]=0,m.off("DOMNodeInserted"))});m.hide();v()},v=function(){var a=setInterval(function(){r&&(clearInterval(a),ha(document,k,!0,0,function(a){y=a[0];l.length||(l=h.clone(),l.attr("id",
"").on("click",function(a){l.hide();a.stopPropagation();a.preventDefault();c||La(d,function(a){c=a;if(!c)return g.elbow.b33q(document,0,"A518"),!1});var b=setInterval(function(){if(c){clearInterval(b);var a=function(b){f.top.removeEventListener("d2_script_inject",a);var c=document.getElementById(k);c&&(c.value=b.detail);h.get(0).click();l.show()};f.top.addEventListener("d2_script_inject",a);la(document,c,y,"",k)}},100)}).insertAfter(h.hide()));m.show()}))},100)};if(e)b.on("click",function(a){-1<a.target.className.indexOf("d2l-offscreen")&&
u()});u()}},ya=function(b){b.on("input",function(){for(var b=0,d=u.length;b<d;b++)if(-1!=this.value.indexOf(u[b]))return!0;this.value=a.trim(this.value)+" "+u[0];a(".proctorio_tool_tip").remove();a("head").find('link[href*="webassets/q96s.css"]').length||a("head").append('<link href="'+chrome.extension.getURL("webassets/q96s.css")+'" rel="stylesheet" />');ua([0,1],[[this,chrome.i18n.getMessage("A876")]])})},ta=function(){var a=function(a){a=document.getElementsByClassName(a);for(var b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b])};
a("proctorio_tool_tip");a("proctorio_canvas_danger")},ua=function(b,c){ta();if(b&&b.length&&(b[0]||b[1])&&c&&c.length){var d=c.length;if(b[0]){for(var e="",g=0;g<d;g++)e+=(0==g?'<div class="proctorio_canvas_danger" style="margin-top:10px"><strong>':'<div class="proctorio_canvas_danger"><strong>')+chrome.i18n.getMessage("A042")+": </strong>"+c[g][1]+"</div>";a(".d_tabs_container").prepend(e)}if(b[1])for("undefined"==typeof a("body").data("pio-error")&&(a("body").data("pio-error",1),a("body").on("mouseenter",
".proctorio_tool_tip",function(){var b=a(this);setTimeout(function(){b.is(":hover")&&b.fadeOut(500)},250)})),g=0;g<d;g++)if(c[g][0]instanceof HTMLElement){b=c[g][0].getBoundingClientRect();e=document.createElement("div");e.className="proctorio_tool_tip";e.style.left=b.left-Z/4+"px";e.style.opacity=Z?1:0;var k=document.createElement("p");k.className="tool_tip_percent";k.innerHTML=c[g][1];e.appendChild(k);document.body.appendChild(e);e.style.top=f.pageYOffset+b.top-b.height/2-e.offsetHeight+"px";Z||
(Z=e.getBoundingClientRect().width,e.style.left=b.left-Z/4+"px",e.style.opacity=1)}}},xa=function(){try{var a=document.getElementsByClassName("d2l-page-bg");if(a.length&&a[0].childElementCount){var c=document.getElementsByClassName("d2l-background-left");if(c.length&&c[0].childElementCount){var d=f.getComputedStyle(c[0].firstChild);d&&"object"==typeof d&&d["background-color"]&&(a[0].firstChild.style.background=d["background-color"])}}}catch(e){}},oa=function(a,c,d){c=a.getElementsByName(c);if(c.length)return c[0];
a=a.getElementsByClassName(d);if(a.length)for(a=a[0].getElementsByTagName("input"),d=0;d<a.length;d++)if("checkbox"==a[d].type)return a[d];return null},pa=function(a,c,d){if(a.getElementsByName(c+"$year").length)return c;a=a.getElementsByClassName(d);if(a.length)for(a=a[0].getElementsByTagName("input"),c=0;c<a.length;c++)if(a[c].name.endsWith("$year"))return a[c].name.replace("$year","");return null},qa=function(a,c){if(!c)return null;var b=a.getElementsByName(c+"$year"),e=a.getElementsByName(c+"$month"),
f=a.getElementsByName(c+"$day"),g=a.getElementsByName(c+"$time$hour");a=a.getElementsByName(c+"$time$minute");return b.length&&e.length&&f.length&&g.length&&a.length?new Date(parseInt(b[0].value),parseInt(e[0].value)-1,parseInt(f[0].value),parseInt(g[0].value),parseInt(a[0].value)):null},P=function(){},T=function(){},Ka=function(b){return 3!=b.nodeType&&"undefined"==typeof b.tagName||a(b).hasClass("proctorio-embed")||a(b).hasClass("p_io")||a(b).hasClass("proctorioexam")||a(b).hasClass("proctoriocourse")||
a(b).attr("src")&&-1<a(b).attr("src").indexOf(".vo.msecnd.net")&&-1<a(b).attr("src").indexOf("lti")||a(b).hasClass("proctoriocontrol")},U=function(b,c,d){Da(G,J).then(function(a){return d(a)})["catch"](function(e){var f=0,k=[];e=G+"/d2l/lms/classlist/classlist.d2l?ou="+J;var h=[],l=-1,r=-1,u=function(a,b,c){c=c||"";-1!=b&&(a=g.elbow.pioQuery.closest(a,"tr"))&&(a=a.childNodes,a.length>b&&a[b]&&(c=a[b].textContent));return c},v=function(a,b){a=a.getElementsByTagName("table");for(var c=0;c<a.length;c++){var d=
a[c].getElementsByTagName("th");if(d.length)for(var e=0,f=d.length;e<f;e++){var h=d[e].getElementsByTagName("button");if(h.length)for(var g=0,k=h.length;g<k;g++){var m=h[g].getAttribute("onclick");m||(m=h[g].parentNode.getAttribute("onclick"));if(m){if(-1<m.indexOf(".Sort('"+b+"'"))return e}else if(h[g].innerText=h[g].innerText.toLowerCase().replace(/\s/g,""),-1<b.toLowerCase().indexOf(h[g].innerText))return e}else{h=d[e].getElementsByTagName("a");g=0;for(k=h.length;g<k;g++)if(h[g].href&&-1<h[g].href.indexOf(".Sort('"+
b+"'"))return e;k=d[e].getElementsByTagName("d2l-table-col-sort-button");for(g=0;g<k.length;g++)if(k[g].dataset.d2lTableSortField==b)return e}}}return-1},A=function(b){var c=b[0].getElementsByName("gridUsers_cb");if(c.length){r=v(b[0],"FirstName");b=0;for(var d=c.length;b<d;b++){var e=c[b].value;e&&"function"==typeof e.indexOf&&-1!=e.indexOf("_")&&(e=e.split("_")[1],h.push([e,a(c[b]).closest("tr").find('img[src*="viewprofileimage.d2l"]'),u(c[b],r,chrome.i18n.getMessage("B458")),u(c[b],l,"")]))}}else b.find('a[onclick^="EmailUser("]').each(function(){var b=
a(this).attr("onclick");if(!b||"function"!=typeof b.indexOf||-1==b.indexOf("(")||-1==b.indexOf(")"))return!0;b=b.substring(b.indexOf("(")+1,b.indexOf(")"));h.push([b,a(this).closest("tr").find('img[src*="viewprofileimage.d2l"]'),a(this).text(),u(this,l)])})},B=Date.now();a("<iframe />",{style:"position:absolute;left:-1000px;top:0px;display:none;",src:e,"class":"proctorio_iframe"}).appendTo(document.body).load(function(){var e=this.contentWindow||this.contentDocument.parentWindow;if(e&&e.document&&
e.document.URL){e=a(e.document);var g=e.find('select[name="gridUsers_sl_pg2"]').find("option:selected").index();f++;var m=Date.now()-B;chrome.runtime.sendMessage([3,["_trackEvent","EHIS",G+"_"+f+"_"+cjs.mi6(J).toString(),m.toString()]]);B=Date.now();1==f?(l=v(e[0],"OrgDefinedId"),b(e,"Users",'input[name="gridUsers_cb"]',g,A,c,k,function(){d(h)})):c(e,"Users",k,g,A,function(){d(h)})}else d(h)})})},M=function(a,c,d,e,k,l,h,r){try{var b=a.find('select[name="grid'+c+'_sl_pgS2"]'),m=parseInt(b.find(":selected").val()),
q=a.find(d).length;if(q)if(0<e||m<=q)if(m==b.find("option").last().val())l(a,c,h,e,k,r);else{var u=setTimeout(function(){l(a,c,h,e,k,r)},6E4),v=function(b){b&&b.hasOwnProperty("detail")&&!isNaN(b.detail)&&(clearTimeout(u),f.top.removeEventListener("30d5ce",v),b.detail||l(a,c,h,e,k,r))};f.top.addEventListener("30d5ce",v);g.d751(a[0],a1fcf(c,b.find("option").last().val()))}else k(a),r();else r()}catch(n){}},N=function(a,c,d,e,f,g){f(a);d.length||a.find('select[name="grid'+c+'_sl_pg2"]').find("option").each(function(a){d[a]=
0});d[e]=1;(function(a,b,c){if(c.length){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<c.length;f++)c[f]||(f<e&&(e=f),f>d&&(d=f));d!=-Number.MAX_VALUE||e!=Number.MAX_VALUE?(c=b-e,b=d-b,b=0>b?-1:0>c?1:c<b?-1:c>b?1:-1,a=a.find("a").find(1==b?'img[src*="actNextPage.gif"]':'img[src*="actPreviousPage.gif"]'),a.length?a.get(0).click():g()):g()}else g()})(a,e,d)},Ma=function(){for(var a=document.getElementsByTagName("frame"),c=0;c<a.length;c++)a[c]&&a[c].contentDocument&&a[c].contentDocument.body&&
""==a[c].contentDocument.body.innerHTML&&a[c].remove();a=f.top.document.getElementsByTagName("frame");for(c=0;c<a.length;c++)a[c]&&a[c].contentDocument&&a[c].contentDocument.body&&""==a[c].contentDocument.body.innerHTML&&a[c].remove()},Na=setInterval(function(){document&&document.body&&(clearInterval(Na),setInterval(Ma,1E3),ka(document),chrome.runtime.sendMessage([11],function(a){chrome.runtime.lastError&&f.top.location.reload(!0);J=a[0];G=f.location.protocol+"//"+a[3]+a[4];g=new afd982(document,
J,"d2",G,function(){g.e877(function(a){U(M,N,a)});K()});chrome.runtime.sendMessage([9],function(a){})}))},500)})($,window);
