/*
COPYRIGHT (C) 2013-2020 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,m,p){a instanceof String&&(a=String(a));for(var r=a.length,t=0;t<r;t++){var n=a[t];if(m.call(p,n,t,a))return{i:t,v:n}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,m,p){a!=Array.prototype&&a!=Object.prototype&&(a[m]=p.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,m,p,r){if(m){p=$jscomp.global;a=a.split(".");for(r=0;r<a.length-1;r++){var t=a[r];t in p||(p[t]={});p=p[t]}a=a[a.length-1];r=p[a];m=m(r);m!=r&&null!=m&&$jscomp.defineProperty(p,a,{configurable:!0,writable:!0,value:m})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,p){return $jscomp.findInternal(this,a,p).v}},"es6","es3");
(function(a,m){function p(){if(!document.body.getAttribute("data-p")&&(document.body.setAttribute("data-p",1),localStorage.removeItem("p_unsaved"),chrome.runtime.sendMessage([4,chrome.i18n.getMessage("B406")],function(){}),r(),!X())){if(-1<document.URL.indexOf("/mod/quiz/report.php")&&("undefined"!=typeof localStorage.pio_mo_gb||-1<document.URL.indexOf("proctorio=")))t(),localStorage.removeItem("pio_mo_gb"),Y();else if(-1<document.URL.indexOf("/mod/quiz/overrides.php")&&-1<document.URL.indexOf("mode=user")&&
("undefined"!=typeof localStorage.pio_mo_ov||-1<document.URL.indexOf("proctorio=")))t(),localStorage.removeItem("pio_mo_ov"),Z();else if(-1<document.URL.indexOf("/course/modedit.php")&&-1<document.URL.indexOf("add=quiz"))aa();else if(-1<document.URL.indexOf("/mod/quiz/view.php")&&-1<document.URL.indexOf("id="))ba();else if(-1<document.URL.indexOf("/course/modedit.php")&&-1<document.URL.indexOf("update="))ca();else if(-1<document.URL.indexOf("/course/modedit.php"))localStorage.removeItem("pio_exam_settings");
else if(-1<document.URL.indexOf("/course/view.php"))da();else if(-1<document.URL.indexOf("/mod/quiz/overrideedit.php"))ea();else if(-1<document.URL.indexOf("/mod/quiz/overrides.php")&&-1<document.URL.indexOf("mode=user"))fa();else if(-1<document.URL.indexOf("/mod/quiz/startattempt.php"))ha();else if(-1<document.URL.indexOf("/mod/quiz/report.php"))H(0,"id");else if(-1<document.URL.indexOf("/mod/quiz/edit.php")||-1<document.URL.indexOf("/question/"))H(0,"cmid");else if(-1<document.URL.indexOf("/admin/roles/")||
-1<document.URL.indexOf("filter/manage.php")||-1<document.URL.indexOf("/backup/backup.php")||-1<document.URL.indexOf("/backup/restorefile.php"))H(B());else if(-1<document.URL.indexOf("/mod/quiz/attempt.php"))chrome.runtime.sendMessage([1001],function(a){chrome.runtime.lastError||console.log("Succesfull")});else if(-1<document.URL.indexOf("/mod/quiz/summary.php")){var b=document.getElementsByTagName("form");if(b.length)for(var d=0;d<b.length;d++)if(-1<b[d].action.indexOf("processattempt.php")){var c=
b[d].querySelector("button");"submit"==c.type&&c.addEventListener("click",function(){chrome.runtime.sendMessage([1002])})}}else n();chrome.runtime.sendMessage([5,[a("h1").text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," "),a("h2").first().text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," ")]],function(a){chrome.runtime.lastError&&location.reload(!0)})}}function r(){for(var b=-1==document.location.href.indexOf("&notifyeditingon=1")&&
(!a('input[name="edit"]').length||"on"==a('input[name="edit"]').val())&&-1==document.location.href.indexOf("/grade/")&&-1==document.location.href.indexOf("/report/")&&-1==document.location.href.indexOf("/lti/view.php"),d=document.getElementsByClassName("dropdown-item"),c=0;c<d.length&&0!=b;c++)for(var e=Array.prototype.slice.call(d[c].getElementsByTagName("a"));e.length;)if(-1<e.pop().href.indexOf("&edit=off")){b=!1;break}d=function(a){for(var b=document.querySelectorAll("li.modtype_lti"),h=0,d=b.length;h<
d;h++)if(a||-1==b[h].textContent.indexOf("Secure Exam Proctor"))b[h].style.display="list-item"};if(b){var h=function(a){if(-1!=a.textContent.indexOf("Secure Exam Proctor"))if("A"==a.tagName)a.style.display="none",k(a);else{a=a.getElementsByTagName("a");for(var b=0,h=a.length;b<h;b++)-1!=a[b].textContent.indexOf("Secure Exam Proctor")&&(a[b].style.display="none",k(a[b]))}},k=function(a){if(a=f.elbow.pioQuery.closest(a,"li.modtype_lti"))a.style.display="none"},g=new MutationObserver(function(a){if(I)g.disconnect();
else for(var b=0,d=a.length;b<d;b++)if("object"!=!typeof a[b].addedNodes&&a[b].addedNodes.length)for(var c=0,e=a[b].addedNodes.length;c<e;c++)h(a[b].addedNodes[c])});try{g.observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),h(document)}catch(u){}d()}else d(!0)}function t(){try{var a=document.getElementById("action-menu-2-menu")||document.getElementById("action-menu-3-menu")||document.getElementById("settingsnav")||document.getElementById("action-menu-5-menu");if(a){var d=
a.getElementsByTagName("A");if(d.length){for(var c=a=null,e=function(a,b,h){var d=a.cloneNode(!0),c=d.getElementsByTagName("A");if(c&&c.length){c=c[0];c.href=f.elbow.a9c59(c.href,[["proctorio",1]]);for(var g=c.childNodes,e=0;e<g.length;e++)3==g[e].nodeType&&(g[e].textContent=b);e=c.parentNode;if(-1<e.className.indexOf("active_tree_node")&&("undefined"!=typeof localStorage[h]||-1<document.URL.indexOf("proctorio="))){if(e.className+=" active_tree_node",(b=a.getElementsByTagName("P"))&&b.length)for(e=
0;e<b.length;e++)b[e].className=b[e].className.replace("active_tree_node","")}else e.className=e.className.replace("active_tree_node","");f.elbow.pioQuery.insertAfter(d,a);d.addEventListener("click",function(){localStorage[h]=1})}},h=0;h<d.length;h++){var k=d[h].href;-1<k.indexOf("/mod/quiz/report.php")&&-1<k.indexOf("mode=overview")&&d[h].parentNode&&(-1<d[h].parentNode.className.indexOf("leaf")||-1<d[h].parentNode.className.indexOf("dropdown-item"))?a=f.elbow.pioQuery.closest(d[h],-1<d[h].parentNode.className.indexOf("dropdown-item")?
"div":"li"):-1<k.indexOf("/overrides.php")&&-1<k.indexOf("mode=user")&&(c=f.elbow.pioQuery.closest(d[h],-1<d[h].parentNode.className.indexOf("dropdown-item")?"div":"li"))}a&&e(a,"Proctorio","pio_mo_gb");c&&e(c,chrome.i18n.getMessage("A998"),"pio_mo_ov")}}}catch(g){}}function n(){a("form[id*='mform1']").show();a("#intro").show();a("body div.quizinfo").show();a("body div.quizattempt").show();a('#page-mod-quiz-report div[role="main"]').css("opacity",1);a("#page-mod-quiz-mod #fitem_id_introeditor").show();
a("body #quizoverrides .generaltable").show()}function X(){return f.e480b(a('div[role="main"]'),!0,"#id_quizpassword","",w,"#id_name","#id_submitbutton",E,A,function(){m.location.reload(!0)},function(){})}function Y(){I=!0;chrome.runtime.sendMessage([4,chrome.i18n.getMessage("B405")],function(){});var a=F("id");a||(a=B());a&&ia(function(){"function"!=typeof d80dd?chrome.runtime.sendMessage([44],function(b){chrome.runtime.lastError&&m.top.location.reload(!0);var c=setInterval(function(){"function"==
typeof d80dd&&(clearInterval(c),d80dd(document,a,C,G,"mo",[],f))},100)}):d80dd(document,a,C,G,"mo",[],f)})}function ca(){I=!0;localStorage.removeItem("pio_exam_settings");if(a("form[id*='mform1']").find('input[name="modulename"][value="quiz"]').length){f.fd4dq(a("form[id*='mform1']"));a("#fitem_id_introeditor").hide();a("#fgroup_id_buttonar").hide();var b=F("update");b||(b=B());b&&(f.ac5f(b,a("#id_name"),a("#id_introeditor"),E,N,ja,a("#id_quizpassword"),a("form[id*='mform1']"),w,A,a("#id_submitbutton"),
O,P,Q,n,[t]),a("#fitem_id_introeditor").show())}else n()}function aa(){I=!0;a("#fitem_id_introeditor").show();localStorage.removeItem("pio_exam_settings");a("#id_submitbutton2").remove();f.fd4dq(a("form[id*='mform1']"));f.e2304(function(b){-1==b?(f.elbow.b33q(document,0,"A092"),document.body.style.cursor="default",n()):(f.cc1a50(0,[0,0],!0,!1,a("#id_quizpassword"),a("form[id*='mform1']"),a("#id_name"),A,a("#id_submitbutton"),O,P,Q,w,n),f.aa42([0,0]))})}function ba(){a(".proctorio-embed, #proctorio-embed").hide();
a(".proctorio-oembed, #proctorio-oembed").show();a("#intro").show();a(".quizinfo").hide();var b=F("id");b||(b=B());if(b){var d=[],c=function(){a("#proctorio_wait").remove();a('div[role="main"]').show();R(b,[1,0]);n()},e=function(){document.body.style.cursor="default";a("#proctorio_wait").remove();a('div[role="main"]').show();n()},h=function(b){if(2==d.length)b(!0,!0);else{for(var h=!1,c=document.getElementsByTagName("h2"),e=0,g=c.length;e<g&&!h;e++)for(var f=c[e].textContent,k=0,m=D.length;k<m;k++)if(-1!=
f.indexOf(D[k])){h=!0;break}c=a(".proctorio-script").length||a(".proctorio-noscript").length||-1<a("#intro").text().indexOf("//az545770.vo.msecnd.net/snippets/")||a(".proctorio-embed").length||a("#proctorio-embed").length;b(h,c)}},k=function(){var h=function(h){f.aa42(h);h[0]?R(b,h):f.adcf8(document,b,c,e,a('div[role="main"]'))};2==d.length?h(d):(document.body.style.cursor="wait",f.d060f(b,h))};(function(h){var c=localStorage.pio_exam_settings;if("undefined"==typeof c)h();else{localStorage.removeItem("pio_exam_settings");
c=JSON.parse(c);for(var e=c[2].trim(),g=document.getElementsByTagName("h2"),z=0,k=g.length;z<k;z++)if(g[z].textContent.trim()==e){d=[1,0];break}f.elbow.ec975(document,chrome.extension.getURL("webassets/q76s.css"));f.elbow.d84a9(["GET",chrome.extension.getURL("webassets/q76s.html")],function(e){a('div[role="main"]').hide().after(mus.th(e.responseText,{A700:chrome.i18n.getMessage("B111")}));a("#proctorio_wait").css("padding","50px 0");if(2!=d.length)f.elbow.b33q(document,0,"A463",[],203797738),f.elbow.c79d(document,
!1,!0,chrome.i18n.getMessage("A875")),document.body.style.cursor="default";else{document.body.style.cursor="wait";var g=Date.now();f.bfc507(b,c[1],c[0],c[3],f.elbow.c0c2e7(c[1])?0:1,c[4],c[5],function(c){c?f.ae860(b,document.URL.split("/mod/")[0]+"/course/modedit.php?update="+b+"&return=1",!0,!1,-1,"#id_quizpassword","",w,"#id_name","#id_submitbutton",E,A,"/quiz/view.php",[],function(){var b=3E3-(Date.now()-g);setTimeout(function(){document.body.style.cursor="default";f.elbow.c79d(document,!0);a('div[role="main"]').show();
h()},Math.max(0,b))}):(f.elbow.b33q(document,0,"A518"),f.elbow.c79d(document,!1,!0,chrome.i18n.getMessage("A875")),document.body.style.cursor="default")},!0)}})}})(function(){J(function(){h(function(h,d){h&&d?k():h||d?f.cc033bc(document,b,a('div[role="main"]'),document.URL.split("/mod/")[0]+"/course/modedit.php?update="+b+"&return=1",h,"#id_quizpassword","",w,"#id_name","#id_submitbutton",E,A,"/quiz/view.php",!1,c,e):n()})})})}else n()}function da(){function b(b,c){a(b).siblings().show().find("span.instancename").show();
a(b).remove();c.find("span.editinstructions").remove()}a(".proctorio-oembed, #proctorio-oembed").show();a(".proctorio-embed, #proctorio-embed").hide();a("ul.section li.quiz").on("click",".editing_delete",function(){var b=qp(a(this).attr("href").split("?")[1]);if(b["delete"])a(this).closest("ul.section").on("DOMNodeRemoved",function(c){"LI"==c.target.tagName&&a(c.target).hasClass("quiz")&&(c=a(c.target).find("div.activityinstance a").attr("href"),-1<c.indexOf("?")&&(c=qp(c.split("?")[1]),"undefined"!=
typeof c.id&&c.id==b["delete"]&&(a(this).off("DOMNodeRemoved"),f.bce0(b["delete"],function(a){},!0))))})});a("ul.section li.quiz").on("click",".editing_duplicate",function(){var b=qp(a(this).attr("href").split("?")[1]);if(b.duplicate)a(this).closest("ul.section").on("DOMNodeInserted",function(c){"LI"==c.target.tagName&&a(c.target).hasClass("quiz")&&(c=a(c.target).find("div.activityinstance a").attr("href"),-1<c.indexOf("?")&&(c=qp(c.split("?")[1]),"undefined"!=typeof c.id&&(a(this).off("DOMNodeInserted"),
f.dd318(C,b.duplicate,c.id,!1,function(a){},!0))))})});a("ul.section li.quiz").on("click","a.editing_title",function(){var d=a(this).closest("li.quiz"),c="";d.find("span.instancename").contents().each(function(){3==this.nodeType&&(c+=this.textContent)});if(-1!=c.indexOf(chrome.i18n.getMessage("A896"))){d.find("span.instancename").hide();var e=qp(a(this).attr("href").split("?")[1]),h=setInterval(function(){if(d.find("form").length){clearInterval(h);var k=d.find("form input")[0].outerHTML,g=d.find("form").parent().parent(),
u=d.find("span.editinstructions")[0].outerHTML;try{g.find("form").remove()}catch(l){}J(function(){var h=f.elbow.f016(c,D);h[0].length||(h[0]=[D[0]]);d.find("a.editing_title").parent().hide();g.find("div.activityinstance").append(k);g.prepend(u);a(g).find("input").val(h[1]).focus().on({blur:function(){b(this,d)},keyup:function(c){if(13==c.keyCode){if(h[1]!=a(this).val()){var g=this;c=a.ajax({url:G+"/course/rest.php",type:"POST",data:{"class":"resource",field:"updatetitle",title:a(this).val()+" "+h[0][0],
id:e.update,sesskey:e.sesskey,courseId:C}});c.done(function(a){""!=a&&"undefined"!=typeof a.instancename&&d.find("span.instancename").hide().contents().each(function(){3==this.nodeType&&(this.textContent=a.instancename)});b(g,d)});c.error(function(a,b,h){})}else b(this,d);return!1}if(27==c.keyCode)return b(this,d),!1}}).attr("maxlength",255-h[0][0].length-1)[0].setSelectionRange(0,h[1].length)})}},50)}});a("ul.section").find('li.activity:contains("Secure Exam Proctor")').find("a.editing_hide").hide()}
function ea(){document.body.style.cursor="wait";f.fd4dq(a("form[id*='mform1']"));var b=a("#id_submitbutton, #id_againbutton").each(function(){this.disabled=!0}).hide();a("#fitem_id_password").hide();var d=0;a('input[name="cmid"]').length&&(d=a('input[name="cmid"]').val());d||(d=B());d?f.d060f(d,function(c){c[0]?(a("#fgroup_id_buttonbar").data("buttons-rendered")||(a('<input class="proctorio_control_button" type="button" value="'+a("#id_submitbutton").val()+'" />').on("click",function(){var b=this;
this.disabled=!0;w(document,d,!1,!0,!0,0,0,function(h,c,e,u,l,v){h?f.c48ab(d,function(h){h?(a("#id_password").val(h).attr("type","text"),a('input[type="submit"][value="'+a(b).val()+'"]').prop("disabled",!1),a('input[type="submit"][value="'+a(b).val()+'"]').click()):f.elbow.b33q(document,0,"A474")}):b.disabled=!1})}).insertAfter(a("#id_submitbutton").hide()),a("#fgroup_id_buttonbar").data("buttons-rendered",!0)),a('#id_timelimit_number, input[name="timelimit[number]"]').prop("disabled",!1),a("#id_timelimit_timeunit").prop("disabled",
!1),a("#id_timelimit_enabled").prop("checked",!0).parent("span").hide(),a("#id_timelimit_timeunit").find("option").each(function(){3600<parseInt(a(this).val())&&a(this).hide()}),a("form[id*='mform1']").show(),t()):(n(),a("#fitem_id_password").show(),b.each(function(){this.disabled=!1}).show());document.body.style.cursor="default"}):(n(),document.body.style.cursor="default")}function fa(){document.body.style.cursor="wait";var b=a("#quizoverrides .generaltable").hide(),d=F("cmid");!d&&a('input[name="cmid"]').length&&
(d=a('input[name="cmid"]')[0].value);d||(d=B());d?f.d060f(d,function(c){c[0]?(f.aa8ea(d,function(e){if(e&&(e[0]||e[1].length)){var h;"undefined"==typeof h?chrome.runtime.sendMessage([75],function(a){chrome.runtime.lastError&&m.top.location.reload(!0);var b=setInterval(function(){"function"==typeof f6f6&&(clearInterval(b),h=new f6f6(document,"mo",d,c,f,document.URL.split("/mod/")[0]+"/course/modedit.php?update="+d+"&return=1","#id_quizpassword","",w,"#id_name","#id_submitbutton",E,A,"/quiz/view.php",
["proctorio"]))},100)}):h=new f6f6(document,"mo",d,c,f,document.URL.split("/mod/")[0]+"/course/modedit.php?update="+d+"&return=1","#id_quizpassword","",w,"#id_name","#id_submitbutton",E,A,"/quiz/view.php",["proctorio"]);var k=setInterval(function(){if("undefined"!=typeof h){clearInterval(k);var c=a("form");a.ajax({url:c.attr("action"),data:c.serialize(),type:c.method,dataType:"HTML"}).done(function(c){if(c){var d=[];a(c).find("#id_userid").find("option").length&&a(c).find("#id_userid").find("option").each(function(){var a=
this.textContent;-1<a.indexOf(",")&&(a=a.substring(0,this.textContent.lastIndexOf(",")));d.push([a,this.value,h.hash_id(this.value)])});if(d.length){c=b.length;var g=[];b.find("tbody").find("td.colname").find("a").each(function(){g.push([qp(this.href.split("?")[1]).id,a(this).closest("tr")])});var f=document.URL.split("/mod/")[0]+"/user/view.php?id=",k;b.length||(b=a('<table class="generaltable"><thead><tr><th class="header c0 colname" scope="col">User</th><th class="header c1 colsettings" scope="col" colspan="2">Overrides</th><th class="header c2 lastcol colvalue" scope="col">Action</th></tr></thead><tbody></tbody></table>').prependTo(a("#quizoverrides")));
for(var u=0;u<d.length;u++)if(!h.acl_checked(e,d[u][2])){var m=!1;if(c)for(var n=0;n<g.length;n++)if(g[n][0]==d[u][1]){m=!0;var q=a(g[n][1]);q.hasClass("lastrow")||(q=q.siblings(".lastrow").first());q.removeClass("lastrow").after('<tr class="lastrow"><td class="colname cell c0">'+chrome.i18n.getMessage("A993")+'</td><td class="colsetting cell c1 lastcol">'+chrome.i18n.getMessage("B106")+"</td></tr>");q=parseInt(a(g[n][1]).find("td").first().attr("rowspan"));"undefined"==typeof q||""==q||isNaN(q)||
(a(g[n][1]).find("td").first().attr("rowspan",++q),a(g[n][1]).find("td").last().attr("rowspan",q))}m||b.append('<tr><td class="colname cell c0"><a href="'+f+d[u][1]+'">'+d[u][0]+'</a></td><td class="colsetting cell c1">'+chrome.i18n.getMessage("A993")+'</td><td class="colvalue cell c2">'+chrome.i18n.getMessage("B106")+'</td><td class="colaction cell c3 lastcol"></td></tr>');k++}b.find("tr").each(function(b){a(this).removeClass("r0").removeClass("r1").addClass("r"+b%2)})}}b.show();document.body.style.cursor=
"default"})}},100)}else b.show(),document.body.style.cursor="default"}),t()):(H(d),b.show(),document.body.style.cursor="default")}):n()}function Z(){I=!0;var b=F("cmid");b||(b=B());b||n();document.body.style.cursor="wait";a(".buttons").hide();f.elbow.ec975(document,chrome.extension.getURL("webassets/q76s.css"));S(chrome.i18n.getMessage("A998"),"pio_mo_ov");f.elbow.d84a9(["GET",chrome.extension.getURL("webassets/q76s.html")],function(d){a("#quizoverrides").after(mus.th(d.responseText,{A700:chrome.i18n.getMessage("A555")}));
d=null;f.d060f(b,function(c){if(c[0]){var d=function(){},h=[],k=function(a,h){var e=function(){m.top.removeEventListener("f6f6",e);d=new f6f6(document,"mo",b,c,a,f,document.URL.split("/mod/")[0]+"/course/modedit.php?update="+b+"&return=1","#id_quizpassword","",w,"#id_name","#id_submitbutton",E,A,"/quiz/view.php",["proctorio"]);h()};"function"!=typeof d.acl_display?(m.top.addEventListener("f6f6",e),chrome.runtime.sendMessage([75],function(a){chrome.runtime.lastError&&m.top.location.reload(!0)})):e()},
g=function(a,b){if(a&&a.length){var c=document.createElement("div");c.innerHTML=a;a=[];c=c.querySelectorAll("#id_userid");c.length&&(a=c[0].getElementsByTagName("option"));if(a.length){for(c=0;c<a.length;c++){var d=a[c].textContent,e="";-1<d.indexOf(",")&&(e=d.substring(a[c].textContent.lastIndexOf(",")+1).trim(),d=d.substring(0,a[c].textContent.lastIndexOf(",")).trim());h.push([a[c].value,d,e])}b()}else f.elbow.b33q(m.top.document,0,"A518")}else f.elbow.b33q(m.top.document,0,"A518")},u=function(a){f.daa8(b,
function(b){a(b[0])})};(function(b){var c=a('input[value="adduser"]').closest("form");c&&c.length||(c=a("form"));c=a.ajax({url:c.attr("action"),data:c.serialize(),type:c.method,dataType:"HTML"});c.done(function(a){a?b(a):f.elbow.b33q(m.top.document,0,"A466")});c.fail(function(a,b,c){f.elbow.b33q(m.top.document,0,"A466")})})(function(a){u(function(b){k(b,function(){g(a,function(){d.build_table(document.getElementById("quizoverrides"),h,function(){var a=document.getElementById("proctorio_wait");a&&
a.parentNode.removeChild(a);document.body.style.cursor="default"})})})})})}else f.elbow.b33q(document,0,"A712"),localStorage.removeItem("pio_mo_ov"),setTimeout(function(){m.location=f.d4c02(document.URL,["proctorio"])},2500)})})}function ha(){a("#intro").hide();a(".proctorio-embed, #proctorio-embed").hide();a(".proctorio-oembed, #proctorio-oembed").show();document.body.style.cursor="wait";var b=document.getElementsByTagName("form");if(b.length)for(var d=0;d<b.length;d++)-1<b[d].action.indexOf("startattempt.php")&&
b[d].lastElementChild&&(b[d].lastElementChild.style.display="none");b=function(){n();a("#fgroup_id_buttonar").show();a("#id_passwordheader").show();document.body.style.cursor="default"};d=function(b){a("#intro").after(b);b=document.getElementsByTagName("form");if(b.length)for(var c=0;c<b.length;c++)-1<b[c].action.indexOf("startattempt.php")&&b[c].lastElementChild&&(b[c].lastElementChild.style.display="block");document.body.style.cursor="default"};if(a("#id_passwordheader").hide().length){var c=F("cmid");
if(!c){var e=a('input[name="cmid"]');e.length&&(c=e.first().val())}c||(c=B());c?f.c5fb3(document,c,a("#id_quizpassword"),d,b):b()}else b(),H()}function H(b,d){b||(b=F(d));!b&&a('input[name="'+d+'"]').length&&(b=a('input[name="'+d+'"]')[0].value);b&&f.d060f(b,function(a){a&&(a[0]?t():a[1]||N(b,function(a){a||f.ade5(b)}))});n()}function F(a){if(!a||""==a)return 0;var b=0;if(-1<document.URL.indexOf("?")){var c=qp(document.URL.split("?")[1]);"undefined"!=typeof c[a]&&(b=c[a])}return b}function B(){var b=
0;a("div.breadcrumb ul li a").each(function(){if(-1<this.href.indexOf("/mod/quiz/view.php")&&-1<this.href.indexOf("?")){var a=qp(this.href.split("?")[1]);"undefined"!=typeof a.id&&(b=a.id)}});return b}function Q(a,d,c,e){T();if(document.getElementById("enable_proctorio").checked){var b=document.getElementById("fgroup_id_buttonar");b||(b=document.body);if(!b.getAttribute("data-buttons-rendered")){var k=function(b){b.stopPropagation();b.preventDefault();U(b.target,a,d,c,e)},g=function(a){var b=document.getElementById(a);
if(b){var c=b.cloneNode(!0);c.id="";c.classList.add("proctorio_control_button");c.style.display="inline-block";c.addEventListener("click",k);c.setAttribute("data-moodle-map",a);b.style.display="none";b.style.setProperty&&b.style.setProperty("display","none","important");b.parentNode.insertBefore(c,b);return c}return!1};a&&g("id_submitbutton2");var u=g("id_submitbutton");u&&f.a2d78(function(b){U(u,a,d,c,e,function(a){b(a)})});b.id&&"fgroup_id_buttonar"==b.id&&(document.getElementById("fgroup_id_buttonar").style.display=
"block");b.setAttribute("data-buttons-rendered",1)}document.getElementsByClassName("proctorio_settings")[0].style.display="block";if(b=document.getElementById("menuintroeditorformat"))b.value=1,b.disabled=!0;if(b=document.getElementById("id_timelimit_enabled"))for(b.checked||b.click(),b.style.display="none",b=b.parentNode.childNodes,g=0;g<b.length;g++)"LABEL"==b[g].tagName&&(b[g].style.display="none");if(b=document.getElementById("id_questionsperpage"))b.addEventListener("click",V),"0"!=b.value&&
(b.classList.add("alertAdded"),x(document,b.getAttribute("name"),"number",chrome.i18n.getMessage("Y038"),2));b=function(a){if(a=document.getElementById(a)){var b=a.options;if(b&&b.length){try{for(var c=0;c<b.length;c++){var d=b[c].value;if(isNaN(d))return;3600<d&&(b[c].style.display="none")}}catch(la){}if(d=a.disabled)a.disabled=!1;if(!isNaN(b[a.selectedIndex].value)&&3600<parseInt(b[a.selectedIndex].value))for(c=0;c<b.length;c++)if(!isNaN(b[c].value)&&3600>=b[c].value){a.selectedIndex=c;break}d&&
(a.disabled=!0)}}};b("id_timelimit_timeunit");b("id_graceperiod_timeunit");(b=document.getElementById("fitem_id_quizpassword"))||(b=f.elbow.pioQuery.closest(document.getElementById("id_quizpassword"),".form-group"));if(b)if(g=b.querySelector("[data-fieldtype]")){Array.prototype.slice.call(g.children).forEach(function(a){a.style.display="none"});var l=document.getElementById("id_quizpassword").cloneNode();l.id="pio_id_quizpassword";l.type="password";l.value="            ";l.disabled=!0;g.appendChild(l);
l=document.createElement("p");l.id="passwordAlert";l.innerHTML=chrome.i18n.getMessage("Y049");g.appendChild(l);(b=document.getElementById("id_security"))&&b.classList.remove("collapsed")}else b.style.display="none";if(b=document.getElementById("fitem_id_browsersecurity"))b.style.display="none";if(b=document.getElementById("id_browsersecurity"))b.value="-"}else{document.getElementsByClassName("proctorio_settings")[0].style.display="none";if(b=document.getElementById("menuintroeditorformat"))b.disabled=
!1;if(b=document.getElementById("id_timelimit_enabled"))for(b.style.display="inline-block",b=b.parentNode.childNodes,g=0;g<b.length;g++)"LABEL"==b[g].tagName&&(b[g].style.display="inline");if(b=document.getElementById("id_questionsperpage"))b.removeEventListener("click",V),b.classList.remove("alertAdded"),(b=document.getElementById("id_error_questionsperpage_questionsperpage"))&&b.parentNode.removeChild(b),(b=document.getElementById("id_error_break_"))&&b.parentNode.removeChild(b);(b=document.getElementById("fitem_id_quizpassword"))||
(b=f.elbow.pioQuery.closest(document.getElementById("id_quizpassword"),".form-group"));b&&((g=b.querySelector("[data-fieldtype]"))?(l=document.getElementById("pio_id_quizpassword"),l.parentNode.removeChild(l),(l=document.getElementById("passwordAlert"))&&l.parentNode.removeChild(l),(g=b.querySelector("[data-fieldtype]"))&&Array.prototype.slice.call(g.children).forEach(function(a){a.style.display="block"}),(b=document.getElementById("id_security"))&&b.classList.add("collapsed")):b.style.display="block");
b=function(a){if((a=document.getElementById(a))&&(a=a.options)&&a.length)try{for(var b=0;b<a.length;b++)a[b].style.display="inline-block"}catch(K){}};b("id_timelimit_timeunit");b("id_graceperiod_timeunit");(b=document.getElementById("fitem_id_quizpassword"))&&b.style.removeProperty("display");if(b=document.getElementById("id_quizpassword"))b.value="";if(b=document.getElementById("fitem_id_browsersecurity"))b.style.display=""}}function U(b,d,c,e,h,k){var g=a("#fgroup_id_buttonar").find("input").each(function(){this.disabled=
!0});a(".proctorio_control_button").hide();a("#id_cancel").hide();f.af9813(d,c,e,A,function(){a("#fitem_id_introeditor").hide()},a(document.getElementById(b.getAttribute("data-moodle-map"))),w,h,function(b){if(!b)g.each(function(){this.disabled=!1}),a(".proctorio_control_button").show(),a("#id_cancel").show(),f.a924(),document.body.style.cursor="default";else if(a("#enable_proctorio").prop("checked")){var c=document.getElementById("id_quizpassword");c&&(c.disabled=!1,c.style.display="none",c.setAttribute("type",
"text"),c.value=e.return_password())}"function"==typeof k&&k(b)})}function N(b,d){b=a.ajax({url:G+"/mod/quiz/view.php?id="+b,type:"GET",timeout:3E5});b.done(function(b){d(!a(b).find(".quizattemptcounts").length)});b.fail(function(a,b,h){d(!0)})}function J(a){f.elbow.fa3e1("q68s",L,D,function(b){L=b;M.length||(M='<div class="'+chrome.i18n.getMessage("B018")+' p_io">\r\n\r\n'+chrome.i18n.getMessage("B019")+"  <br />\r\n"+chrome.i18n.getMessage("B020")+" <br/><br/>\r\n\r\n"+chrome.i18n.getMessage("B021")+
"   <br /><br />\r\n\r\n"+chrome.i18n.getMessage("B022")+' <br />\r\nhttp://getproctorio.com\r\n\r\n</div><style class="proctorio-embedstyle">#tinymce div.'+chrome.i18n.getMessage("B018")+"{display:block;} div."+chrome.i18n.getMessage("B018")+"{display:none;} span.proctoriocourse, span.proctorioexam, span.proctoriocontrol {display:none;}</style>");a()})}function E(b,d,c,e){J(function(){var h=a(b).find("#id_introeditor").val(),k=D[0],g=f.elbow.f016(a(b).find("#id_name").val(),D);g.length&&g[0].length&&
(k=g[0][0]);g=a(b).find(".breadcrumb li:nth-last-child(2)").find("a");f.d4abe(b,d,c,b69d82,a(b).find("#id_name"),k,h,g,ka,e)})}function ka(b){return 3!=b.nodeType&&"undefined"==typeof b.tagName||a(b).hasClass("proctorio-embedstyle")||a(b).hasClass("proctorio-embed")||a(b).hasClass("p_io")||a(b).hasClass("proctoriocontrol")||a(b).hasClass("proctorioexam")||a(b).hasClass("proctoriocourse")||a(b).hasClass("proctorio-script")||a(b).hasClass("proctorio-noscript")||-1<a(b).text().indexOf(".vo.msecnd.net/lti/exam")||
-1<a(b).text().indexOf("#tinymce div.")||"proctorio-embed"==a(b).attr("id")}function A(b,d,c,e){J(function(){a(b).find("#id_name").val(e);var h=a(b).find("#id_introeditor").val();localStorage.removeItem("p_unsaved");localStorage.removeItem("mo_script_inject");f.d751(b,a52d029(),"",!1);f.d751(b,b61414(h,L,M,d?f.be24(d):-1,C,c?cjs.mi6(m.crypto.getRandomValues(new Uint32Array(1))[0].toString()).toString():""))})}function w(b,d,c,e,h,k,g,u){if("function"==typeof u){T();var l=[],v=!0,m=new Date(13088232E5),
n=new Date(13088232E5),t=0;k&&!k.validate_settings()&&(v=!1,k.display_invalid(b),l.push("INVALIDPROFSETTINGS"));var p="",r=[],q=-1;d=function(){e||(r=f.elbow.f016(a(b).find("#id_name").val(),D));if(h&&!e){var d=k?f.elbow.f1802(k.return_settings()):chrome.i18n.getMessage("A896");p=r[1]+" "+d;if(!r[1].length||255<p.length)c?p=255<p.length?r.substring(0,255-d.length-2)+" "+d:d:(d=r[1].length?chrome.i18n.getMessage("B105",(255-(d.length+1)).toString()):chrome.i18n.getMessage("A999"),x(b,a(b).find("#id_name").attr("name"),
"",d,++q),v=!1,l.push("TITLE"+r[1].length))}else!e&&(p=r[1],""==p||255<p.length)&&(d=p.length?chrome.i18n.getMessage("B105","255"):chrome.i18n.getMessage("A999"),x(b,a("#id_name").attr("name"),"",d,++q),v=!1,l.push("TITLE"+r[1].length));h&&!e&&(d=a(b).find("#menuintroeditorformat"),d.length&&1!=d.val()&&(c?d.val(1):(x(b,a(b).find("#menuintroeditorformat").attr("name"),"",chrome.i18n.getMessage("A997"),++q),v=!1,l.push("EDITOR"))));a(b).find("#id_timeclose_enabled").prop("checked")&&(m=new Date(a("#id_timeclose_year").val(),
parseInt(a("#id_timeclose_month").val())-1,a("#id_timeclose_day").val(),a("#id_timeclose_hour").val(),a("#id_timeclose_minute").val()));a(b).find("#id_timeopen_enabled").prop("checked")&&(n=new Date(a("#id_timeopen_year").val(),parseInt(a("#id_timeopen_month").val())-1,a("#id_timeopen_day").val(),a("#id_timeopen_hour").val(),a("#id_timeopen_minute").val()));a(b).find("#id_timeopen_enabled").prop("checked")&&a(b).find("#id_timeclose_enabled").prop("checked")&&n>m&&(c?(a(b).find("#id_timeopen_enabled").prop("checked",
!1),a(b).find("#id_timeclose_enabled").prop("checked",!1)):(x(b,a(b).find("#id_timeclose_day").attr("name"),"day",chrome.i18n.getMessage("A996"),++q),v=!1,l.push("OPENCLOSE")));if(h){var g=a(b).find('#id_timelimit_number, input[name="timelimit[number]"]'),z=a(b).find('#id_graceperiod_number, input[name="graceperiod[number]"]');if(g.length){var K=a.trim(g.val()),w=d=0,y=60;""==K||isNaN(K)?c||(x(b,g.attr("name"),"number",chrome.i18n.getMessage("B103"),++q),v=!1,l.push("TIMELIMITBLANK")):(d=parseFloat(K),
0==d?c||(x(b,g.attr("name"),"number",chrome.i18n.getMessage("B102"),++q),v=!1,l.push("TIMELIMITZERO")):0>d&&!c&&(x(b,g.attr("name"),"number",chrome.i18n.getMessage("B104"),++q),v=!1,l.push("TIMELIMITNEGATIVE")));e||"graceperiod"!=a(b).find("#id_overduehandling :selected").val()||((g=a.trim(z.val()),""==g||isNaN(g))?c||(x(b,z.attr("name"),"number",chrome.i18n.getMessage("A907"),++q),v=!1,l.push("GRACENAN")):(w=parseFloat(g),y=a(b).find("#id_graceperiod_timeunit :selected").val(),"undefined"==typeof y||
""==y||isNaN(y)||(y=parseInt(y),!c&&60>=y*w&&(x(b,a(b).find("#id_graceperiod_timeunit").attr("name"),"timeunit",chrome.i18n.getMessage("A905"),++q),v=!1,l.push("GRACELESSTHANONE")))));z=a(b).find("#id_timelimit_timeunit :selected").val();"undefined"==typeof z||""==z||isNaN(z)||(z=parseInt(z),!c&&28800<z*d+y*w&&(g=e||"graceperiod"!=a(b).find("#id_overduehandling :selected").val()?chrome.i18n.getMessage("B098"):chrome.i18n.getMessage("A904"),x(b,a(b).find("#id_timelimit_timeunit").attr("name"),"timeunit",
g,++q),v=!1,l.push("TIMEPLUSGRACETOOLONG")));c||a(b).find("#id_timelimit_enabled").prop("checked")&&("graceperiod"!=a(b).find("#id_overduehandling :selected").val()||a(b).find("#id_graceperiod_enabled").prop("checked"))?c&&(a(b).find("#id_timelimit_enabled").prop("disabled",!1),a(b).find("#id_timelimit_enabled").prop("checked",!0),"graceperiod"==a(b).find("#id_overduehandling :selected").val()&&(a(b).find("#id_graceperiod_enabled").prop("disabled",!1),a(b).find("#id_graceperiod_enabled").prop("checked",
!0)),28800<z*d+y*w||0>=d)&&(a(b).find('#id_timelimit_number, input[name="timelimit[number]"]').prop("disabled",!1).val(3600),a(b).find("#id_timelimit_timeunit").prop("disabled",!1).val(1),"graceperiod"==a(b).find("#id_overduehandling :selected").val()&&(a(b).find('#id_graceperiod_number, input[name="graceperiod[number]"]').prop("disabled",!1).val(60),a(b).find("#id_graceperiod_timeunit").prop("disabled",!1).val(2))):(a(b).find("#id_timelimit_enabled").prop("checked")||x(b,a(b).find("#id_timelimit_timeunit").attr("name"),
"timeunit",chrome.i18n.getMessage("B098"),++q),"graceperiod"!=a(b).find("#id_overduehandling :selected").val()||a(b).find("#id_graceperiod_enabled").prop("checked")||x(b,a(b).find("#id_graceperiod_timeunit").attr("name"),"timeunit",chrome.i18n.getMessage("A906"),++q),v=!1);t=z*d+y*w}}h&&!e&&"-"!=a(b).find("#id_browsersecurity").val()&&(c?a(b).find("#id_browsersecurity").val("-"):(x(b,a(b).find("#id_browsersecurity").attr("name"),"",chrome.i18n.getMessage("A992"),++q),v=!1,l.push("BROWSERSECURITY")));
e&&a(b).find("#id_userid").length&&"hidden"!=a(b).find("#id_userid").attr("type")&&!a(b).find("#id_userid :selected").length&&(x(b,a(b).find("#id_userid").attr("name"),"",chrome.i18n.getMessage("A870"),++q),v=!1);!e&&(d=b.getElementById("id_gradepass"))&&(w=d.value,w.length&&(y=b.getElementsByName("grade"),isNaN(parseFloat(w))?c?b.getElementById("id_gradepass").value="":(x(b,d.name,"",chrome.i18n.getMessage("A995"),++q),v=!1,l.push("GRADETOPASSNAN")):y.length&&(y=y[0].value,!isNaN(y)&&parseFloat(y)<
parseFloat(w)&&(c?b.getElementById("id_gradepass").value="":(x(b,d.name,"",chrome.i18n.getMessage("A994",y),++q),v=!1,l.push("GRADETOPASSNAN"))))));v||a(".error").focus();u(v,p,f.elbow.ef9(m),l,f.elbow.ef9(n),t)};e?d():J(d)}}function x(b,d,c,e,h){var f=c=d.replace("["+c+"]",""),g=a(b).find("#fitem_id_"+f);g.length||(g=a(b.getElementsByName(d)).closest(".row.fitem"));g.closest("fieldset").removeClass("collapsed");a(g).find(".felement").addClass("error").addClass("has-danger").prepend('<span id="id_error_'+
f+(""!=c?"_"+c:"")+'" class="error form-control-feedback" tabindex="'+h+'">'+e+'</span><br class="error" id="id_error_break_"'+f+(""!=c?"_"+c:"")+'">')}function T(){a(".error").each(function(){"FIELDSET"==this.tagName||"DIV"==this.tagName?a(this).removeClass("error"):"id_error_questionsperpage_questionsperpage"!=this.id&&a(this).remove()});a("div.proctorio_settings_invalid_alert").remove()}function ja(){var b=document.getElementById("id_modstandardelshdr"),d=a(b.outerHTML).attr("id","proctorio_settings_moodle_container");
d.find("legend").attr("id","proctorio_exam_settings_legend").find("a").attr("id","").attr("aria-controls","").attr("aria-expanded","").text(chrome.i18n.getMessage("A384"));var c=a(".helptooltip").find("img");c.length&&a('<span><a id="proctorio_settings_help" href="https://proctorio.zendesk.com/hc/categories/200052095" target="_blank"><img class="iconhelp" src="'+c[0].src+'" alt="Proctorio Help" /></a></span>').appendTo(d.find("legend"));d.find(".fcontainer").html('<div class="fitem fitem_fgroup"><div class="fitemtitle"><div class="fgrouplabel"><label>'+
chrome.i18n.getMessage("A993")+'</label></div></div><fieldset class="felement fgroup"><span><input id="enable_proctorio" type="checkbox"><label for="enable_proctorio">'+chrome.i18n.getMessage("A814")+'. <a href="https://proctorio.zendesk.com/hc/articles/202016790" target="_blank">'+chrome.i18n.getMessage("A815")+".</a></label></span></fieldset></div>");d.find("#enable_proctorio").hide();d.insertAfter(b);a("#fgroup_id_buttonar").show();var e=setInterval(function(){a("#proctorio_exam_settings_legend").children("a").length&&
(clearInterval(e),a("#proctorio_exam_settings_legend").children("a").text(chrome.i18n.getMessage("A384")))},100);document.body.style.cursor="default"}function O(){f.b291b(function(b,d){a("#id_timelimit_enabled").prop("checked")||a("#id_timelimit_enabled").click();3600<=b?(a("#id_timelimit_timeunit").val(3600),a('#id_timelimit_number, input[name="timelimit[number]"]').val(b/3600)):60<=b?(a("#id_timelimit_timeunit").val(60),a('#id_timelimit_number, input[name="timelimit[number]"]').val(b/60)):(a("#id_timelimit_timeunit").val(1),
a('#id_timelimit_number, input[name="timelimit[number]"]').val(b));d(1)})}function P(b,d){a(document).on("keydown",function(a){if(13==a.keyCode){a=document.activeElement;if(!a)return!1;a=a.id;if("id_introeditor"!=a&&"id_introeditoreditable"!=a)return!1}});var c=document.getElementById("id_modstandardelshdr"),e=a(c.outerHTML).attr("id","proctorio_settings_moodle_container");e.find("legend").attr("id","proctorio_exam_settings_legend").find("a").attr("id","").attr("aria-controls","").attr("aria-expanded",
"").text(chrome.i18n.getMessage("A384"));var h=a(".helptooltip").find("img");h.length&&a('<span><a id="proctorio_settings_help" href="https://proctorio.zendesk.com/hc/categories/200052095" target="_blank"><img class="iconhelp" src="'+h[0].src+'" alt="Proctorio Help" /></a></span>').appendTo(e.find("legend"));e.find(".fcontainer").html('<div class="fitem fitem_fgroup"><div class="fitemtitle"><div class="fgrouplabel"><label>'+chrome.i18n.getMessage("A993")+'</label></div></div><fieldset class="felement fgroup"><span><input id="enable_proctorio" type="checkbox"><label for="enable_proctorio">'+
chrome.i18n.getMessage("A893")+'</label></span></fieldset></div><div class="pio_settings_injection_point"></div>');e.insertAfter(c);b[0]||a("#fgroup_id_buttonar").show();var f=setInterval(function(){a("#proctorio_exam_settings_legend").children("a").length&&(clearInterval(f),a("#proctorio_exam_settings_legend").children("a").text(chrome.i18n.getMessage("A384")))},100);d()}function R(b,d){a("#proctorio-embed, .proctorio-embed").hide();a("#proctorio-oembed, .proctorio-oembed").show();a(".quizattempt").show();
(function(){var a=["password","contrase%C3%B1a"],b=document.getElementsByClassName("quizinfo");if(b.length){for(var d=b[0].getElementsByTagName("p"),f=0,g=d.length;f<g;f++){var u=encodeURIComponent(d[f].textContent);if("null"!=u&&"undefined"!=u)for(var l=0,v=a.length;l<v;l++)if(-1!=u.indexOf(a[l])){d[f].innerHTML=chrome.i18n.getMessage("A107")+" <strong>"+chrome.i18n.getMessage("B413")+'</strong>. <a href="https://proctorio.zendesk.com/hc/articles/200972514" target="_blank" style="text-decoration:underline">'+
chrome.i18n.getMessage("B414")+"</a>.";f=g;break}}b[0].style.display="block"}})();(function(){var b=a(".quizattemptcounts");if(b.show().length&&d[1]){var e=b.eq(0).clone();-1<e[0].innerHTML.indexOf("mode=grading")&&(e[0].innerHTML=e[0].innerHTML.replace("mode=grading","mode=overview"));e.css("margin-top",15).find("a").attr("href",f.elbow.a9c59(e.find("a").attr("href"),[["proctorio",1]])).text(chrome.i18n.getMessage("A868")).on("click",function(){localStorage.pio_mo_gb=1});e.insertAfter(b)}})();(function(){var c=
function(c){c.style.display="none";var d=function(){c.style.display="block"};f.c5fb3(document,b,a("#id_quizpassword"),function(a){var b=c.getElementsByTagName("form");if(b.length){for(var e=c.getElementsByTagName("fieldset"),g=0,h=e.length;g<h;g++)e[g].style.display="none";b[0].insertAdjacentHTML("afterbegin",a);c.style.display="block"}else d()},d)},d=function(a){if(a.length)for(var b=0,d=a.length;b<d;b++)if(a[b].addedNodes.length)for(var e=0,g=a[b].addedNodes.length;e<g;e++)if(a[b].addedNodes[e]&&
a[b].addedNodes[e].classList&&a[b].addedNodes[e].classList.contains("moodle-dialogue-base")&&"function"==typeof a[b].addedNodes[e].getElementsByTagName){var f=a[b].addedNodes[e].getElementsByTagName("input");if(f.length)for(var k=0,m=f.length;k<m;k++)if("password"==f[k].type){c(a[b].addedNodes[e]);h.disconnect();break}}},h=new MutationObserver(d);h.observe(document.body,{attributes:!1,childList:!0,characterData:!1});var k=document.getElementsByClassName("moodle-dialogue-base");k&&k.length&&d([{addedNodes:k}])})();
t();document.body.style.cursor="default"}function ia(b){a("head").append('<link href="'+chrome.extension.getURL("webassets/q76s.css")+'" rel="stylesheet" />');S(chrome.i18n.getMessage("A045"),"pio_mo_gb");a.get(chrome.extension.getURL("webassets/q76s.html"),function(d,c,e){a('div[role="main"]').hide().after(mus.th(d,{A700:chrome.i18n.getMessage("A700")}));b()})}function S(a,d){var b=document.getElementsByClassName("breadcrumb");if(b.length&&(b=b[0].getElementsByTagName("LI"),b.length&&(b=b[b.length-
1].getElementsByTagName("A"),b.length)))for(var e=0;e<b.length;e++)b[e].textContent=a,b[e].href=f.elbow.a9c59(b[e].href,[["proctorio",1]]),b[e].addEventListener("click",function(){localStorage[d]=1})}function W(a){var b=[],c=["student","examinador","examinado"];try{var e=document.createElement("iframe");e.id="pio_roster_iframe";e.style.position="absolute";e.style.top=0;e.style.left="-1000px";e.style.width="1px";e.src=G+"/enrol/users.php?id="+C;e.onload=function(){var d=this.contentWindow||this.contentDocument.parentWindow;
if(d&&d.document)if(d.document.getElementsByClassName("errorcode").length)a(0);else{var e=!1,g=d.document.getElementById("id_ifilter");g&&0!=g.value&&(g.value=0,e=!0);var f=d.document.getElementById("id_role");if(f){var l=0,m=f.getElementsByTagName("option");g=0;for(var n=m.length;g<n;g++){var p=m[g].textContent.toLowerCase();if(p.length)for(var r=0,t=c.length;r<t;r++)p==c[r]&&(l=m[g].value)}f.value!=l&&(f.value=l,e=!0)}(g=d.document.getElementById("id_status"))&&-1!=g.value&&(g.value=-1,e=!0);if(e)(d=
d.document.getElementById("id_submitbutton"))&&d.click();else{d=d.document.getElementsByClassName("userinforow");g=0;for(n=d.length;g<n;g++)b.push(1);a(b)}}};document.body.appendChild(e)}catch(h){a(b)}}var C="",G="",L="",D=[],M="",f=function(){},I=!1,V=function(){if("0"!=this.value)this.classList.contains("alertAdded")||(x(document,this.getAttribute("name"),"number",chrome.i18n.getMessage("Y038"),2),this.classList.add("alertAdded"));else{this.classList.remove("alertAdded");var a=document.getElementById("id_error_questionsperpage_questionsperpage");
a&&a.parentNode.removeChild(a);(a=document.getElementById("id_error_break_"))&&a.parentNode.removeChild(a)}};chrome.runtime.sendMessage([11],function(a){chrome.runtime.lastError&&m.top.location.reload(!0);C=a[0];G=m.location.protocol+"//"+a[3]+a[4];f&&f.d05?(f.d05(doc),f.e877(W),p()):f=new afd982(document,C,"mo",G,function(){f.e877(W);p()});chrome.runtime.sendMessage([9],function(a){})})})($,window);
