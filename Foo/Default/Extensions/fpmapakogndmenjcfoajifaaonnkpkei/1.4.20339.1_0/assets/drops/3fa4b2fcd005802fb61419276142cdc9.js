/*
COPYRIGHT (C) 2013-2020 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,m){if(d){b=$jscomp.global;a=a.split(".");for(m=0;m<a.length-1;m++){var e=a[m];e in b||(b[e]={});b=b[e]}a=a[a.length-1];m=b[a];d=d(m);d!=m&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=d.length,l=a.length;b=Math.max(0,Math.min(b|0,d.length));for(var w=0;w<l&&b<e;)if(d[b++]!=a[w++])return!1;return w>=l}},"es6","es3");$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var m=a.length,e=0;e<m;e++){var l=a[e];if(d.call(b,l,e,a))return{i:e,v:l}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var d=this;d instanceof String&&(d=String(d));var e=d.length;b=b||0;for(0>b&&(b=Math.max(b+e,0));b<e;b++){var l=d[b];if(l===a||Object.is(l,a))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,b){var d=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=d.length);b=Math.max(0,Math.min(b|0,d.length));for(var e=a.length;0<e&&0<b;)if(d[--b]!=a[--e])return!1;return 0>=e}},"es6","es3");
(function(a,d){function b(a){a=a.split("+").join(" ");for(var b={},c,d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);return b}function m(a,b){if(a())b();else var c=setInterval(function(){a()&&(clearInterval(c),b())},100)}if(!document.body.getAttribute("data-p")){document.body.setAttribute("data-p",1);var e,l,w,y=!1,h=new ec21dc(function(){y=!0}),B=-1,A=setInterval(function(){try{chrome.runtime.sendMessage([42,"lub"],function(a){chrome.runtime.lastError?
(clearInterval(A),location.reload()):"dub"!=a&&(clearInterval(A),location.reload())})}catch(g){if(g.message.startsWith("Cannot read")||g.message.startsWith("Error connecting to extension")||g.message.startsWith("Invocation of form runtime.connect")||g.message.startsWith("Extension context invalidated"))clearInterval(A),location.reload()}},1E3),r=function(){a(".quizinfo").show();a(".quizattempt").show();a("#page-mod-quiz-view #mform1").show();a('#page-mod-quiz-report div[role="main"]').css("opacity",
1);a("#page-mod-quiz-mod #fitem_id_introeditor").show();a("#proctorio-oembed").show();a(".proctorio-oembed").show();a("#intro").show()},E=function(){var g=-1,p=document.getElementsByClassName("quizinfo"),c=null,x=[],G={},t="",v=function(){a("#proctorio-embed").hide();a(".proctorio-embed").hide();a("#proctorio-oembed").show();a(".proctorio-oembed").show();a("#intro").show();document.getElementsByName("sesskey").length?m(function(){return y},function(){h.ee1(e,function(a){B=a});h.e2cc("reason",function(){var a=
h.c416(g,e);h.b1457("code",null===localStorage.getItem(a+"_close")?0:localStorage[a+"_close"])});h.f10(g,e,function(b){b?h.c8f4(a("span.proctoriocontrol").length?g:0,e,l,function(c){c?u(b):(a(p).show(),a(".quizattempt").show())}):(a(p).show(),r())})}):r()},u=function(b){var k=function(){for(var b=null,c=document.querySelectorAll("form"),f=0;f<c.length;f++)if(c[f].action.includes("startattempt.php")&&!c[f].hasAttribute("autocomplete")){b=c[f].getElementsByTagName("button");b=b.length?b[0]:c[f].querySelector('input[type="submit"]');
break}if(!b){c=document.querySelectorAll("button,input");f=0;for(var e=c.length;f<e;f++)for(var k=encodeURIComponent("button"==c[f].tagName.toLowerCase()?c[f].textContent:c[f].value).toLowerCase(),g=0,p=z.length;g<p;g++)for(var n=0,h=z[g].length;n<h;n++)if(k==z[g][n].toLowerCase()){b=c[f];f=e;g=p;break}try{chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","gDrS",d.location.hostname]])}catch(I){}}f=b.cloneNode(!0);f.id="proctorio_resume";f.className="";try{f.style.cssText=d.getComputedStyle(b).cssText}catch(I){}b.parentNode.insertBefore(f,
b);b.style.setProperty("display","none","important");a(f).on("keypress click",J);-1<d.location.href.indexOf("quiz/view.php")&&null===document.getElementById("demo_begin_quiz")&&(f.style.display="inline-block",a(".quizattempt").show())},J=function(c){c.stopPropagation();c.preventDefault();if(!y){y=!0;a(this).off();localStorage.removeItem("ok_"+t);a("#region-pre").remove();a("body").removeClass("side-pre-only").addClass("content-only");a("#proctorio-embed").length||a(".proctorio-embed").length||chrome.runtime.sendMessage([3,
["_trackEvent","PGHZ","BRoW_mo",d.location.hostname]]);a("h3").hide();a(p).hide();a(".quizattempt").hide();a(".quizattemptsummary").hide();a("#feedback").hide();a("#maincontent").hide();a("#intro").hide();a("#intro").length||a("#region-main h2").after('<div id="intro" class="box generalbox" style="display: none;"><div class="no-overflow"></div></div>');var k=a("div.logininfo").length&&-1!=a("div.logininfo").html().indexOf("switchrole.php"),f="";document.querySelector("img.userpicture")&&document.querySelector("img.userpicture").closest("a")&&
document.querySelector("img.userpicture").closest("a").innerText.trim()?f=document.querySelector("img.userpicture").closest("a").parentElement.innerText.trim():(chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","Ojsa",d.location.hostname]]),f.length||(f=a(".logininfo").find("a[href*='profile.php']").first().text().trim()),f.length||(f=a(".usermenu").find("a[href*='profile.php']").first().text().trim()),f.length||(f=a("li.type_user span.item-content-wrap").first().text().trim()),f.endsWith("-")&&
(f=f.slice(0,-1).trim()),f.length||(f="The Student"));m(function(){return-1<B},function(){h.b8d(b,a("#intro").parent()[0],g,e,l,"mo",f,"mform1","id_quizpassword",a("h2").first().text(),"body",A,k,B)});c.preventDefault();return!1}},n=function(a){for(var b=document.getElementsByTagName("input"),c=0,d=b.length;c<d;c++)for(var e=encodeURIComponent(b[c].value).toLowerCase(),g=0,k=a.length;g<k;g++)if(e==a[g])return!0;b=document.getElementsByTagName("button");c=0;for(d=b.length;c<d;c++)for(e=encodeURIComponent(b[c].textContent).toLowerCase(),
g=0,k=a.length;g<k;g++)if(e==a[g])return!0;return!1},z=["attempt%20quiz%20now intente%20resolver%20el%20cuestionario%20ahora start%20exam comensar%20examen faire%20le%20test test%20jetzt%20durchf%c3%bchren".split(" "),["continue%20the%20last%20attempt","continuar%20el%20%C3%BAltimo%20intento","continuar%20el%20%c3%baltimo%20intento","continuer%20la%20derni%c3%a8re%20tentative","letzten%20versuch%20fortsetzen"],["re-attempt%20quiz","reintentar%20el%20cuestionario","effectuer%20de%20nouveau%20le%20test",
"test%20wiederholen"]],q=function(a){for(var b=0;b<a.children.length;b++)if("span"===a.children[b].tagName.toLowerCase())return 1;return 0},u=document.getElementsByClassName("lastrow"),r=!1,v=!1;u.length&&(r=q(u[0].getElementsByClassName("c1")[0])?n(z[1]):!0,v=q(u[0].getElementsByClassName("c1")[0])?!0:n(z[2]));var y=!1;t=h.c416(g,e);(function(){if(c&&(c.innerHTML=chrome.i18n.getMessage("A107")+" <strong>"+chrome.i18n.getMessage("B413")+"</strong>. <a href='https://proctorio.zendesk.com/hc/articles/200972514' target='_blank' style='text-decoration:underline'>"+
chrome.i18n.getMessage("B414")+"</a>.",b[0]||b[1]||b[2])){chrome.runtime.sendMessage([16,G.content_id+"_is_"+G.course_id+"_oy_"+w,x,43829]);var a=chrome.i18n.getMessage("A214");!b[0]&&!b[2]||b[1]?b[0]||b[2]||!b[1]||(a=chrome.i18n.getMessage("A216")):a=chrome.i18n.getMessage("A215");c.insertAdjacentHTML("afterend","<p>"+a+"</p>")}})();a(p).show();if(b[15]&&localStorage["ok_"+t]!=cjs.mi6(t+"__xsalt").toString()&&r&&!v){var C=document.createElement("p");C.innerHTML=chrome.i18n.getMessage("A159");p.length&&
p[0].appendChild(C);h.e2cc("quizoverride",function(c){2==b[15]?h.b1457("quizoverride_response","denied"):c&&"none"!=c?c==cjs.mi6(t+"__xsalt").toString()?(chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","yFrr_mo",d.location.hostname]]),localStorage["ok_"+t]=c,h.b1457("quizoverride_response","success"),C.style.display="none",a(".quizattemptsummary").after(E),k()):h.b1457("quizoverride_response","invalid"):h.b1457("quizoverride",t)});var E=a(".quizattempt").remove();x.push("LOCKED")}else{if(-1!=
location.href.indexOf("#")){location.href=location.href.split("#")[0];return}k()}if(b[15]&&localStorage["ok_"+t]!=cjs.mi6(t+"__xsalt").toString()&&(n=["In progress","En curso"],q=document.getElementsByClassName("quizattemptsummary"),q.length))for(u=q[0].getElementsByTagName("td"),q=0,r=u.length;q<r;q++){v=u[q].textContent;for(var D=0,F=n.length;D<F;D++)if(-1!=v.indexOf(n[D])){u[q].textContent=chrome.i18n.getMessage("A218");q=r;break}}a(".quizattemptcounts").show();chrome.runtime.sendMessage([19,!0]);
chrome.runtime.sendMessage([4,chrome.i18n.getMessage("B410")]);n=a("#region-main");n.length&&1E3>n.width()&&n.css({width:"100%"});n=document.getElementsByClassName("moodle-dialogue-base");if(n.length)for(q=0;q<n.length;q++)n[q].remove();else{var H=new MutationObserver(function(a){if(a.length)for(var b=0,c=a.length;b<c;b++)if(a[b].addedNodes.length)for(var d=0,g=a[b].addedNodes.length;d<g;d++)if(a[b].addedNodes[d]&&a[b].addedNodes[d].classList&&a[b].addedNodes[d].classList.contains("moodle-dialogue-base")&&
"function"==typeof a[b].addedNodes[d].getElementsByTagName){var e=a[b].addedNodes[d].getElementsByTagName("input");if(e.length)for(var k=0,p=e.length;k<p;k++)"password"==e[k].type&&(a[b].addedNodes[d].style.display="none",H.disconnect())}});H.observe(document.body,{attributes:!1,childList:!0,characterData:!1})}};(function(){if(p.length){var a=p[0].parentElement.getElementsByClassName("proctorio-oembed"),b=[];a.length&&(a[0].querySelectorAll("p").forEach(function(a){b.push(a.innerText)}),b.length?
x.push("Quiz Instructions: "+b):x.push("No quiz Instructions"));a=p[0].getElementsByTagName("p");for(var d=0,g=a.length;d<g;d++)x.push(a[d].textContent),null==c&&(c=a[d]);h.e2cc("quizinfo",function(){h.b1457("quizinfo",x)})}})();(function(){var c=document.createElement("a");c.href=document.location.href;(c=b(c.search))&&c.hasOwnProperty("id")&&!isNaN(c.id)&&(g=c.id);if(a(".proctorio-oembed").length||a("#proctorio-oembed").length)v();else{var d=a("#region-main h2").text().trim();h.fa3e1(function(a){for(var b=
0,c=a.length;b<c;b++)if(-1!=d.indexOf(a[b])){v();return}r()})}})()},F=function(){a(".errormessage").length&&-1!=a(".errormessage").text().indexOf("cmid")&&d.history.back();var b=function(){a("#mform1").length&&a("input[name='cmid']").length&&""!=a(".logininfo").find("a[href*='profile.php']").first().text()?(a("#mform1").hide(),a("#intro").hide(),m(function(){return y},function(){h.f10(a("input[name='cmid']").val(),e,function(b){b?h.c8f4(a("input[name='cmid']").val(),e,l,function(b){b?(a("#proctorio-embed").length||
a(".proctorio-embed").length||chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","BRoW_mo",d.location.hostname]]),d.history.back()):(a("#mform1").show(),a("#intro").show(),a("#proctorio-embed").hide(),a(".proctorio-embed").hide(),a("#proctorio-oembed").show(),a(".proctorio-oembed").show(),a(".quizinfo").show(),a(".quizattempt").show())}):(a("#mform1").show(),a("#intro").show(),a("#proctorio-embed").hide(),a(".proctorio-embed").hide(),a("#proctorio-oembed").show(),a(".proctorio-oembed").show(),a(".quizinfo").show(),
a(".quizattempt").show())})})):r()};if(a("#proctorio-oembed").length||a(".proctorio-oembed").length)b();else{var p=a("#region-main h2").text().trim();p=a("#region-main h2").text().trim();h.fa3e1(function(a){for(var c=0,d=a.length;c<d;c++)if(-1!=p.indexOf(a[c])){b();return}r()})}};chrome.runtime.sendMessage([11],function(b){chrome.runtime.lastError&&location.reload();e=b[0];l=b[1];w=d.location.protocol+b[3]+b[4];if(-1!=document.location.pathname.indexOf("quiz/view.php"))E();else if(-1!=document.location.pathname.indexOf("quiz/startattempt.php"))F();
else if(-1!=document.location.pathname.indexOf("quiz/review.php")){var g=!1;chrome.runtime.sendMessage([154,"F019 F020 F021 F022 A896 A991".split(" ")],function(a){var b=a.F019||"";var c=a.F020||"";var e=a.F021||"";var p=a.F022||"";var h=a.A896||"";a=a.A991||"";var k=document.querySelectorAll(".breadcrumb-nav .breadcrumb-item");if(k.length){var m=k.length-1;if(-1!==k[m].textContent.indexOf(h)||-1!==k[m].textContent.indexOf(a))g=!0}if(g){var l=document.createElement("div");h=document.createElement("div");
a=document.createElement("p");k=document.createElement("a");m=document.createElement("p");var n=document.createElement("span");l.setAttribute("id","co2");h.setAttribute("class","co2_header");h.innerHTML=b;k.innerText=c;k.href="https://proctorio.com/about/sustainability";k.setAttribute("target","_blank");a.innerHTML=e;m.setAttribute("class","co2_footer");m.innerText=p;n.setAttribute("class","co2_close");a.appendChild(k);a.append(".");l.appendChild(h);l.appendChild(a);l.appendChild(m);l.appendChild(n);
b=document.createElement("link");b.rel="stylesheet";b.href=chrome.extension.getURL("webassets/co2.css");document.head.appendChild(b);d.top.document.body.prepend(l);l.getElementsByClassName("co2_close")[0].addEventListener("click",function(){l.remove()})}})}else{if(a("#region-main").find('img[src$="vo.msecnd.net/guides/student-logo.png"]').length){chrome.runtime.sendMessage([19,!0]);b=a("#region-main").find("div.proctorio_removeme");if(b.length)b.html('<div class="take_quiz_button" style="display: block;"><a id="take_quiz_link" class="btn btn-primary" href="#">Live Chat</a></div>').on("click",
function(){chrome.runtime.sendMessage([31,1])});a(".proctorio_installed").hide()}else chrome.runtime.sendMessage([19,!1]);r()}chrome.runtime.sendMessage([5,[a("h1").text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," "),a("h2").first().text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," ")]],function(a){chrome.runtime.lastError&&location.reload()});chrome.runtime.sendMessage([9],function(a){})});chrome.runtime.sendMessage([67]);
(function(){function b(b,c){c?c=a(b).find("a:contains('Secure Exam Proctor')").parent().parent():((c=a(b).find("#region-main-wrap"))&&0!=c.length||(c=a(b).find("#region-main")),c=c.find("a:contains('Secure Exam Proctor')").parent().parent());c.hasClass("item_with_icon")?c.hide():(b=c.parent().parent().parent(),!b.is("#region-post")&&b.hasClass("lti")&&b.hide())}a("li.modtype_lti").not("a:contains('Secure Exam Proctor')").show();a(document).on("DOMNodeInserted",function(a){b(a.target,!0)});b(document,
!1)})()}})($,window);
