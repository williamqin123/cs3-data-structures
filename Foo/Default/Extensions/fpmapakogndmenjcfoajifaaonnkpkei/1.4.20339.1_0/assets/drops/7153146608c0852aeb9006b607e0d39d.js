/*
COPYRIGHT (C) 2013-2020 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,l,w){a instanceof String&&(a=String(a));for(var D=a.length,B=0;B<D;B++){var L=a[B];if(l.call(w,L,B,a))return{i:B,v:L}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,l,w){a!=Array.prototype&&a!=Object.prototype&&(a[l]=w.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,l,w,D){if(l){w=$jscomp.global;a=a.split(".");for(D=0;D<a.length-1;D++){var B=a[D];B in w||(w[B]={});w=w[B]}a=a[a.length-1];D=w[a];l=l(D);l!=D&&null!=l&&$jscomp.defineProperty(w,a,{configurable:!0,writable:!0,value:l})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,w){return $jscomp.findInternal(this,a,w).v}},"es6","es3");
(function(a,l){function w(){var c=b.URL;k.a924();k.elbow.f03f(l.top.document.body);-1<c.indexOf("/assessment/do/content/addAssessment")||-1<c.indexOf("assessment/do/content/assessment?action=MODIFY")&&-1<c.indexOf("method=modifyOptions")&&(-1<c.indexOf("assessmentType=Test")||-1<c.indexOf("assessmentType=Survey"))?D():-1<c.indexOf("assessment/do/content/assessment?action=MODIFY")&&-1<c.indexOf("method=modifyAssessment")?(a(b).find("#pageTitleBar").find("span.contextMenuContainer").find("a").show(),
a(b).find(".key-valueTable").css("width","auto")):-1<c.indexOf("launchAssessment")?a(b).find(".taskbuttondiv_wrapper").show():-1<c.indexOf("assessment/take/launch.jsp")?(B(),chrome.runtime.sendMessage([1001],function(a){chrome.runtime.lastError||console.log("Succesfull")}),c=document.getElementsByClassName("submit"),c.length&&"submit"==c[0].type&&c[0].addEventListener("click",function(){chrome.runtime.sendMessage([1002])})):-1<c.indexOf("launch.jsp")?B():-1<c.indexOf("enterGradeCenter")&&(-1<c.indexOf("cvid=fullGC")||
c.indexOf("cvid=16"))?L():-1<c.indexOf("listContentEditable.jsp")?V(!0):-1<c.indexOf("listContent.jsp")?V(!1):-1<c.indexOf("/modifyAssessment")&&-1==c.indexOf("/modifyAssessmentInfo")?ca():-1<c.indexOf("/gradebook/do/instructor/addModifyItemDefinition")?da():E()}function D(){var c=function(){if(a(b).find("form").length)if(a(b).find('form[name="assessmentForm"]').length){var f=a(b).find("#fPassword");"password"===f[0].type&&k.fd4dq(f);var e=a(b).find('input[name="content_id"]').val();a(b).find('input[name="assmtType"]').val();
var m=a(b).find('input[name="assessmentId"]').val();chrome.runtime.sendMessage([16,k.be24(m+"_assid_"+t),e,43829]);a(b).find(".taskbuttondiv_wrapper").hide();k.ac5f(e,a(b).find("#name"),a(b).find("#descriptiontext"),M,function(a,b){ea(a,m,b)},fa,f,a(b).find("#content"),Q,N,a(b).find('input[name="top_Submit"], input[name="bottom_Submit"]'),ha,ia,ja,E)}else E();else setTimeout(c,250)};c()}function B(){a(b).find("#content").hide();var c=function(){a(b).find("#content").show();E();b.body.style.cursor=
"default"},f=function(c){a(b).find("#content").show();a(b).find("#step1").hide().after(c);a(b).find("form").show().find(".taskbuttondiv_wrapper").show();c=a(b).find("#pageTitleText").text();c=chrome.i18n.getMessage("A196")+c.substring(c.indexOf(":"),c.length);a(b).find("#pageTitleText").text(c);a(b).find("#breadcrumbs").find("li").last().text(c);b.body.style.cursor="default"};if(a(b).find('input[name="password"]').length){var e=a(b).find("#content_id").val();e?k.c5fb3(b,e,a(b).find('input[name="password"]'),
f,c):c()}else c()}function L(){var c=function(){},f=0,e=!1,m="",d="",r="",n=-1,g={},h=[],p=null,y=function(){p&&p.disconnect();p=new MutationObserver(function(a){for(var b=0,c=a.length;b<c;b++)if(a[b].addedNodes.length)for(var d=0,e=a[b].addedNodes.length;d<e;d++)try{if(a[b].addedNodes[d].classList&&a[b].addedNodes[d].classList.contains("cmdiv")&&(n=-1,u(a[b].addedNodes[d]))){var g=a[b].addedNodes[d];if(g&&!g.classList.contains("pio_bbgb_link")){var m=g.getElementsByTagName("ul");if(m.length){var h=
m[0].getElementsByTagName("li");if(h.length){var f=h[h.length-1].cloneNode(!0);f.removeAttribute("id");f.classList.add("pio_bbgb_link");var p=f.getElementsByTagName("a");p.length&&(p[0].setAttribute("href","#"),p[0].setAttribute("title",chrome.i18n.getMessage("A868")),p[0].textContent=chrome.i18n.getMessage("A868"),f.addEventListener("click",z),m[0].appendChild(f))}}}}}catch(pa){}});p.observe(b.body,{attributes:!1,childList:!0,characterData:!1})},u=function(a){if(!a.classList.contains("pio_bbgb_link")&&
(a=a.id.replace("cmdiv_",""))&&(a=b.getElementById("cmlink_"+a))){if(k.elbow.pioQuery.closest(a,"#table1_header"))(a=k.elbow.pioQuery.closest(a,"th"))&&(n=k.elbow.pioQuery.index(a));else{if(!k.elbow.pioQuery.closest(a,"#table1_container"))return;a=k.elbow.pioQuery.closest(a,"td");if(!a)return;a=a.id.split("_")[2];if("undefined"==typeof a||!a.length||isNaN(a))return;n=parseInt(a,10);a=b.getElementById("table1_header");if(!a)return;a=a.getElementsByTagName("th");if(!a.length||a.length<n)return;a=a[n]}if(a&&
(a=a.getElementsByClassName("gbData"),a.length)){for(var c=!1,d=0,e=F.length;d<e;d++)if(-1!=a[0].textContent.indexOf(F[d])){c=!0;break}c&&(r=a[0].textContent);return c}}},z=function(a){a.preventDefault();a.stopPropagation();k.elbow.pioQuery.closest(a.target,".cmdiv")?r?(m=d="",h=[],k.elbow.f03f(l.top.document.body),W(r,function(){H()}),g&&g.length?x(g):X(x)):k.elbow.b33q(b,0,chrome.i18n.getMessage("A518")):k.elbow.b33q(b,0,chrome.i18n.getMessage("A518"))},x=function(a,c){var e=!1;if(k.elbow.f2a3f(a)||
"undefined"==typeof a.colDefs||"undefined"==typeof a.rows)q();else if(g=a,H(),""!=m&&""!=d)H(),"function"==typeof c&&c();else{a=[];for(var h=0;h<g.colDefs.length;h++)"undefined"!=typeof g.colDefs[h].name&&g.colDefs[h].name==k.elbow.d482(r)&&a.push(g.colDefs[h].id);if(a.length){if(1==a.length)d=a[0];else if(d=a[0],-1!=n){e=-1;for(h=0;h<g.colDefs.length;h++)if("UN"==g.colDefs[h].id){e=h;break}if(0<=e){var p=b.getElementById("table1");if(p&&(p=p.getElementsByTagName("tr"),p.length)){var y=b.getElementById("table1_header");
if(y){var z=null;y=y.getElementsByTagName("th");if(y.length){h=y[0].classList.contains("checkcol");for(h=g.numFrozenColumns+(h?1:0);h<y.length;h++){var v=y[h].getElementsByClassName("gbData");if(v.length&&(v=v[0].textContent)){for(var x=0,u=0;u<g.colDefs.length;u++)g.colDefs[u].name==v&&x++;if(1==x){for(u=0;u<g.colDefs.length;u++){x=!1;for(var R=0;R<g.categories.length;R++)if(g.categories[R].id==g.colDefs[u].catid){x=!0;break}if(x&&g.colDefs[u].name==v){z=u-h;break}}if(null!=z)break}}}if(null!=z)if(w(p,
n+z,e,n))d=g.colDefs[n+z].id;else for(h=0;h<g.colDefs.length;h++)0>h-n||-1!=a.indexOf(g.colDefs[h].id)&&w(p,h,e,h-n)&&(d=g.colDefs[h].id)}}}}}e=!0;ka(d,function(a){a?(m=a,H(),"function"==typeof c&&c()):(k.elbow.b33q(l.top.document,0,"A096",[],"204445307"),J(),f=0)});e||(k.elbow.b33q(l.top.document,0,"A095"),J(),f=0)}else q()}},q=function(){k.elbow.b33q(l.top.document,0,"A518");J();f=0},v=function(a,b){for(var c=0;c<a.length;c++){var d=a[c].getElementsByClassName("gbText");if(d.length&&d[0].textContent)for(var e=
0;e<g.rows.length;e++)if(d[0].textContent.trim()==g.rows[e][b].v)return c}return-1},w=function(a,b,c,d){if(!g.colDefs[b]||g.colDefs[b].name!=r)return!1;var e=0,h=-1,p=function(){},f=-1,m=-1,q=-1,y=-1;p=a[0].children;if(p.length<=d)return!1;h=v(p,c);if(-1!=h)p=function(a,b){return b==g.rows[a][c].v};else{for(b=0;b<g.colDefs.length&&("FN"==g.colDefs[b].id?f=b:"LN"==g.colDefs[b].id&&(q=b),-1==f||-1==q);b++);if(-1==f||-1==q)return!1;for(b=0;b<p.length;b++){var u=p[b].getElementsByClassName("gbText");
if(u.length){var z=u[0].textContent.trim();for(u=0;u<g.rows.length;u++)if(g.rows[u][f].v==z?m=b:g.rows[u][q].v==z&&(y=b),-1!=m&&-1!=y){b=p.length+1;break}}}if(-1==m||-1==y)return!1;p=function(a,b,c,d){return c==g.rows[a][f].v&&d==g.rows[a][q].v}}for(u=0;u<a.length;u++){var n=a[u].children;if("undefined"!=typeof n[d]){var x=n[d].getElementsByClassName("gbText");if(x.length){var l=z="",t="";if(-1<h){z=n[h].getElementsByClassName("gbText");if(!z.length)continue;z=z[0].textContent.trim()}else{t=n[m].getElementsByClassName("gbText");
l=n[y].getElementsByClassName("gbText");if(!t.length||!l.length)continue;t=t[0].textContent.trim();l=l[0].textContent.trim()}x=x[0].textContent.trim();for(n=0;n<g.rows.length;n++)if(p(n,z,t,l)){if(""==x&&k.elbow.f2a3f(g.rows[n][b])){e++;break}if("undefined"==typeof g.rows[n][b]||"undefined"==typeof g.rows[n][b].v)break;if(""==x&&"-"==g.rows[n][b].v){e++;break}if(isNaN(x))break;parseInt(x)==g.rows[n][b].v&&e++;break}}}}return e>=a.length},H=function(){f++;3==f&&(f=0,la(),-1==b.URL.indexOf("proctorio_item")&&
-1==b.URL.indexOf("proctorio_content")&&(history.pushState({proctorio:0},"Blackboard Gradebook",k.d4c02(b.URL,["proctorio_item","proctorio_content"])),history.replaceState({proctorio:m},"Proctorio Gradebook",k.elbow.a9c59(b.URL,[["proctorio_item",d],["proctorio_content",m]]))),l.addEventListener("popstate",function(d){null==d.state||null!=d.state.proctorio&&0==d.state.proctorio?(J(),(d=document.getElementsByClassName("introjs-overlay"))&&d.length&&document.getElementsByClassName("introjs-overlay")[0].click()):
null!=d.state&&null!=d.state.proctorio&&d.state.proctorio&&(a(b).find("#proctorio").show(),a(b).find("#pio_cloned_header").show(),a(b).find("#pio_cloned_header").show(),a(b).find("#pio_cloned_help").show(),a(b).find("#actionbar").hide(),a(b).find("#containerdiv").hide(),a(b).find("#pageTitleBar").find(".contextMenuContainer").hide(),a(b).find("#helpPageTitle").hide(),a(b).find("#pageTitleText").hide(),c.abc())}),"function"!=typeof d80dd?chrome.runtime.sendMessage([44],function(a){chrome.runtime.lastError&&
l.top.location.reload(!0);var e=setInterval(function(){"function"==typeof d80dd&&(clearInterval(e),c=new d80dd(b,m,A,t,"bb",[h,r,d,K,S],k))},100)}):c=new d80dd(b,m,A,t,"bb",[h,r,d,K,S],k))},la=function(){if("undefined"!=typeof g.rows&&g.rows.length){for(var a=-1,b=0;b<g.rows.length;b++){var c=-1;if(-1==a)for(var e=0;e<g.rows[b].length;e++)if(!k.elbow.f2a3f(g.rows[b][e])&&"undefined"!=typeof g.rows[b][e].c&&g.rows[b][e].c==d){a=e;break}-1==a||k.elbow.f2a3f(g.rows[b][a])||"undefined"==typeof g.rows[b][a].v||
(c=g.rows[b][a].v);-1!=c&&h.push([[g.rows[b][1].v,g.rows[b][0].v],g.rows[b][2].v,c])}-1<a&&(r=g.colDefs[a].name);"function"==typeof callback&&callback()}else k.elbow.b33q(l.top.document,0,"A518"),J(),f=0},J=function(){e&&y();a(b).find("#proctorio").hide();a(b).find("#proctorio_wait").hide();a(b).find("#pio_cloned_header").hide();a(b).find("#pio_cloned_help").hide();a(b).find("#actionbar").show();a(b).find("#containerdiv").show();a(b).find("#pageTitleBar").find(".contextMenuContainer").show();a(b).find("#helpPageTitle").show();
a(b).find("#pageTitleText").show();a(b).find("#menuPuller").get(0).click()};(e=!function(){if("undefined"!=typeof localStorage.pio_bb_gb){var a=JSON.parse(localStorage.pio_bb_gb);localStorage.removeItem("pio_bb_gb");d=a[0];m=a[1]}else-1<b.URL.indexOf("?")&&(a=qp(b.URL.split("?")[1]),"undefined"!=typeof a.proctorio_item&&"undefined"!=a.proctorio_content&&(d=a.proctorio_item,m=a.proctorio_content));return""!=d&&""!=m?(H(),X(function(a){x(a,function(){W(r,function(){H()})})}),!0):!1}())&&G(function(){y()});
e=!e}function V(c){a(b).find(".contextMenuContainer").find("a").show();a(b).find('li[id^="contentListItem"]').find("a").each(function(){"undefined"!=typeof a(this).data("href")&&a(this).attr("href",a(this).data("href"));!c&&-1<this.textContent.indexOf("Secure Exam Proctor")&&(console.log(a(this).parents("li")),a(this).parents("li").css("display","none"))});c&&ma();E()}function ma(){var a=function(){},f={},e=[],m=[],d=[],r=function(a){if(!a.getElementsByClassName("pio_bb_ov").length){var c=a.id;if(!c||
-1==c.indexOf("cmdiv_"))return!1;c=b.getElementById("cmlink_"+c.replace("cmdiv_",""));if(!c)return!1;c=k.elbow.pioQuery.closest(c,"li");if(!c||!c.getElementsByClassName("proctorio-oembed").length||-1==c.textContent.indexOf(chrome.i18n.getMessage("A896"))&&-1==c.textContent.indexOf(chrome.i18n.getMessage("A991")))return!1;a.setAttribute("data-pio-content-id",c.id.replace("contentListItem:",""));return!0}},n=function(a){a.preventDefault();var c=a.target.getAttribute("data-pio-content-id");if(c){var e=
document.getElementById("contentListItem:"+c);if(e&&(k.elbow.f03f(),f=b.getElementById("containerdiv"))){f.style.display="none";var h=b.getElementById("actionbar");h&&(h.style.display="none");if(a=k.elbow.pioQuery.closest(a.target,".cmdiv"))a.style.display="none";k.elbow.ec975(b,chrome.extension.getURL("webassets/q76s.css"));k.elbow.d84a9(["GET",chrome.extension.getURL("webassets/q76s.html")],function(a){f.insertAdjacentHTML("afterend",mus.th(a.responseText,{A700:chrome.i18n.getMessage("A555")}));
a=null;l.scrollTo(0,0);b.body.style.cursor="wait";k.d060f(c,function(a){(d=a)&&d[0]?g(c,e):(k.elbow.b33q(document,0,"A712"),(a=document.getElementById("proctorio_wait"))&&a.parentNode.removeChild(a),f.style.display="block",b.body.style.cursor="default")})})}}},g=function(c,g){var h=function(e,h){var g=function(){l.top.removeEventListener("f6f6",g);a=new f6f6(b,"bb",c,d,e,k,t+"/webapps/assessment/do/content/assessment?action=MODIFY&course_id="+A+"&content_id="+c+"&assessmentType=Test&method=modifyOptions",
"#fPassword","#fIsPassword",Q,"#name",'input[name="top_Submit"], input[name="bottom_Submit"]',M,N,"content/listContentEditable.jsp",[],[Y]);h()};"function"!=typeof a.acl_display?(l.top.addEventListener("f6f6",g),chrome.runtime.sendMessage([75],function(a){chrome.runtime.lastError&&l.top.location.reload(!0)})):g()},p=function(a){K(1,function(b){m=[];S(c,b,m,function(){for(var c=0;c<b.length;c++){var d=!1;if(m.length)for(var h=0;h<m.length;h++)m[h]==b[c][7]&&(d=!0);e.push([b[c][1],b[c][2],b[c][7],d])}a()})})};
b.body.classList.add("pio_bb");(function(){var a="Proctorio Exam",b=g.getElementsByTagName("h3");b.length&&(a=b[0].textContent);if(b=document.getElementById("pageTitleHeader")){var c=b.getElementsByTagName("span");c.length&&(c[c.length-1].textContent=a,a=b.nextElementSibling)&&(a.style.display="none",a=a.getElementsByTagName("a"),a.length&&(a[0].style.display="none"))}})();(function(a){k.daa8(c,function(b){a(b[0])})})(function(b){h(b,function(){p(function(){a.build_table(f,e,function(){var a=document.getElementById("proctorio_wait");
a&&a.parentNode.removeChild(a);document.body.style.cursor="default"})})})})};(new MutationObserver(function(a){for(var b,c,d,e=0;e<a.length;e++){c=a[e].addedNodes;d=a[e].removedNodes;for(var h=0;h<d.length;h++)d[h].classList.contains("cmdiv")&&(b=d[h].getElementsByClassName("pio_bb_ov")[0])&&b.remove();for(h=0;h<c.length;h++)if((!c[h].classList||c[h].classList.contains("cmdiv"))&&r(c[h])&&(b=c[h],d=b.getElementsByTagName("ul"),d.length)){var g=d[0].getElementsByTagName("li");if(g.length){g=g[g.length-
1].cloneNode(!0);g.id=g.id.replace("options","proctorio");var f=g.getElementsByTagName("a");f.length&&(g.classList.add("pio_bb_ov"),f[0].href="#",f[0].id=g.id,f[0].textContent=chrome.i18n.getMessage("A851"),f[0].title=chrome.i18n.getMessage("A851"),f[0].setAttribute("data-pio-content-id",b.getAttribute("data-pio-content-id")),f[0].addEventListener("click",n),d[0].appendChild(g))}}}})).observe(b.body,{attributes:!1,childList:!0,characterData:!1})}function ca(){if(a(b).find('form[name="assessmentInfoForm"]').length){a(b).find("#containerdiv").hide();
b.body.style.cursor="wait";var c=a(b).find('input[name="assessmentId"]').val();if(c){var f=function(c){G(function(){var e=k.elbow.f016(a(b).find("#assessment_name_input").val(),F),d=chrome.i18n.getMessage("A896");e[0].length&&(d=e[0][0]);M(b,!1,0,function(e){k.d060f(-1!=c?c:0,function(e){var g=document.createElement("iframe");g.id="proctorio_tester";g.name="proctorio_tester";b.body.appendChild(g);var h=document.getElementsByName("assessmentInfoForm");h.length&&(h[0].setAttribute("target","proctorio_tester"),
g.onload=function(){try{l.history.back(-1)}catch(p){}});k.aa42(e);e[0]?k.aa8ea(c,function(e){var h=!0;e?h=e[0]||e[1].length?!0:!1:(k.elbow.b33q(b,"A518"),h=!0);e=function(e){a(b).find(".taskbuttondiv_wrapper").hide();b.body.style.cursor="wait";e=a(b).find("#assessment_name_input").val();255<e.length+d.length+1?e=e.substring(0,255-e.length-d.length-1):e.length||(e="Proctorio");k.d7b7f(b,a(g[0]),!1,"bb_script_inject_instructions");N(document,c,h,e+" "+d,!0)};for(var g=b.querySelectorAll('input[name="top_Submit"], input[name="bottom_Submit"]'),
f=0,m=g.length;f<m;f++){var r=b.createElement("div");r.style.cssText=l.getComputedStyle(g[f]).cssText;r.textContent=g[f].value;r.addEventListener("click",e);g[f].parentNode.insertBefore(r,g[f]);g[f].style.display="none"}a(b).find(".taskbuttondiv_wrapper").show()}):E();a(b).find("#containerdiv").show();b.body.style.cursor="default"})},!0)})};chrome.runtime.sendMessage([17,k.be24(c+"_assid_"+t)],function(a){chrome.runtime.lastError&&l.top.location.reload(!0);if(a)f(a);else if(a=b.getElementById("instructionstext"))try{var c=
b.createElement("div");c.innerHTML=a.value;c=c.getElementsByClassName("proctorio-oembed");if(c.length){var d=c[0].getAttribute("data-contentid");d?f(d):f(-1)}else f(-1)}catch(r){f(-1)}else f(-1)})}else E()}else E()}function da(){var a=b.getElementById("gradebookDisplayName"),f=b.getElementById("columnName_ro")||b.getElementById("columnName");a&&f?G(function(){var c=k.elbow.f016(f.value,F),m=chrome.i18n.getMessage("A896");c[0].length&&(m=c[0][0]);var d=!1;c=0;for(var r=F.length;c<r;c++)if(-1!=f.value.indexOf(F[c])){d=
!0;break}if(d){d=b.getElementsByName("top_Submit");var n=b.getElementsByName("bottom_Submit");if(d.length||n.length){var g=[];c=0;for(r=d.length;c<r;c++)g.push(d[c]);c=0;for(r=n.length;c<r;c++)g.push(n[c]);d=function(c){c.stopPropagation();c.preventDefault();c=a.value;if(c.length&&!(-1<c.indexOf(m))){var b=255,d=a.getAttribute("maxlength");null==d||isNaN(d)||(b=parseInt(d,10));c.length+m.length+1>b&&(c=c.substring(0,c.length-m.length-1));a.value=c+" "+m}g[0].click()};c=0;for(r=g.length;c<r;c++)n=
g[c].cloneNode(!0),n.removeAttribute("name"),n.removeAttribute("value"),n.addEventListener("click",d),g[c].parentNode.insertBefore(n,g[c]),g[c].style.display="none"}}E()}):E()}function E(){var c=-1!=b.URL.indexOf("listContentEditable.jsp"),f=null;a(b).find('li[id^="contentListItem"]').find("a").each(function(){if(-1==this.textContent.indexOf("Secure Exam Proctor"))return!0;f=a(this).parents("li");return!1});setInterval(function(){a(b).find("div.taskbuttondiv_wrapper").show();a(b).find("p.taskbuttonhelp").show();
a(b).find('form[action*="/assessment/take/launch-redirect"]').show();a(b).find('body #content div.landingPageColumn > ul > li a[href*="blti_placement_id"]').show();a(b).find('body #content div.landingPageColumn > ul > li img[src*="blti_icons"]').show();a(b).find("body #content div.landingPageColumn > ul > li p.helphelp").show();a(b).find("body #content div.landingPageColumn > ul > li span.caretTitleModifier").show();a(b).find("body #content div.landingPageColumn > ul > li span.linkStatus").show();
a(b).find("body #content_listContainer li").show();var e=document.getElementById("the_iframe");e&&(e=e.contentWindow.document.getElementsByClassName("taskbuttondiv_wrapper"),e.length&&(e[0].style.display="block"));c||null==f||f.css("display","none")},1E3)}function M(c,b,e,m,d){G(function(){var f=a(c).find(d?"#instructionstext":"#descriptiontext").val(),n=a([]);d||(n=a([a(c).find("#breadcrumbs").find('div[role="navigation"]').find("li")[2],a(a(c).find("#breadcrumbs").find('div[role="navigation"]').find("li")[3]).wrapInner("a").find("span")]));
var g=F[0],h=k.elbow.f016(a(c).find(d?"#assessment_name_input":"#name").val(),F);h.length&&h[0].length&&(g=h[0][0]);k.d4abe(c,b,e,e2540,a(c).find(d?"#assessment_name_input":"#name"),g,f,n,na,m,d?"instructionstext":"descriptiontext")})}function N(c,b,e,m,d){G(function(){localStorage.removeItem("p_unsaved");localStorage.removeItem("bb_script_inject");a(c).find(d?"#assessment_name_input":"#name").val(m);var f=a(c).find(d?"#instructionstext":"#descriptiontext").val();k.d751(c,a52d029(),"",!1);k.d751(c,
eac76(f,d?O:T,U,k.be24(b),A,e?cjs.mi6(l.crypto.getRandomValues(new Uint32Array(1))[0].toString()).toString():"",b,d?"instructionstext":"descriptiontext"))})}function W(c,f){a(b).find("#actionbar").hide();a(b).find("#containerdiv").hide();a(b).find("#menuPuller").length&&(a(b).find("#navigationPane").hasClass("navcollapsed")||a(b).find("#menuPuller")[0].click());a(b).find('div[id^="cmdiv_"').remove();a(b).find("head").append('<link href="'+chrome.extension.getURL("webassets/q76s.css")+'" rel="stylesheet" />');
a.get(chrome.extension.getURL("webassets/q76s.html"),function(e){a(b).find("#proctorio").remove();a(b).find("#proctorio_wait").remove();a(b).find("#containerdiv").after(mus.th(e,{A700:chrome.i18n.getMessage("A700")}));a(b).find("#proctorio_wait").css("padding-bottom",100);e=a(b).find("#pageTitleText");e.length&&!a(b).find("#pio_cloned_header").length?a(e[0].outerHTML).attr("id","pio_cloned_header").text(c+": "+chrome.i18n.getMessage("A764")).insertAfter(e.hide()):(a(b).find("#pio_cloned_header").text(c+
": "+chrome.i18n.getMessage("A764")).show(),e.hide());e=a(b).find("#helpPageTitle");e.length&&!a(b).find("#pio_cloned_help").length?a(e[0].outerHTML).attr("id","pio_cloned_help").html("<p>"+chrome.i18n.getMessage("A557")+'</p><p><a href="https://proctorio.zendesk.com/hc/articles/202351640" target="_blank">'+chrome.i18n.getMessage("A680")+"</a>.</p>").insertAfter(e.hide()):(a(b).find("#pio_cloned_help").show(),e.hide());f()})}function X(c){var b=Date.now();a.ajax({url:t+"/webapps/gradebook/do/instructor/getJSONData?course_id="+
A,type:"GET",timeout:3E5}).done(function(a){var e=Date.now()-b;chrome.runtime.sendMessage([3,["_trackEvent","zGpx",t+"_"+cjs.mi6(A).toString(),e.toString()]]);if(a)try{var d=JSON.parse(a);"undefined"!=typeof d.cachedBook&&(d=d.cachedBook);c(d)}catch(r){c({})}else c({})}).fail(function(a,b,d){a=dd10(d,b);a.reason&&(a=a.reason);chrome.runtime.sendMessage([3,["_trackEvent","p5FF",t+"_"+cjs.mi6(A).toString(),a]]);c({})})}function ka(c,b){var e="";chrome.runtime.sendMessage([17,k.be24(c+"_itemid_"+t)],
function(f){chrome.runtime.lastError&&l.top.location.reload(!0);f?(b(f),chrome.runtime.sendMessage([16,k.be24(c+"_itemid_"+t),f,43829])):a('<iframe id="proctorio_iframe" style="position:absolute;left:-1000px;top:0px;width:0px;" src="'+t+"/webapps/gradebook/do/instructor/goto?dispatch=editContent&course_id="+A+"&itemId="+c+'"></iframe>').appendTo(l.top.document.body).load(function(){var d=this.contentWindow||this.contentDocument.parentWindow;if(d&&d.document&&d.document.URL){var f=d.document.URL;-1<
f.indexOf("assessment/do/authoring/modifyAssessment")&&-1<f.indexOf("method=modifyAssessment")?(e=a(d.document).find('input[name="assessmentId"]').val(),e&&e.length||!(-1<d.document.URL.indexOf("?"))||(f=qp(d.document.URL.split("?")[1]),"undefined"!=typeof f.assessmentId&&(e=f.assessmentId)),e?chrome.runtime.sendMessage([17,k.be24(e+"_assid_"+t)],function(f){chrome.runtime.lastError&&l.top.location.reload(!0);f?(a(l.top.document.body).find("#proctorio_iframe").remove(),chrome.runtime.sendMessage([16,
k.be24(e+"_assid_"+t),f,43829]),chrome.runtime.sendMessage([16,k.be24(c+"_itemid_"+t),f,43829]),b(f)):k.d751(d.document,"javascript:assessment.modifyDeployOptions();")}):b(0)):-1<f.indexOf("assessment/do/content/assessment?action=MODIFY")&&-1<f.indexOf("method=modifyOptions")&&(-1<f.indexOf("assessmentType=Test")||-1<f.indexOf("assessmentType=Survey"))?(f=a(d.document).find('input[name="content_id"]').val(),a(l.top.document.body).find("#proctorio_iframe").remove(),f&&(chrome.runtime.sendMessage([16,
k.be24(e+"_assid_"+t),f,43829]),chrome.runtime.sendMessage([16,k.be24(c+"_itemid_"+t),f,43829])),b(f)):-1<f.indexOf("assignment/execute/manageAssignment")?(a(l.top.document.body).find("#proctorio_iframe").remove(),b(0)):-1<f.indexOf("/webapps/gradebook/do/instructor/enterGradeCenter")&&(a(l.top.document.body).find("#proctorio_iframe").remove(),b(0))}})})}function G(b){k.elbow.fa3e1("q78s",T,F,function(c){T=c;U="";O.length?b():a.get(chrome.extension.getURL("webassets/q79s.html"),function(a){O=a;b()})})}
function K(b,f){var c=Date.now();a.ajax({url:t+"/webapps/blackboard/execute/userManager?showAllMax=1000&sortDir=ASCENDING&sortCol=userLastName&showAll=true&course_id="+A+"&startIndex=0",type:"GET",dataType:"html",success:function(e){var d=Date.now()-c;e=a(e).find("#listContainer_datatable").find('tr[id^="listContainer_row"]');chrome.runtime.sendMessage([3,["_trackEvent","pbes",t+"_"+e.length+"_"+cjs.mi6(A).toString(),d.toString()]]);d=[];for(var m,k,g,h,p,y,u,l=0;l<e.length;l++)2!=b?(m=a(e[l]).find('input[type="checkbox"]').val(),
void 0===m&&(m=a(e[l]).find(".contextMenuContainer").attr("bb:contextParameters"),m=(new URLSearchParams(m)).get("user_id")),g=a.trim(a(e[l]).find("td").eq(1).text()),h=a.trim(a(e[l]).find("td").eq(2).text()),p=a.trim(a(e[l]).find("td").eq(3).find("a").attr("href").replace("mailto:","").toLowerCase()),y=cjs.mi6(p).toString(),u=a(e[l]).find("th").find(".profileCardAvatarThumb").find("img"),(u=u.length?u.attr("src"):"")||(u=""),a(e[l]).find("th").find(".hasGlobalHandling").remove(),k=a.trim(a(e[l]).find("th").find(".profileCardAvatarThumb").text()),
0==b?d.push([m,k,g,h,p,u,y]):1==b&&d.push(["",y,g+" "+h,"","","",m,p])):d.push(1);f(d)},error:function(a,b,c){a=dd10(c,b);a.reason&&(a=a.reason);chrome.runtime.sendMessage([3,["_trackEvent","FrCp",t+"_"+cjs.mi6(A).toString(),a]]);f([])}})}function ea(b,f,e){a.ajax({url:t+"/webapps/assessment/do/authoring/modifyAssessment?method=modifyAssessment&course_id="+A+"&assessmentId="+f,type:"GET",dataType:"HTML",timeout:3E5}).done(function(b){b?(b=a(b),b.find("#meta_value_5").length?(b=b.find("#meta_value_5").text(),
""===b||isNaN(b)?e(!0):(b=parseInt(b),0<b?e(!1):e(!0))):e(!0)):e(!0)}).fail(function(a,b,c){e(!0)})}function fa(){a(b).find(".taskbuttondiv_wrapper").show();var c=a(b).find("#dataCollectionContainer").children('div[id^="step"]').last(),f=a(c[0].outerHTML).attr("id","step_proctorio");f.find("h3 span").attr("id","stepnumberproctorio").text("P");f.find("h3").attr("id","steptitleproctorio").css("padding-left",30).contents()[2].textContent=chrome.i18n.getMessage("A384");var e=c.find(".stepHelp"),k="";
e.length&&(e[0].style.display="block",k=a(e[0].outerHTML).html('<a href="https://proctorio.zendesk.com/hc/articles/202016790" target="_blank">'+chrome.i18n.getMessage("A815")+".</a>")[0].outerHTML);f.children("div").attr("id","stepcontentproctorio").addClass("cfx").css("margin-bottom",50).html('<div class="noLabelField"><div>'+chrome.i18n.getMessage("A814")+"</div>"+k+"</div>");f.insertAfter(c);b.body.classList.add("pio_lms_bb");b.body.style.cursor="default"}function Q(c,f,e,m,d,r,n,g){Z();G(function(){var h=
!0,p=[],l="",u=0,t=new Date(13088232E5),x=new Date(13088232E5);r&&!r.validate_settings()&&(h=!1,r.display_invalid(c),p.push("INVALIDPROFSETTINGS"));var q=k.elbow.f016(a(c).find("#name").val(),F)[1],v=r?k.elbow.f1802(r.return_settings()):chrome.i18n.getMessage("A896");!m&&d&&(l=q+" "+v,!q.length||255<l.length)&&(e?l=255<l.length?q.substring(0,255-v.length-2)+" "+v:v:(v=q.length?chrome.i18n.getMessage("B105",(255-(v.length+1)).toString()):chrome.i18n.getMessage("A870"),C(c,"name",v,!0,"name_error_pio"),
h=!1,p.push("TITLE"+q.length)));q=c.getElementById("fIsTimeLimit");d&&q&&(q.disabled=!1,q.checked||q.click());if(d||q&&q.checked)k.e2e7(a(c).find("#fMaxMinutes").val(),60,1,420,function(b,d,f){b?u=f:e?a(c).find("#fMaxMinutes").val(60):(b="","LONG"==d?b=chrome.i18n.getMessage("B099","420"):"SHORT"==d?b=chrome.i18n.getMessage("B101"):"NEGATIVE"==d?b=chrome.i18n.getMessage("B104"):"NAN"==d&&(b=chrome.i18n.getMessage("B103")),C(c,"fMaxMinutes",b,!0,"time_error_pio"),h=!1,p.push("TIMELIMIT"+d))}),a(c).find("#userTestOptions_datatable").find('tr[id!="userTestOptions_row:0"]').find("input.timeLimit").each(function(){var b=
this;d&&a(this).siblings(".timerEnable").prop("disabled",!1).prop("checked",!0).prop("disabled",!0);(d||a(this).siblings(".timerEnable").prop("checked"))&&k.e2e7(a(this).val(),60,1,300,function(d,f){d||(e?a(this).val(60):(d="","LONG"==f?d=chrome.i18n.getMessage("B099","300"):"SHORT"==f?d=chrome.i18n.getMessage("B101"):"NEGATIVE"==f?d=chrome.i18n.getMessage("B104"):"NAN"==f&&(d=chrome.i18n.getMessage("B103")),C(c,a(b).attr("id"),d,!0,"time_error_pio"),h=!1,p.push("OVERRIDE"+f)))})});a(c).find("#fIsMultipleAttempts").prop("checked")&&
a(c).find("#fNumMultipleAttempts").prop("checked")&&(q=0,v=a(c).find("#attemptCount").val(),""==v||isNaN(v)?(C(c,"attemptCount",chrome.i18n.getMessage("A842"),!1,"attempt_error_pio"),h=!1,p.push("ATTEMPTNAN")):(q=parseInt(v),0>q?(C(c,"attemptCount",chrome.i18n.getMessage("A843"),!1,"attempt_error_pio"),h=!1,p.push("ATTEMPTNEGATIVE")):0==q&&(C(c,"attemptCount",chrome.i18n.getMessage("A841"),!1,"attempt_error_pio"),h=!1,p.push("ATTEMPT0"))),e&&0>=q&&a(c).find("#attemptCount").val(1));if(!e){q=a(c).find("#start_restrict").prop("checked");
v=a(c).find("#end_restrict").prop("checked");var w=a(c).find("#_dueDate").prop("checked");if(q||v||w)v&&(t=I(a(c).find("#restrictend").val())),q&&(x=I(a(c).find("#restrictstart").val())),q&&v&&I(a(c).find("#restrictstart").val()).getTime()>I(a(c).find("#restrictend").val()).getTime()&&(C(c,"tp_restrict_end_time",chrome.i18n.getMessage("A850"),!0,"date_error_pio"),h=!1,p.push("OPENCLOSE")),q&&w&&I(a(c).find("#restrictstart").val()).getTime()>I(a(c).find("#dueDate").val()).getTime()&&(C(c,"tp_dueDate_time",
chrome.i18n.getMessage("A849"),!0,"date_error_pio"),h=!1,p.push("STARTDUE"))}if(d){if(q=c.getElementById("noRadio"))q.checked=!0;a(c).find("#fIsHideAttempt").prop("checked",!1)}d?a(c).find("#fIsPassword").prop("disabled",!1).prop("checked",!0):a(c).find("#fIsPassword").prop("checked")&&(q=a(c).find("#fPassword").val(),0>=q.length||100<=q.length)&&(e?(a(c).find("#fIsPassword").prop("checked",!1),a(c).find("#fPassword").val("")):(C(c,"fPassword",chrome.i18n.getMessage(0>=q.length?"A852":"A853"),!0,
"pw_error_pio"),h=!1,p.push("PASSWORD"+q.length)));h?(q=!1,v=a(c).find("#showInstInstructions"),d&&(v.length?v.prop("checked","checked").val("true"):v=a('<input type="checkbox" id="showInstInstructions" name="showInstInstructions" value="true" checked="checked" />').appendTo(a(c).find('form[name="assessmentForm"]'))),v=a(c).find("#stepcontent1").find(".vtbegenerated"),v.length?(w=0,2==v.length&&(w=1),v=v.eq(w).find(".proctorio-embed").length,!v&&d?q=!0:v&&!d&&(q=!0)):d&&(q=!0),q?(k.b4d5(),Y(b,f,d,
n,function(){g(h,l,k.elbow.ef9(t),p,k.elbow.ef9(x),u)})):g(h,l,k.elbow.ef9(t),p,k.elbow.ef9(x),u)):g(h,l,k.elbow.ef9(t),p,k.elbow.ef9(x),u)})}function Y(b,f,e,m,d){var c=0,n=0;a("<iframe />").attr("id","instructions_iframe").attr("name","instructions_iframe").css({position:"absolute",left:-1E3,top:0,width:0}).appendTo(a(b).find("body")).load(function(){var b=this.contentWindow||this.contentDocument.parentWindow;try{b&&b.document&&b.document.URL&&(b.document.URL.indexOf("modifyAssessment")==b.document.URL.length-
16?(n++,M(b.document,!1,m,function(){var d="",g="";e?G(function(){k.d751(document,a52d029(),"",!1);d=eac76(a(b.document).find("#instructionstext").val(),O,U,k.be24(f),A,m?cjs.mi6(l.crypto.getRandomValues(new Uint32Array(1))[0].toString()).toString():"",f,"instructionstext");g="bb_script_inject_instructions"}):(d=e2540(a(b.document).find("#instructionstext").val(),"instructionstext"),g="bb_script_inject_remove");var r=function(){l.top.removeEventListener(g,r);var c=a(b.document).find('input[name="bottom_Submit"]');
c.length&&c[0].click()};l.top.addEventListener(g,r);k.d751(b.document,d);c=setTimeout(function(){},6E4)},!0)):b.document.URL.indexOf("modifyAssessmentInfo")==b.document.URL.length-20&&(clearTimeout(c),a(this).remove(),d()))}catch(h){0<n&&d()}});a("<form />").attr("action",t+"/webapps/assessment/do/authoring/modifyAssessment").attr("target","instructions_iframe").attr("method","POST").css("display","none").appendTo(a(b).find("body")).append(a("<input>",{name:"blackboard.platform.security.NonceUtil.nonce",
value:a(b).find("#menuWrap").find('input[name="blackboard.platform.security.NonceUtil.nonce"]').val()})).append(a("<input>",{name:"method",value:"modifyAssessmentInfo"})).append(a("<input>",{name:"course_id",value:A})).append(a("<input>",{name:"assessmentId",value:a(b).find('input[name="assessmentId"]').val()})).append(a("<input>",{name:"sectionId",value:""})).append(a("<input>",{name:"questionId",value:""})).append(a("<input>",{name:"saveAsNew",value:"false"})).append(a("<input>",{name:"assessmentType",
value:a(b).find('input[name="assessmentType"]').val()})).append(a("<input>",{name:"isLinkedQuestion",value:""})).append(a("<input>",{name:"referencingQuestionId",value:""})).append(a("<input>",{name:"position",value:"-1"})).append(a("<input>",{name:"relativeId",value:""})).append(a("<input>",{name:"questionBlockId",value:""})).append(a("<input>",{name:"questionType",value:""})).append(a("<input>",{name:"isPaged",value:"false"})).append(a("<input>",{name:"selectbyQuestionType",value:""})).append(a("<input>",
{name:"points_bulk",value:""})).append(a("<input>",{name:"returnUrl",value:""})).submit()}function C(a,b,e,m,d){k.d751(a,f9b12("fIsTimeLimit",b,e,m,d))}function Z(c){if(c&&Array.isArray(c)&&c.length)for(var f=0,e=c.length;f<e;f++){var k=b.getElementById(c[f]);k&&k.remove()}else a(b).find(".proctorio_bb_error").remove()}function I(a){if(a&&2==a.split(" ").length&&3==a.split(" ")[0].split("-").length&&3==a.split(" ")[1].split(":").length)try{var b=a.split(" ")[0].split("-"),c=a.split(" ")[1].split(":");
return new Date(parseInt(b[0]),parseInt(b[1])-1,parseInt(b[2]),parseInt(c[0]),parseInt(c[1]),parseInt(c[2]))}catch(m){}return new Date(1970,1,1)}function ha(){k.b291b(function(c,f){1<=c/60?(a(b).find("#fIsTimeLimit").prop("checked")||a(b).find("#fIsTimeLimit").prop("disabled",!1).click().prop("disabled",!0),a(b).find("#fMaxMinutes").prop("disabled",!1).val(c/60),f(1)):f(0)})}function ia(c,f){a(b).on("keydown",function(c){if(13==c.keyCode&&"descriptiontext"!=a(b.activeElement).attr("id"))return!1});
var e=a(b).find("#dataCollectionContainer").children('div[id^="step"]').last(),k=a(e[0].outerHTML).attr("id","step_proctorio");k.find("h3 span").attr("id","stepnumberproctorio").text("P");try{k.find("h3").attr("id","steptitleproctorio").css("padding-left",30).contents()[2].textContent=chrome.i18n.getMessage("A384")}catch(r){}var d=e.find(".stepHelp");d.length&&a(d[0].outerHTML).html('<a href="https://proctorio.zendesk.com/hc/articles/202016790" target="_blank">'+chrome.i18n.getMessage("A815")+".</a>");
k.addClass("cfx").children("div").attr("id","stepcontentproctorio").addClass("cfx").css("margin-bottom",50).html('<div class="noLabelField" style="float:none"><span><input id="enable_proctorio" type="checkbox"></span><label for="enable_proctorio">'+chrome.i18n.getMessage("A993")+'</label><details class="proctorio-details" style="display:none"><summary class="stepHelp fieldHelp proctorio_bb_summary">'+chrome.i18n.getMessage("B080")+'</summary><div class="pio_settings_injection_point"></div></details></div>');
k.insertAfter(e);a(b).find(".proctorio_control").hide();c[0]||a(b).find(".proctorio_settings").hide();a(b).find(".taskbuttondiv_wrapper").show();a(b).find(".proctorio-details").on("click",function(){var c=a(this);setTimeout(function(){c.find("summary.stepHelp").text(chrome.i18n.getMessage(c.prop("open")?"A910":"B080"));a(b).find(".proctorio_settings").show()},100)});b.body.classList.add("pio_lms_bb");b.body.style.cursor="default";f()}function ja(c,f,e,m){Z();if(b.getElementById("enable_proctorio").checked){if(!b.body.getAttribute("data-buttons-rendered")){var d=
function(d){var g=a(b).find("#"+d+"_submitButtonRow").find('input[name="'+d+'_Submit"]');g&&g.length&&(g=g[0],g.style.display="none",d=g.cloneNode(),d.removeAttribute("name"),d.style.display="inline-block",k.elbow.pioQuery.insertAfter(d,g),d.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();aa(a(g),c,f,e,m)}))};d("top");d("bottom");k.a2d78(function(a){aa(b.querySelectorAll('input[name="top_Submit"], input[name="bottom_Submit"]'),c,f,e,m,function(b){a(b)})});b.body.setAttribute("data-buttons-rendered",
!0)}if(d=b.getElementById("launchInNewWindowLabel"))d.checked=!1,d.style.display="none";if(d=b.getElementById("fIsTimeLimit"))d.checked||d.click(),d.disabled=!0;if(d=b.getElementById("hardStopRadio"))d.checked=!0,a(d).closest("div").hide();if(d=b.getElementById("fIsForceComplete")){if(d.checked)C(b,"fIsForceComplete",chrome.i18n.getMessage("I060"),!0,"bbpio_force_complete"),document.getElementById("bbpio_force_complete").style.display="block";else{var l=document.getElementById("help_fIsForceComplete");
l.innerHTML=chrome.i18n.getMessage("I060")}d.checked=!1;d.disabled=!0}if(d=b.getElementById("fIsPassword"))d.checked=!0,d.disabled=!0;if(d=b.getElementById("fPassword")){d.value=e.return_password();l=d.parentElement;var n=document.createElement("div");n.setAttribute("id","overlay_password");var g=document.createElement("div");g.setAttribute("class","password_dots");g.innerHTML="\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022";var h=document.createElement("p");h.id="passwordAlert";h.innerHTML=
chrome.i18n.getMessage("Y049");d.parentElement.appendChild(h);n.appendChild(d);n.appendChild(g);l.insertBefore(n,h);d.disabled=!0;if(d=b.getElementById("help_fPassword"))d.style.display="none"}if(d=b.getElementById("fIsHideAttempt"))d.checked=!1,d.style.display="none";a(b).find('label[for="fIsHideAttempt"]').hide();a(b).find("#help_fIsHideAttempt").hide();a(b).find("#showInstInstructions").closest("li").hide();a(b).find(".proctorio-details").show().prop("open",!0).find("summary.proctorio_bb_summary").text(chrome.i18n.getMessage("A910"));
a(b).find(".proctorio_settings").show();a(b).find("#userTestOptions_datatable").find("input.timerEnable").each(function(){a(this).prop("checked")||this.click();a(this).prop("disabled",!0)});a(b).find("#userTestOptions_datatable").off().on("DOMNodeInserted",function(c){-1<c.target.className.indexOf("user-test-exception-row")&&a(b).find("#userTestOptions_datatable").find("input.timerEnable").each(function(){a(this).prop("checked")||this.click();a(this).prop("disabled",!0);var c=a(this).siblings(".timeLimit");
if(!c){if(!c.attr("bb:lastvalue")){var d=a(b).find("#fMaxMinutes").val();d||(d=60);c.attr("bb:lastvalue",d);c.val(d)}setTimeout(function(){a(b).find("#userTestOptions_datatable").find("input.timerEnable").prop("disabled",!0)},250)}})});d=b.getElementById("fDeliveryType2");l=b.getElementById("fDeliveryType1");d&&l&&(d.addEventListener("click",P),l.addEventListener("click",P),d.checked&&(C(document,"fDeliveryType1",chrome.i18n.getMessage("Y039"),!0,"presentation_warning_pio"),b.getElementById("presentation_warning_pio").outerHTML+=
"<div id='newLine'></div>",d.classList.add("alertAdded"),b.getElementById("presentation_warning_pio").classList.remove("proctorio_bb_error")))}else{if(d=b.getElementById("launchInNewWindowLabel"))d.style.display="list-item";if(d=b.getElementById("fIsTimeLimit"))d.disabled=!1;(d=b.getElementById("hardStopRadio"))&&a(d).closest("div").show();if(d=b.getElementById("fIsForceComplete"))d.checked=!1,d.disabled=!1,l=document.getElementById("help_fIsForceComplete"),l.innerHTML="Once started, this test must be completed in one sitting.";
if(d=b.getElementById("fIsPassword"))d.disabled=!1,d.checked=!1;d=b.getElementById("fPassword");l=d.closest("div.field");n=b.getElementById("help_fPassword");d&&(d.disabled=!1,d.value="",l.insertBefore(d,n),l.removeChild(overlay_password),(h=b.getElementById("passwordAlert"))&&h.parentNode.removeChild(h),d=b.getElementById("help_fPassword"))&&(d.style.display="block");if(d=b.getElementById("fIsHideAttempt"))d.style.display="inline-block";a(b).find('label[for="fIsHideAttempt"]').show();a(b).find("#help_fIsHideAttempt").show();
a(b).find("#showInstInstructions").closest("li").show();a(b).find(".proctorio-details").hide().prop("open",!1);a(b).find("#userTestOptions_datatable").find("input.timerEnable").each(function(){a(this).prop("disabled",!1)});d=b.getElementById("fDeliveryType2");l=b.getElementById("fDeliveryType1");d&&l&&(d.removeEventListener("click",P),l.removeEventListener("click",P),d.classList.remove("alertAdded"));(d=b.getElementById("presentation_warning_pio"))&&d.parentNode.removeChild(d)}}function aa(c,f,e,
l,d,r){b.body.style.cursor="wait";var m=a(b).find('input[type="submit"], input[value="Cancel"]').each(function(){this.disabled=!0});k.af9813(f,e,l,N,function(){a(b).find("#descriptiontext").closest("li").hide()},a(b).find('input[name="top_Submit"], input[name="bottom_Submit"]'),Q,d,function(c){var d=b.getElementById("enable_proctorio");d=d&&d.checked;if(c){if(e=b.getElementById("fIsTimeLimit"))e.disabled=!1;if(d){if(d=b.getElementById("fIsPassword"))d.disabled=!1,d.checked=!0;if(d=b.getElementById("fPassword"))d.disabled=
!1,d.setAttribute("type","text"),d.value=l.return_password(),a(d).closest(".noLabelField").hide()}if((d=b.getElementsByClassName("timerEnable"))&&d.length)for(e=0;e<d.length;e++)d[e].disabled=!1}else{m.each(function(){this.disabled=!1});a(b).find("#descriptiontext").closest("li").show();if(d){var e=b.getElementById("fIsTimeLimit");e&&(e.disabled=!0);if(d=b.getElementById("fIsPassword"))d.checked=!0,d.disabled=!0}k.a924();b.body.style.cursor="default"}"function"==typeof r&&r(c)})}function S(a,b,e,
l){var c=[],f=[],m=function(d){d<b.length?b[d][6]?chrome.runtime.sendMessage([17,b[d][6]+"_bbuid_"+t],function(a){a?(chrome.runtime.sendMessage([16,b[d][6]+"_bbuid_"+t,a,43829]),b[d][1]=a):(c.push(b[d][1]),f.push([d,b[d][6],b[d][7]]));m(++d)}):(c.push(b[d][1]),f.push([d,b[d][6],b[d][7]]),m(++d)):c.length?k.d648d(a,c,function(a){if(a&&a.length)for(var c=0;c<a.length;c++)a[c]&&"0"!==a[c]?(f[c][1]&&chrome.runtime.sendMessage([16,f[c][1]+"_bbuid_"+t,a[c],43829]),b[f[c][0]][1]=a[c]):e.push(f[c][2]);else for(c=
0;c<f.length;c++)e.push(f[c][2]);l()}):l()};m(0)}function na(b){return 3!=b.nodeType&&"undefined"==typeof b.tagName||a(b).hasClass("proctorio-embedstyle")||a(b).hasClass("proctorio-embed")||a(b).hasClass("p_io")||a(b).hasClass("proctorioexam")||a(b).hasClass("proctoriocourse")||a(b).hasClass("proctorio-script")||a(b).hasClass("proctorio-noscript")||-1<a(b).text().indexOf(".vo.msecnd.net/lti/exam")||-1<a(b).text().indexOf("#tinymce div.")||"proctorio-embed"==a(b).attr("id")}function ba(){null==b.body.getAttribute("data-pio-prof-bb")&&
(b.body.setAttribute("data-pio-prof-bb",1),chrome.runtime.sendMessage([5,[a(b).find("#pageTitleHeader").first().text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," "),a(b).find("h3").first().text().trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," ")]],function(a){chrome.runtime.lastError&&location.reload(!0)}),oa(),a(b).find(".proctorio-embed, #proctorio-embed").hide(),a(b).find(".proctorio-oembed, #proctorio-oembed").show(),
chrome.runtime.sendMessage([11],function(a){chrome.runtime.lastError&&l.top.location.reload(!0);A=a[0];t=l.location.protocol+"//"+a[3]+a[4];k&&"function"==typeof k.d05?(k.d05(b),k.e877(function(a){K(2,a)}),w()):k=new afd982(b,A,"bb",t,function(){k.e877(function(a){K(2,a)});w()});chrome.runtime.sendMessage([9],function(a){})}))}function oa(){var c=a(b).find("#editModeToggleLink").hasClass("read-on");-1!=b.URL.indexOf("/course/tools/settings?dispatch=viewShowHideTool")?c?(c=a(b).find("#content div.landingPageColumn ul li a").parent().parent(),
c.find("p").css("display","block"),c.find("img").css("display","inline"),c.find("h3 a").css("display","inline"),c.find("span.caretTitleModifier").css("display","inline"),c.find("span.linkStatus").css("display","inline"),c=a(b).find("a:contains('Secure Exam Proctor')").parent().parent(),c.find("span.linkStatus").hide(),c.find("a.browse").attr("onclick")&&-1!=c.find("a.browse").attr("onclick").indexOf("hide")?c.find("span.caretTitleModifier a").text(chrome.i18n.getMessage("A097")):(c.find("span.caretTitleModifier a").text(chrome.i18n.getMessage("A099")),
c.find("h3 a").text(c.find("h3 a").text()+" "+chrome.i18n.getMessage("A098")),c.find("h3").css("padding",0)),c.show()):(c=a(b).find("#content div.landingPageColumn ul li a").not(":contains('Secure Exam Proctor')").parent().parent(),c.find("p").css("display","block"),c.find("img").css("display","inline"),c.find("h3 a").css("display","inline"),c.find("span.caretTitleModifier").css("display","inline"),c.find("span.linkStatus").css("display","inline")):-1!=b.URL.indexOf("/content/listContent")?c?a("#content_listContainer li").show():
a("#content_listContainer li a span").not(":contains('Secure Exam Proctor')").parent().parent().parent().parent().show():(c=a(b).find("#content div.landingPageColumn"),c.find('a[href*="blti_placement_id"]').show(),c.find('img[src*="blti_icons"]').show(),c.find("p.helphelp").show(),c.find("span.caretTitleModifier").show(),c.find("span.linkStatus").show(),a("#content_listContainer li").show())}var A="",t="",T="",O="",F=[],U="",k=function(){},b=document,P=function(){if("fDeliveryType2"==this.id)this.classList.contains("alertAdded")||
(C(document,"fDeliveryType1",chrome.i18n.getMessage("Y039"),!0,"presentation_warning_pio"),b.getElementById("presentation_warning_pio").outerHTML+="<div id='newLine'></div>",this.classList.add("alertAdded"),b.getElementById("presentation_warning_pio").classList.remove("proctorio_bb_error"));else{var a=b.getElementById("presentation_warning_pio");a&&a.parentNode.removeChild(a);b.getElementById("fDeliveryType2").classList.remove("alertAdded");b.getElementById("newLine").parentNode.removeChild(b.getElementById("newLine"))}};
"complete"==b.readyState?ba():b.onreadystatechange=function(){"complete"==b.readyState&&ba()}})($,window);
