/*
COPYRIGHT (C) 2013-2020 PROCTORIO INC.
USE OF THIS SOFTWARE IS PROTECTED BY COPYRIGHT LAWS AND INTERNATIONAL COPYRIGHT TREATIES,
AS WELL AS OTHER INTELLECTUAL PROPERTY LAWS AND TREATIES.
UNAUTHORIZED REPRODUCTION, DISPLAY, MODIFICATION, OR DISTRIBUTION OF THIS SOFTWARE, OR ANY PORTION OF IT,
MAY RESULT IN SEVERE CIVIL AND CRIMINAL PENALTIES, AND WILL BE PROSECUTED TO THE FULL EXTENT PERMITTED BY LAW.
USE OF THIS SOFTWARE IS CONDITIONED ON YOUR ACCEPTANCE OF OUR TERMS OF SERVICE, FOUND AT PROCTORIO.COM/TOS.
OPEN SOURCE LICENSES CAN BE FOUND IN THE LICENSE.TXT FILE OR ONLINE AT PROCTORIO.COM/LICENSES.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,e){if(d){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var h=a[e];h in b||(b[h]={});b=b[h]}a=a[a.length-1];e=b[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var h=d.length,t=a.length;b=Math.max(0,Math.min(b|0,d.length));for(var p=0;p<t&&b<h;)if(d[b++]!=a[p++])return!1;return p>=t}},"es6","es3");$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var e=a.length,h=0;h<e;h++){var t=a[h];if(d.call(b,t,h,a))return{i:h,v:t}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
(function(a,d){function b(a,d){if(a())d();else var b=setInterval(function(){a()&&(clearInterval(b),d())},100)}var e,h,t,p=[],x=!1,A=setInterval(function(){try{chrome.runtime.sendMessage([42,"lub"],function(a){chrome.runtime.lastError?(clearInterval(A),location.reload()):"dub"!=a&&(clearInterval(A),location.reload())})}catch(m){if(m.message.startsWith("Cannot read")||m.message.startsWith("Error connecting to extension")||m.message.startsWith("Invocation of form runtime.connect")||m.message.startsWith("Extension context invalidated"))clearInterval(A),
location.reload()}},1E3),g=new ec21dc(function(){x=!0;g&&g.fa3e1(function(m){p=m;(function(){var a=document.getElementById("section-tabs");if(a&&(a=a.getElementsByTagName("a"),a.length))for(var d=0;d<a.length;d++)-1<a[d].textContent.indexOf("Secure Exam Proctor")?a[d].parentNode.style.display="none":a[d].style.display="block"})();var z=function(a){if(document.getElementsByClassName("proctorio-embed").length)return!0;for(var d=document.getElementsByTagName("iframe"),b=0,e=d.length;b<e;b++)if(d[b].src&&
"function"==typeof d[b].src.indexOf&&-1!=d[b].src.indexOf(".vo.msecnd.net/lti/exam"))return!0;b=document.querySelectorAll(a);if(!b.length)return!1;a=b[0].textContent;b=0;for(e=p.length;b<e;b++)if(-1!=a.indexOf(p[b]))return!0;return!1};chrome.runtime.sendMessage([11],function(f){chrome.runtime.lastError&&location.reload();var m=!1;e=f[0];h=f[1];t=d.location.protocol+f[3]+f[4];(function(){var a=document.querySelectorAll("#breadcrumbs li");a&&a[1]&&a[1].getElementsByTagName("a")[0]&&(a[1].getElementsByTagName("a")[0].style.color=
"#005AA8");a&&a[2]&&a[2].getElementsByTagName("a")[0]&&(a[2].getElementsByTagName("a")[0].style.color="#005AA8");if(a=document.getElementById("section-tabs"))if(a=a.getElementsByTagName("a"),a.length)for(var d=0;d<a.length;d++)a[d].style.color="#005AA8"})();if(!a("body").attr("data-p")){a("body").attr("data-p",!0);if(-1!=document.location.pathname.indexOf("courses/"+e+"/quizzes")&&-1==document.location.pathname.indexOf("/take")){if(z("quiz_title")&&!a("ul.quiz_list").length)if(a("div.lock_explanation").length)a("#quiz_show").show();
else{a(".proctorio-embed").hide();a("iframe[src$='.vo.msecnd.net/lti/exam']").hide();a(".proctorio-oembed").show();a(".take_quiz_button").hide();a('#right-side a[href*="/take"]').parent().hide();f=a("div.muted-notice");f.length&&f.find("p").append(" <a href='https://proctorio.zendesk.com/hc/articles/"+chrome.i18n.getMessage("A117")+"' target='_blank' style='text-decoration:underline'>"+chrome.i18n.getMessage("A134")+"</a>.");var p=a("#quiz_show");p.show();f=document.createElement("a");f.href=document.location.href;
var l=f.pathname.split("/");1<l.length?b(function(){return x},function(){var f=-1;g.ee1(e,function(a){f=a;chrome.runtime.sendMessage([91])});var v=l.filter(Boolean);v=v[v.length-1];g.e2cc("reason",function(){var a=g.c416(v,e);g.b1457("code",null===localStorage.getItem(a+"_close")?0:localStorage[a+"_close"])});g.f10(v,e,function(c){c?g.c8f4(a("span.proctoriocontrol").length?v:0,e,h,function(k){if(k){k=a(".take_quiz_button").find(".btn");var u=g.c416(v,e),y=a("#quiz_student_details li:last"),B=function(a){try{if(a&&
!(-1<d.location.hostname.indexOf("proctorio.instructure.com"))){var c=a.due_at,b=a.lock_at,C=a.unlock_at,e=a.time_limit;if(null!=C&&(null!=b||null!=C)&&null!=e){var f=Math.round(Date.parse(C)/1E3),k=Math.round(Date.parse(c||b)/1E3);if(!(isNaN(f)||isNaN(k)||isNaN(e))){var g=!1,h=function(){d.top.removeEventListener("ca_quiz_analytics_info",h);g||(g=!0,chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","4Enq",Math.round(Date.now()/1E3)+"_"+f+"_"+k+"_"+60*e+"_"+d.location.hostname]]))};d.top.removeEventListener("ca_quiz_analytics_info",
h);d.top.addEventListener("ca_quiz_analytics_info",h)}}}}catch(D){}},w=[];if(y.length){var n=function(a,d,c){if(Array.isArray(c))for(var b=0;b<c.length;b++)n(a,d,c[b]);else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&n(a,b,c[b]);else a.push(d+": "+c);return a};d.addEventListener("q_info5",function(a){if(a&&a.detail){B(JSON.parse(JSON.stringify(a.detail)));a=n([],"quizinfo",a.detail);for(var c=0;c<a.length;c++)w.push(a[c])}});d.addEventListener("q_info6",function(a){if(a&&a.detail){a=n([],
"quizsubmission",a.detail);for(var c=0;c<a.length;c++)w.push(a[c])}});chrome.runtime.sendMessage([117]);var r=y.parent()[0].parentElement.getElementsByClassName("proctorio-oembed"),x=[];r.length&&(r[0].querySelectorAll("p").forEach(function(a){x.push(a.innerText)}),x.length?w.push("Quiz Instructions "+x):w.push("No quiz Instructions"));y.parent().find("li").each(function(){w.push(a(this).text().trim().replace(/(\r\n|\n|\r)/gm," ").replace(/\s+/g," ").trim());a(this).find(".title").css("margin-right",
10)}).promise().done(function(){chrome.runtime.sendMessage([16,l.content_id+"_is_"+l.course_id+"_oy_"+t,w,43829]);y.after('<li><span class="title" style="margin-right: 10px">'+chrome.i18n.getMessage("A226")+'</span><span class="value">'+chrome.i18n.getMessage("A107")+" <strong>"+chrome.i18n.getMessage("B413")+"</strong>. <a href='https://proctorio.zendesk.com/hc/articles/200972514' target='_blank' style='text-decoration:underline'>"+chrome.i18n.getMessage("B414")+"</a>.</span></li>");if(c[0]||c[1]||
c[2]||c[47]){var a=chrome.i18n.getMessage("Y015");(c[0]||c[2])&&c[1]&&!c[47]?a=chrome.i18n.getMessage("A214"):(c[0]||c[2])&&!c[1]&&c[47]?a=chrome.i18n.getMessage("Y017"):!c[0]&&!c[2]&&c[1]&&c[47]?a=chrome.i18n.getMessage("Y018"):!c[0]&&!c[2]||c[1]||c[47]?c[0]||c[2]||!c[1]||c[47]?c[0]||c[2]||c[1]||!c[47]||(a=chrome.i18n.getMessage("Y016")):a=chrome.i18n.getMessage("A216"):a=chrome.i18n.getMessage("A215");y.after('<li><span class="title" style="margin-right: 10px">'+chrome.i18n.getMessage("A217")+'</span><span class="value">'+
a+"</span></li>")}g.e2cc("quizinfo",function(){g.b1457("quizinfo",w)})})}if(a("#take_quiz_link").length||k.length&&(!c[15]||localStorage["ok_"+u]==cjs.mi6(u+"__xsalt").toString())){-1==location.href.indexOf("#")||a("span.proctoriocontrol").length||"#proctorio"==document.location.hash||(location.href=location.href.split("#")[0]);r=null;1==k.length&&a("span.proctoriocontrol").length?(r=k.clone().attr("href","#").css("margin-left",30).text(chrome.i18n.getMessage("A235")),k.after(r),k.attr("href",k.attr("href")+
"#take")):(r=k.last(),r.find(".ui-icon-extlink").remove(),a("span.proctoriocontrol").length&&k.first().attr("href",k.attr("href")+"#take"));a("#right-side").find(".rs-margin-top").find("div").each(function(){(a(this).find('a[href*="/take"]').length||a(this).find('a[href*="https://getproctorio.com"]').length)&&a(this).hide()});var z=k.first().attr("href");r.on("keypress click",function(k){if(!m){m=!0;k.preventDefault();a(this).off();a("#right-side").remove();a("body").removeClass("with-right-side").removeClass("padless-content");
p.parent().css("padding","15px 15px 50px 15px");a(".proctorio-embed").length||chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","BRoW_ca",d.location.hostname]]);p.html('<div id="proctorio_resume"></div>');var l=a("span.emphasize-name").length,u="Canvas Student",q=document.getElementById("identity");if(null!==q){q=q.getElementsByTagName("a");for(var n=0,B=q.length;n<B;n++){var r=q[n];if(-1!=r.href.indexOf("/about")){u=r.innerText.trim();break}}}"Canvas Student"==u&&(q=document.getElementById("global_nav_profile_link"),
null!==q&&(q=q.getElementsByTagName("img"),1==q.length&&"undefined"!==typeof q[0].alt&&(u=q[0].alt.trim())));var t="Canvas Quiz";t=a("#breadcrumbs ul li:last").text().trim();b(function(){return-1<f},function(){g.b8d(c,p.parent()[0],v,e,h,"ca",u,z,"quiz_access_code",t,"#content-wrapper",A,l,f)})}k.preventDefault();return!1});a(".take_quiz_button").show();a('#right-side a[href*="/take"]').parent().show();"#proctorio"==document.location.hash&&(history.replaceState("",document.title,d.location.pathname+
d.location.search),r.click())}else g.e2cc("quizoverride",function(a){2==c[15]?g.b1457("quizoverride_response","denied"):a&&"none"!=a?a==cjs.mi6(u+"__xsalt").toString()?(chrome.runtime.sendMessage([3,["_trackEvent","PGHZ","yFrr_ca",d.location.hostname]]),localStorage["ok_"+u]=a,g.b1457("quizoverride_response","success"),document.location.reload()):g.b1457("quizoverride_response","invalid"):g.b1457("quizoverride",u)}),w.push("LOCKED"),a(".take_quiz_button").html(chrome.i18n.getMessage("A159")).show();
chrome.runtime.sendMessage([19,!0]);chrome.runtime.sendMessage([4,chrome.i18n.getMessage("B410")])}else a(".take_quiz_button").show(),a('#right-side a[href*="/take"]').parent().show(),a(".take_quiz_button").find('a[href*="https://getproctorio.com"]').remove(),a('#right-side a[href*="https://getproctorio.com"]').hide()}):(a(".take_quiz_button").show(),a('#right-side a[href*="/take"]').parent().show())})}):(a(".take_quiz_button").show(),a('#right-side a[href*="/take"]').parent().show())}else a(".take_quiz_button").show(),
a('#right-side a[href*="/take"]').parent().show(),a("#quiz_show").show();a("ul.quiz_list").length&&(a('a[href*="/take"]').each(function(){a(this).attr("href",a(this).attr("href").split("/take")[0]);a(this).attr("onclick","");a(this).on("click",function(){document.location.href=a(this).attr("href")})}),a("ul.quiz_list li.quiz div.description a").show(),a(".proctorio-embed").hide(),a("iframe[src$='.vo.msecnd.net/lti/exam']").hide())}else if(-1!=document.location.pathname.indexOf("courses/"+e+"/quizzes/")&&
-1!=document.location.pathname.indexOf("/take"))if(a("#quiz_show").show(),z("h2")){if(a(".proctorio-embed").length||a("iframe[src$='.vo.msecnd.net/lti/exam']").length)a(".proctorio-embed").hide(),a("iframe[src$='.vo.msecnd.net/lti/exam']").hide(),a(".proctorio-oembed").show();f=document.createElement("a");f.href=document.location.href;l=f.pathname.split("/");if(2<l.length){var n=a("#quiz_access_code").length?a("#quiz_access_code").closest("form").parent():0;n&&n.hide();b(function(){return x},function(){var b=
l.filter(Boolean);b=b[b.length-2];g.f10(b,e,function(f){f?g.c8f4(b,e,h,function(c){if(c&&"#take"!=document.location.hash&&a("#quiz_access_code").length)document.location=document.location.href.split("/take")[0];else{if("#take"==document.location.hash){history.replaceState("",document.title,d.location.pathname+d.location.search);c=document.getElementsByTagName("form");for(var b=0;b<c.length;b++){var e=c[b].getElementsByTagName("button");if(e.length){c=document.createElement("a");c.className=e[0].className;
c.href=document.location.href.split("/take")[0]+"#proctorio";c.textContent=chrome.i18n.getMessage("A235");e[0].parentNode.insertBefore(c,null);e=document.createElement("div");b=document.createElement("p");b.style.fontSize="18px";b.textContent=chrome.i18n.getMessage("A234");var f=document.createElement("p");f.textContent=chrome.i18n.getMessage("A233");e.appendChild(b);e.appendChild(f);c.parentNode.insertBefore(e,c);break}}}n&&n.show();a(".take_quiz_button").show();a('a[href*="https://getproctorio.com"]').prev().remove();
a('a[href*="https://getproctorio.com"]').remove()}}):(n&&n.show(),a(".take_quiz_button").show())})})}else chrome.runtime.sendMessage([19,!1]),a(".proctorio-oembed").show(),a(".proctorio-embed").hide(),a("iframe[src$='.vo.msecnd.net/lti/exam']").hide(),a(".take_quiz_button").show(),a('body.quizzes #content div[style*="width: 600px; margin: 10px auto;"]').show(),a("body ul.quiz_list li.quiz div.description a").show(),a("body #students").show()}else chrome.runtime.sendMessage([19,!1]),a(".proctorio-oembed").show(),
a(".proctorio-embed").hide(),a("iframe[src$='.vo.msecnd.net/lti/exam']").hide(),a(".take_quiz_button").show(),a('body.quizzes #content div[style*="width: 600px; margin: 10px auto;"]').show(),a("body ul.quiz_list li.quiz div.description a").show(),a("body #students").show();else if(-1!=document.location.pathname.indexOf("courses/"+e+"/assignments/")&&-1!=document.location.pathname.indexOf("/submissions/"))chrome.runtime.sendMessage([19,!1]),a(".take_quiz_button").show(),a("#quiz_show").show(),a("#preview_frame").length&&
setInterval(function(){a("#preview_frame").contents().find(".take_quiz_button").show();a("#preview_frame").contents().find(".proctorio-oembed").show();a("#preview_frame").contents().find(".take_quiz_button a.btn").length&&(a("#preview_frame").contents().find(".take_quiz_button a.btn").attr("data-method",""),a("#preview_frame").contents().find(".take_quiz_button a.btn").is("[href]")&&a("#preview_frame").contents().find(".take_quiz_button a.btn").attr("href",a("#preview_frame").contents().find(".take_quiz_button a.btn").attr("href").split("/take")[0]));
a("#preview_frame").contents().find("#quiz_show").show();a("#preview_frame").contents().find('body.quizzes #content div[style*="width: 600px; margin: 10px auto;"]').show();a("#preview_frame").contents().find("body ul.quiz_list li.quiz div.description a").show();a("#preview_frame").contents().find("body #students").show()},1E3),a(".proctorio-oembed").show(),a(".proctorio-embed").hide(),a("iframe[src$='.vo.msecnd.net/lti/exam']").hide(),a('body.quizzes #content div[style*="width: 600px; margin: 10px auto;"]').show(),
a("body ul.quiz_list li.quiz div.description a").show(),a("body #students").show();else{if(a("#content").find('img[src$="vo.msecnd.net/guides/student-logo.png"]').length){chrome.runtime.sendMessage([19,!0]);f=a("#content").find("div.proctorio_removeme");if(f.length)f.html('<div class="take_quiz_button" style="display: block;"><a id="take_quiz_link" class="btn btn-primary" href="#">Live Chat</a></div>').on("click",function(){chrome.runtime.sendMessage([31,1])});a(".proctorio_installed").hide()}else chrome.runtime.sendMessage([19,
!1]);a(".proctorio-oembed").show();a(".proctorio-embed").hide();a("iframe[src$='.vo.msecnd.net/lti/exam']").hide();a(".take_quiz_button").show();a('body.quizzes #content div[style*="width: 600px; margin: 10px auto;"]').show();a("body ul.quiz_list li.quiz div.description a").show();a("body #students").show();a("#quiz_show").show()}chrome.runtime.sendMessage([5,[document.title.trim().replace(/"/g,"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," "),a("h1").first().text().trim().replace(/"/g,
"").replace(/'/g,"").replace(/\s/g," ").replace(/[ \t\r\n]+/g," ")]],function(a){chrome.runtime.lastError&&location.reload()})}chrome.runtime.sendMessage([9],function(a){})});m=document.head.getElementsByTagName("link");for(var l=0;l<m.length;l++)m[l].href&&m[l].href.indexOf&&-1==m[l].href.indexOf("//az545770.vo.msecnd.net/snippets/")&&-1==m[l].href.indexOf("/gbl/canvas-global-embed.css")||document.head.removeChild(m[l]);chrome.runtime.sendMessage([67])})})})($,window);
